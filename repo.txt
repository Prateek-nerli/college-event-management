This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
backend/.gitignore
backend/package.json
backend/src/config/db.js
backend/src/controllers/authController.js
backend/src/controllers/collegeAdminController.js
backend/src/controllers/eventController.js
backend/src/controllers/principalController.js
backend/src/middleware/auth.middleware.js
backend/src/models/Event.js
backend/src/models/Notification.js
backend/src/models/PrincipalRequest.js
backend/src/models/Team.js
backend/src/models/User.js
backend/src/package.json
backend/src/routes/auth.routes.js
backend/src/routes/college-admin.routes.js
backend/src/routes/event.routes.js
backend/src/routes/notification.routes.js
backend/src/routes/principal.routes.js
backend/src/routes/team.routes.js
backend/src/routes/user.routes.js
backend/src/scripts/seedAdminDB.js
backend/src/server.js
backend/src/utils/jwt.util.js
backend/src/utils/usnGrouping.js
frontend/frontend/.gitignore
frontend/frontend/eslint.config.js
frontend/frontend/index.html
frontend/frontend/package.json
frontend/frontend/public/vite.svg
frontend/frontend/README.md
frontend/frontend/src/App.css
frontend/frontend/src/App.jsx
frontend/frontend/src/components/EditEventModal.jsx
frontend/frontend/src/components/NotificationBell.jsx
frontend/frontend/src/components/ViewParticipantsModal.jsx
frontend/frontend/src/context/AuthContext.jsx
frontend/frontend/src/main.jsx
frontend/frontend/src/pages/AdminDashboardPage.jsx
frontend/frontend/src/pages/CollegeAdminDashboardPage.jsx
frontend/frontend/src/pages/CollegeAdminEventsPage.jsx
frontend/frontend/src/pages/CreateEventPage.jsx
frontend/frontend/src/pages/DashboardPage.jsx
frontend/frontend/src/pages/EventDetailPage.jsx
frontend/frontend/src/pages/EventsPage.jsx
frontend/frontend/src/pages/LoginPage.jsx
frontend/frontend/src/pages/PrincipalRegisterPage.jsx
frontend/frontend/src/pages/ProfilePage.jsx
frontend/frontend/src/pages/RegisterPage.jsx
frontend/frontend/src/pages/TeamPage.jsx
frontend/frontend/src/services/api.js
frontend/frontend/src/styles/AuthPages.css
frontend/frontend/src/styles/CollegeAdminDashboard.css
frontend/frontend/src/styles/CollegeAdminEventsStyles.css
frontend/frontend/src/styles/CreateEventPage.css
frontend/frontend/src/styles/DashboardPage.css
frontend/frontend/src/styles/EditEventModal.css
frontend/frontend/src/styles/EventDetailPage.css
frontend/frontend/src/styles/EventsPage.css
frontend/frontend/src/styles/NotificationBell.css
frontend/frontend/src/styles/ProfilePage.css
frontend/frontend/src/styles/TeamPage.css
frontend/frontend/src/styles/ViewParticipantsModal.css
frontend/frontend/vite.config.js
package.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="backend/package.json">
{
  "name": "backend",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "start": "node src/server.js",
    "dev": "nodemon src/server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": "",
  "dependencies": {
    "bcryptjs": "^3.0.3"
  }
}
</file>

<file path="backend/src/controllers/collegeAdminController.js">
// controllers/collegeAdminController.js
const User = require("../models/User");
// If you have an Event model, later you can:
// const Event = require("../models/Event");

// ================= GET OVERVIEW =================
// GET /api/college-admin/overview
exports.getOverview = async (req, res) => {
  try {
    const collegeAdminId = req.user._id;

    // Count students under this college admin
    const totalStudents = await User.countDocuments({
      principalId: collegeAdminId,
      role: "student",
    });

    // Count organizers under this college admin
    const totalOrganizers = await User.countDocuments({
      principalId: collegeAdminId,
      role: "organizer",
    });

    // For now, no Event model hooked ‚Üí keep 0
    const totalEvents = 0;
    const upcomingEvents = 0;

    return res.json({
      success: true,
      data: {
        totalStudents,
        totalOrganizers,
        totalEvents,
        upcomingEvents,
      },
    });
  } catch (err) {
    console.error("‚ùå getOverview error:", err);
    res.status(500).json({
      success: false,
      message: "Failed to load overview",
      error: err.message,
    });
  }
};

// ================= GET STUDENTS =================
// GET /api/college-admin/students
exports.getStudents = async (req, res) => {
  try {
    const collegeAdminId = req.user._id;

    const students = await User.find({
      principalId: collegeAdminId, // mapping student ‚Üí college admin
      role: "student",
    }).lean();

    res.json({ success: true, data: students });
  } catch (err) {
    console.error("‚ùå getStudents error:", err);
    res.status(500).json({
      success: false,
      message: "Failed to load students",
      error: err.message,
    });
  }
};

// ================= GET ORGANIZERS =================
// GET /api/college-admin/organizers
exports.getOrganizers = async (req, res) => {
  try {
    const collegeAdminId = req.user._id;

    const organizers = await User.find({
      principalId: collegeAdminId,
      role: "organizer",
    }).lean();

    res.json({ success: true, data: organizers });
  } catch (err) {
    console.error("‚ùå getOrganizers error:", err);
    res.status(500).json({
      success: false,
      message: "Failed to load organizers",
      error: err.message,
    });
  }
};

// ================= GET RECENT EVENTS =================
// GET /api/college-admin/recent-events
exports.getRecentEvents = async (req, res) => {
  try {
    // TODO: when you hook in Event model, fetch real data here
    return res.json({
      success: true,
      events: [],
    });
  } catch (err) {
    console.error("‚ùå getRecentEvents error:", err);
    res.status(500).json({
      success: false,
      message: "Failed to load recent events",
      error: err.message,
    });
  }
};

// ================= CREATE ORGANIZER =================
// POST /api/college-admin/organizers
exports.createOrganizer = async (req, res) => {
  try {
    const collegeAdminId = req.user._id;
    const { userId, clubName } = req.body;

    if (!userId) {
      return res.status(400).json({
        success: false,
        message: "userId is required",
      });
    }

    // Find user under this college admin (using principalId as link)
    const user = await User.findOne({
      _id: userId,
      principalId: collegeAdminId,
    });

    if (!user) {
      return res.status(404).json({
        success: false,
        message: "User not found under this college admin",
      });
    }

    // Promote to organizer
    user.role = "organizer";

    // If you later add clubName to schema, you can save it here.
    if (clubName) {
      console.log("Club name for organizer:", clubName);
      // e.g., user.clubName = clubName;
    }

    await user.save();

    res.status(200).json({
      success: true,
      message: "Organizer created successfully",
      data: user,
    });
  } catch (err) {
    console.error("‚ùå createOrganizer error:", err);
    res.status(500).json({
      success: false,
      message: "Failed to create organizer",
      error: err.message,
    });
  }
};

// ================= REMOVE ORGANIZER =================
// DELETE /api/college-admin/organizers/:organizerId
exports.removeOrganizer = async (req, res) => {
  try {
    const collegeAdminId = req.user._id;
    const { organizerId } = req.params;

    const user = await User.findOne({
      _id: organizerId,
      principalId: collegeAdminId,
      role: "organizer",
    });

    if (!user) {
      return res.status(404).json({
        success: false,
        message: "Organizer not found under this college admin",
      });
    }

    // Demote back to student
    user.role = "student";
    await user.save();

    res.status(200).json({
      success: true,
      message: "Organizer removed successfully",
    });
  } catch (err) {
    console.error("‚ùå removeOrganizer error:", err);
    res.status(500).json({
      success: false,
      message: "Failed to remove organizer",
      error: err.message,
    });
  }
};
</file>

<file path="backend/src/controllers/principalController.js">
// =====================================================
// PRINCIPAL REQUEST CONTROLLER (Admin Approval)
// =====================================================

// FILE: backend/src/controllers/principalRequestController.js

const bcrypt = require("bcryptjs");
const PrincipalRequest = require("../models/PrincipalRequest");
const User = require("../models/User");

const principalEmailRegex = /^.*principal.*@.+\.(edu|ac\.in)$/i;

// POST /api/principals/register (public)
exports.createRequest = async (req, res) => {
  try {
    const {
      name,
      mobile,
      collegeName,
      collegeCode,
      usnPrefix,
      email,
      password,
    } = req.body;

    if (
      !name ||
      !mobile ||
      !collegeName ||
      !collegeCode ||
      !usnPrefix ||
      !email ||
      !password
    ) {
      return res.status(400).json({
        success: false,
        message: "All fields are required",
      });
    }

    if (!principalEmailRegex.test(email)) {
      return res.status(400).json({
        success: false,
        message:
          "Email must contain 'principal' and end with .edu or .ac.in",
      });
    }

    const existsInUsers = await User.findOne({ email });
    const existsInRequests = await PrincipalRequest.findOne({
      email,
      status: "pending",
    });

    if (existsInUsers || existsInRequests) {
      return res.status(400).json({
        success: false,
        message: "Request already exists for this email",
      });
    }

    const request = await PrincipalRequest.create({
      name,
      mobile,
      collegeName,
      collegeCode,
      usnPrefix,
      email,
      password, // keep plain here; hash only when creating real user
    });

    res.status(201).json({
      success: true,
      data: request,
    });
  } catch (err) {
    res.status(500).json({
      success: false,
      message: err.message,
    });
  }
};

// GET /api/principals/requests (admin only)
exports.getPendingRequests = async (req, res) => {
  try {
    const requests = await PrincipalRequest.find({ status: "pending" }).sort({
      createdAt: -1,
    });
    res.json({
      success: true,
      data: requests,
    });
  } catch (err) {
    res.status(500).json({
      success: false,
      message: err.message,
    });
  }
};

// POST /api/principals/requests/:id/approve (admin)
exports.approveRequest = async (req, res) => {
  try {
    const request = await PrincipalRequest.findById(req.params.id);
    if (!request || request.status !== "pending") {
      return res.status(404).json({
        success: false,
        message: "Request not found or already processed",
      });
    }

    // ‚úÖ Create college admin user
    const user = await User.create({
      username: request.email.split("@")[0],
      email: request.email,
      password: request.password, // plain text; User pre-save hook will hash
      usn: request.usnPrefix, // Store USN prefix for principal
      collegeId: request.collegeCode,
      role: "collegeAdmin",
      profile: {
        fullName: request.name,
        department: request.collegeName,
        phone: request.mobile,
      },
      isActive: true,
    });

    console.log(
      `‚úÖ College Admin created: ${user.email} with id: ${user._id}`
    );

    // ‚úÖ Auto-assign this principal to students with matching USN prefix
    if (user.usn) {
      const updateResult = await User.updateMany(
        {
          role: "student",
          usn: { $regex: `^${user.usn}` }, // Match USN prefix
          principalId: null, // Only if not already assigned
        },
        { $set: { principalId: user._id } }
      );

      console.log(
        `‚úÖ Assigned ${updateResult.modifiedCount} students to principal ${user._id}`
      );
    }

    // ‚úÖ Update request status
    request.status = "approved";
    request.reviewedBy = req.user._id; // ‚úÖ FIXED: use _id not id
    request.reviewedAt = new Date();
    await request.save();

    res.json({
      success: true,
      message: "Principal approved and account created",
      user: {
        id: user._id,
        username: user.username,
        email: user.email,
        role: user.role,
        profile: user.profile,
      },
    });
  } catch (err) {
    console.error("Error approving request:", err);
    res.status(500).json({
      success: false,
      message: err.message,
    });
  }
};

// POST /api/principals/requests/:id/reject (admin)
exports.rejectRequest = async (req, res) => {
  try {
    const request = await PrincipalRequest.findById(req.params.id);
    if (!request || request.status !== "pending") {
      return res.status(404).json({
        success: false,
        message: "Request not found or already processed",
      });
    }

    request.status = "rejected";
    request.reviewedBy = req.user._id; // ‚úÖ FIXED: use _id not id
    request.reviewedAt = new Date();
    request.notes = req.body.notes || "";
    await request.save();

    res.json({
      success: true,
      message: "Request rejected",
    });
  } catch (err) {
    res.status(500).json({
      success: false,
      message: err.message,
    });
  }
};
</file>

<file path="backend/src/middleware/auth.middleware.js">
const jwt = require('jsonwebtoken');
const User = require('../models/User');

// Middleware to verify JWT token
exports.protect = async (req, res, next) => {
  let token;

  // Check if token is in Authorization header
  if (req.headers.authorization && req.headers.authorization.startsWith('Bearer')) {
    token = req.headers.authorization.split(' ')[1]; // Extract token after "Bearer "
  }

  // If no token, deny access
  if (!token) {
    return res.status(401).json({ 
      success: false,
      message: 'Not authorized to access this route' 
    });
  }

  try {
    // Verify token signature and expiration
    const decoded = jwt.verify(token, process.env.JWT_SECRET);

    // Attach user info to request object
    req.user = await User.findById(decoded.id).select('-password');


    if (!req.user) {
      return res.status(401).json({ 
        success: false,
        message: 'User not found' 
      });
    }

    if (!req.user.isActive) {
      return res.status(401).json({ 
        success: false,
        message: 'User account is deactivated' 
      });
    }

    next(); // Allow request to proceed
  } catch (error) {
    return res.status(401).json({ 
      success: false,
      message: 'Not authorized to access this route' 
    });
  }
};

// Middleware to check user role
exports.authorize = (...roles) => {
  return (req, res, next) => {
    if (!req.user) {
      return res.status(401).json({ 
        success: false,
        message: 'Authentication required' 
      });
    }

    if (!roles.includes(req.user.role)) {
      return res.status(403).json({ 
        success: false,
        message: `User role '${req.user.role}' is not authorized to access this route` 
      });
    }

    next(); // Allow request to proceed
  };
};
</file>

<file path="backend/src/models/Notification.js">
const mongoose = require('mongoose');  // ‚Üê ADD THIS LINE AT TOP

const notificationSchema = new mongoose.Schema(
  {
    userId: {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'User',
      required: true,
    },
    type: {
      type: String,
      enum: ['team_invite', 'event_update', 'announcement', 'result_published'],
      default: 'team_invite',
    },
    title: {
      type: String,
      required: true,
    },
    message: String,
    data: {
      teamId: mongoose.Schema.Types.ObjectId,
      eventId: mongoose.Schema.Types.ObjectId,
      invitedBy: mongoose.Schema.Types.ObjectId,
    },
    read: {
      type: Boolean,
      default: false,
    },
    actionRequired: {
      type: Boolean,
      default: false,
    },
    action: {
      type: String,
      enum: ['accept_invite', 'decline_invite', 'view_event', 'none'],
      default: 'none',
    },
  },
  { timestamps: true }
);

module.exports = mongoose.model('Notification', notificationSchema);
</file>

<file path="backend/src/models/PrincipalRequest.js">
const mongoose = require("mongoose");

const principalRequestSchema = new mongoose.Schema(
  {
    name: { type: String, required: true },
    mobile: { type: String, required: true },
    collegeName: { type: String, required: true },
    collegeCode: { type: String, required: true },
    usnPrefix: { type: String, required: true },  // NEW: e.g., "1SI", "2CS"
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true },
    status: {
      type: String,
      enum: ["pending", "approved", "rejected"],
      default: "pending",
    },
    reviewedBy: { type: mongoose.Schema.Types.ObjectId, ref: "User", default: null },
    reviewedAt: { type: Date, default: null },
    notes: { type: String, default: "" },
  },
  { timestamps: true }
);

module.exports = mongoose.model("PrincipalRequest", principalRequestSchema);
</file>

<file path="backend/src/models/Team.js">
const mongoose = require('mongoose');  // ‚Üê ADD THIS LINE AT TOP

const teamSchema = new mongoose.Schema(
  {
    name: {
      type: String,
      required: [true, 'Team name is required'],
      trim: true,
    },
    description: String,

    // Team membership
    leader: {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'User',
      required: true,
    },
    members: [
      {
        userId: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'User',
        },
        status: {
          type: String,
          enum: ['leader', 'accepted', 'pending'],
          default: 'pending',
        },
        joinedAt: {
          type: Date,
          default: Date.now,
        },
      },
    ],

    // Team constraints
    maxMembers: {
      type: Number,
      default: 5,
    },

    // Events
    registeredEvents: [
      {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'Event',
      },
    ],

    // In-app notifications
    invitations: [
      {
        userId: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'User',
        },
        status: {
          type: String,
          enum: ['pending', 'accepted', 'declined'],
          default: 'pending',
        },
        message: String,
        createdAt: {
          type: Date,
          default: Date.now,
        },
      },
    ],
  },
  { timestamps: true }
);

// Virtual for member count
teamSchema.virtual('memberCount').get(function () {
  return this.members?.filter((m) => m.status !== 'pending').length || 0;
});

module.exports = mongoose.model('Team', teamSchema);
</file>

<file path="backend/src/routes/auth.routes.js">
const express = require('express');
const router = express.Router();
const {
  register,
  login,
  getMe,
  logout
} = require('../controllers/authController');
const { protect } = require('../middleware/auth.middleware');

// Public routes (anyone can access)
router.post('/register', register);
router.post('/login', login);

// Private routes (need valid JWT token)
router.get('/me', protect, getMe);
router.post('/logout', protect, logout);

module.exports = router;
</file>

<file path="backend/src/routes/college-admin.routes.js">
// routes/college-admin.routes.js
const express = require("express");
const router = express.Router();
const { protect, authorize } = require("../middleware/auth.middleware");
const collegeAdminController = require("../controllers/collegeAdminController");
const User = require("../models/User");

// ‚úÖ All routes require college admin authentication
router.use(protect);
router.use(authorize("collegeAdmin"));

// Dashboard overview stats (only this college admin's data)
router.get("/overview", collegeAdminController.getOverview);

// Get students under this college admin
router.get("/students", collegeAdminController.getStudents);

// Get organizers under this college admin
router.get("/organizers", collegeAdminController.getOrganizers);

// Get recent events from organizers under this college admin
router.get("/recent-events", collegeAdminController.getRecentEvents);

// ‚úÖ Create organizer from student  (matches frontend POST /college-admin/organizers)
router.post("/organizers", collegeAdminController.createOrganizer);

// ‚úÖ Remove organizer (matches frontend DELETE /college-admin/organizers/:id)
router.delete("/organizers/:organizerId", collegeAdminController.removeOrganizer);

// ‚úÖ SEARCH USERS
router.get("/search", async (req, res) => {
  try {
    const { query } = req.query;

    if (!query || query.trim().length < 2) {
      return res.json({ success: true, data: [] });
    }

    const searchQuery = query.toLowerCase().trim();
    const collegeAdminId = req.user._id;

    console.log("üîç Searching for:", searchQuery);

    const users = await User.find({
      // assuming principalId links student ‚Üí college admin
      principalId: collegeAdminId,
      role: { $in: ["student", "organizer"] },
      $or: [
        { username: { $regex: searchQuery, $options: "i" } },
        { email: { $regex: searchQuery, $options: "i" } },
        { usn: { $regex: searchQuery, $options: "i" } },
        { "profile.fullName": { $regex: searchQuery, $options: "i" } },
      ],
    })
      .select("_id username email profile usn")
      .limit(10)
      .lean();

    console.log("‚úÖ Found users:", users.length);

    res.json({ success: true, data: users });
  } catch (err) {
    console.error("‚ùå Search error:", err);
    res.status(500).json({
      success: false,
      message: "Failed to search users",
      error: err.message,
    });
  }
});

module.exports = router;
</file>

<file path="backend/src/routes/notification.routes.js">
const express = require('express');
const router = express.Router();
const Notification = require('../models/Notification');
const { protect } = require('../middleware/auth.middleware');

// ============ GET MY NOTIFICATIONS ============
router.get('/', protect, async (req, res) => {
  try {
    const notifications = await Notification.find({ userId: req.user.id })
      .populate('data.invitedBy', 'username profile.fullName')
      .populate('data.teamId', 'name')
      .sort({ createdAt: -1 });

   // console.log('Fetched notifications:', notifications);

    res.json({
      success: true,
      data: notifications,
    });
  } catch (error) {
    console.error('Get notifications error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ MARK AS READ ============
router.put('/:notificationId/read', protect, async (req, res) => {
  try {
    const notification = await Notification.findByIdAndUpdate(
      req.params.notificationId,
      { read: true },
      { new: true }
    );

    if (!notification) {
      return res.status(404).json({
        success: false,
        message: 'Notification not found',
      });
    }

    console.log('Marked as read:', notification);

    res.json({
      success: true,
      data: notification,
    });
  } catch (error) {
    console.error('Mark read error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ DELETE NOTIFICATION ============
router.delete('/:notificationId', protect, async (req, res) => {
  try {
    console.log('Deleting notification:', req.params.notificationId);

    const notification = await Notification.findByIdAndDelete(
      req.params.notificationId
    );

    if (!notification) {
      return res.status(404).json({
        success: false,
        message: 'Notification not found',
      });
    }

    console.log('Deleted notification:', notification);

    res.json({
      success: true,
      message: 'Notification deleted',
      data: notification,
    });
  } catch (error) {
    console.error('Delete notification error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

module.exports = router;
</file>

<file path="backend/src/routes/principal.routes.js">
const express = require("express");
const router = express.Router();
const { protect, authorize } = require("../middleware/auth.middleware");
const {
  createRequest,
  getPendingRequests,
  approveRequest,
  rejectRequest,
} = require("../controllers/principalController");

// Public: principal registration form submits here
router.post("/register", createRequest);

// Admin-only: view and process requests
router.get("/requests", protect, authorize("admin"), getPendingRequests);
router.post("/requests/:id/approve", protect, authorize("admin"), approveRequest);
router.post("/requests/:id/reject", protect, authorize("admin"), rejectRequest);

module.exports = router;
</file>

<file path="backend/src/routes/team.routes.js">
const express = require('express');
const router = express.Router();
const Team = require('../models/Team');
const User = require('../models/User');
const { protect } = require('../middleware/auth.middleware');
const Notification = require('../models/Notification');

// ============ CREATE TEAM ============
router.post('/', protect, async (req, res) => {
  try {
    const { name, description, maxMembers } = req.body;

    if (!name) {
      return res.status(400).json({
        success: false,
        message: 'Team name is required',
      });
    }

    const team = new Team({
      name,
      description,
      maxMembers: maxMembers || 5,
      leader: req.user.id,
      members: [
        {
          userId: req.user.id,
          status: 'leader',
        },
      ],
    });

    await team.save();
    await team.populate('leader members.userId', 'username email profile.fullName');

    res.status(201).json({
      success: true,
      message: 'Team created successfully',
      data: team,
    });
  } catch (error) {
    console.error('Create team error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ GET MY TEAMS ============
router.get('/my-teams', protect, async (req, res) => {
  try {
    const teams = await Team.find({
      $or: [
        { leader: req.user.id },
        { 'members.userId': req.user.id },
      ],
    })
      .populate('leader', 'username email profile.fullName')
      .populate('members.userId', 'username email profile.fullName')
      .sort({ createdAt: -1 });

    res.json({
      success: true,
      data: teams,
    });
  } catch (error) {
    console.error('Get teams error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ GET TEAM DETAILS ============
router.get('/:teamId', protect, async (req, res) => {
  try {
    const team = await Team.findById(req.params.teamId)
      .populate('leader', 'username email profile.fullName')
      .populate('members.userId', 'username email profile.fullName')
      .populate('registeredEvents', 'title category');

    if (!team) {
      return res.status(404).json({
        success: false,
        message: 'Team not found',
      });
    }

    res.json({
      success: true,
      data: team,
    });
  } catch (error) {
    console.error('Get team error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ INVITE USER TO TEAM ============
router.post('/:teamId/invite', protect, async (req, res) => {
  try {
    const { userId, message } = req.body;
    const teamId = req.params.teamId;

    const team = await Team.findById(teamId);

    if (!team) {
      return res.status(404).json({
        success: false,
        message: 'Team not found',
      });
    }

    // Check if user is team leader
    if (team.leader.toString() !== req.user.id) {
      return res.status(403).json({
        success: false,
        message: 'Only team leader can invite members',
      });
    }

    // Check if user already in team
    const alreadyMember = team.members.some(
      (m) => m.userId.toString() === userId
    );
    if (alreadyMember) {
      return res.status(400).json({
        success: false,
        message: 'User is already in team',
      });
    }

    // Check team capacity
    const acceptedMembers = team.members.filter((m) => m.status !== 'pending');
    if (acceptedMembers.length >= team.maxMembers) {
      return res.status(400).json({
        success: false,
        message: 'Team is full',
      });
    }

    // Add to team with pending status
    team.members.push({
      userId,
      status: 'pending',
    });
    await team.save();

    // Create in-app notification
    const notification = new Notification({
      userId,
      type: 'team_invite',
      title: `Invited to join team "${team.name}"`,
      message: message || `${req.user.username} invited you to join their team`,
      data: {
        teamId,
        invitedBy: req.user.id,
      },
      actionRequired: true,
      action: 'accept_invite',
    });
    await notification.save();

    await team.populate('leader members.userId', 'username email profile.fullName');

    res.json({
      success: true,
      message: 'Invitation sent',
      data: team,
    });
  } catch (error) {
    console.error('Invite error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ RESPOND TO INVITE ============
router.post('/:teamId/invite/respond', protect, async (req, res) => {
  try {
    const { accept } = req.body;
    const teamId = req.params.teamId;

    const team = await Team.findById(teamId);
    if (!team) {
      return res.status(404).json({
        success: false,
        message: 'Team not found',
      });
    }

    const memberIndex = team.members.findIndex(
      (m) => m.userId.toString() === req.user.id && m.status === 'pending'
    );

    if (memberIndex === -1) {
      return res.status(400).json({
        success: false,
        message: 'No pending invite for you',
      });
    }

    if (accept) {
      team.members[memberIndex].status = 'accepted';
      await team.save();

      // Delete the notification from database
      const Notification = require('../models/Notification');
      const deleteResult = await Notification.findOneAndDelete({
        userId: req.user.id,
        'data.teamId': teamId,
        type: 'team_invite',
      });

      console.log('Notification deleted:', deleteResult);

      res.json({
        success: true,
        message: 'Joined team successfully',
        data: team,
      });
    } else {
      // Remove from team
      team.members.splice(memberIndex, 1);
      await team.save();

      // Delete the notification from database
      const Notification = require('../models/Notification');
      const deleteResult = await Notification.findOneAndDelete({
        userId: req.user.id,
        'data.teamId': teamId,
        type: 'team_invite',
      });

      console.log('Notification deleted:', deleteResult);

      res.json({
        success: true,
        message: 'Declined invite',
      });
    }
  } catch (error) {
    console.error('Respond invite error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ REMOVE MEMBER ============
router.post('/:teamId/remove-member', protect, async (req, res) => {
  try {
    const { userId } = req.body;
    const teamId = req.params.teamId;

    const team = await Team.findById(teamId);
    if (!team) {
      return res.status(404).json({
        success: false,
        message: 'Team not found',
      });
    }

    // Only leader can remove
    if (team.leader.toString() !== req.user.id) {
      return res.status(403).json({
        success: false,
        message: 'Only team leader can remove members',
      });
    }

    team.members = team.members.filter((m) => m.userId.toString() !== userId);
    await team.save();

    res.json({
      success: true,
      message: 'Member removed',
    });
  } catch (error) {
    console.error('Remove member error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ DELETE TEAM ============
router.delete('/:teamId', protect, async (req, res) => {
  try {
    const team = await Team.findById(req.params.teamId);

    if (!team) {
      return res.status(404).json({
        success: false,
        message: 'Team not found',
      });
    }

    if (team.leader.toString() !== req.user.id) {
      return res.status(403).json({
        success: false,
        message: 'Only team leader can delete team',
      });
    }

    await Team.findByIdAndDelete(req.params.teamId);

    res.json({
      success: true,
      message: 'Team deleted',
    });
  } catch (error) {
    console.error('Delete team error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

module.exports = router;
</file>

<file path="backend/src/routes/user.routes.js">
const express = require('express');
const router = express.Router();
const User = require('../models/User');
const { protect } = require('../middleware/auth.middleware');

// ============ SEARCH USER BY EMAIL (MUST BE BEFORE /:userId) ============
router.get('/search', protect, async (req, res) => {
  try {
    const { email } = req.query;

    if (!email) {
      return res.status(400).json({
        success: false,
        message: 'Email is required',
      });
    }

    const user = await User.findOne({ email: email.toLowerCase() })
      .select('_id username email profile.fullName');

    if (!user) {
      return res.status(404).json({
        success: false,
        message: 'User not found',
      });
    }

    res.json({
      success: true,
      data: user,
    });
  } catch (error) {
    console.error('Search user error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ GET /api/users/me - Get current user profile ============
router.get('/me', protect, async (req, res) => {
  try {
    const user = await User.findById(req.user.id)
      .populate('teams', 'name')
      .populate('teamInvites.teamId', 'name');

    if (!user) {
      return res.status(404).json({
        success: false,
        message: 'User not found',
      });
    }

    res.json({
      success: true,
      data: user,
    });
  } catch (error) {
    console.error('Get user error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ GET /api/users/me/stats - Get user statistics ============
router.get('/me/stats', protect, async (req, res) => {
  try {
    const userId = req.user.id;

    // Get all events
    const Event = require('../models/Event');
    const allEvents = await Event.find();

    // Count registered events
    const registeredCount = allEvents.filter((event) =>
      event.participants?.some((p) => p.toString() === userId)
    ).length;

    // Count organized events
    const organizedCount = allEvents.filter(
      (event) => event.organizerId?.toString() === userId
    ).length;

    // Count upcoming registered events
    const upcomingRegistered = allEvents.filter((event) => {
      const isRegistered = event.participants?.some((p) => p.toString() === userId);
      const isUpcoming = new Date(event.dates?.startDate) > new Date();
      return isRegistered && isUpcoming;
    }).length;

    // Placeholder for certificates (will be added later)
    const certificatesCount = 0;

    res.json({
      success: true,
      data: {
        registeredCount,
        organizedCount,
        upcomingRegistered,
        certificatesCount,
      },
    });
  } catch (error) {
    console.error('User stats error:', error);
    res.status(500).json({ 
      success: false, 
      message: 'Server error' 
    });
  }
});

// ============ PUT /api/users/me - Update current user ============
router.put('/me', protect, async (req, res) => {
  try {
    const allowedFields = [
      'profile.fullName',
      'profile.department',
      'profile.year',
      'profile.phone',
      'profile.avatar',
      'profile.bio',
      'profile.skills',
      'contactPreferences.preferredChannel',
      'contactPreferences.alternateEmail',
      'contactPreferences.whatsappNumber',
      'notificationSettings.email.registration',
      'notificationSettings.email.reminders',
      'notificationSettings.email.results',
      'notificationSettings.email.announcements',
      'notificationSettings.inApp.announcements',
      'notificationSettings.inApp.systemAlerts',
      'notificationSettings.inApp.results',
    ];

    const updates = {};
    Object.keys(req.body).forEach((key) => {
      if (allowedFields.includes(key)) {
        updates[key] = req.body[key];
      }
    });

    const user = await User.findByIdAndUpdate(
      req.user.id,
      { $set: updates },
      { new: true, runValidators: true }
    );

    res.json({
      success: true,
      message: 'Profile updated successfully',
      data: user,
    });
  } catch (error) {
    console.error('Update user error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ POST /api/users/change-password ============
router.post('/change-password', protect, async (req, res) => {
  try {
    const { oldPassword, newPassword } = req.body;

    if (!oldPassword || !newPassword) {
      return res.status(400).json({
        success: false,
        message: 'Old password and new password are required',
      });
    }

    if (newPassword.length < 6) {
      return res.status(400).json({
        success: false,
        message: 'New password must be at least 6 characters',
      });
    }

    // Get user with password field
    const user = await User.findById(req.user.id).select('+password');
    if (!user) {
      return res.status(404).json({
        success: false,
        message: 'User not found',
      });
    }

    // Check if old password matches
    const isMatch = await user.comparePassword(oldPassword);
    if (!isMatch) {
      return res.status(400).json({
        success: false,
        message: 'Old password is incorrect',
      });
    }

    // Update password
    user.password = newPassword;
    await user.save();

    return res.json({
      success: true,
      message: 'Password changed successfully',
    });
  } catch (error) {
    console.error('Change password error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ GET /api/users/:userId - Get user by ID (MUST BE LAST) ============
router.get('/:userId', protect, async (req, res) => {
  try {
    const user = await User.findById(req.params.userId)
      .select('-password');

    if (!user) {
      return res.status(404).json({
        success: false,
        message: 'User not found',
      });
    }

    res.json({
      success: true,
      data: user,
    });
  } catch (error) {
    console.error('Get user error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

module.exports = router;
</file>

<file path="backend/src/scripts/seedAdminDB.js">
// Admin User Seeding Script - WITH IPv4/IPv6 FIX
// Run this once with: node src/scripts/seedAdminDB.js

const mongoose = require("mongoose");
require("dotenv").config();

console.log("üîç DEBUG: Checking environment variables...");
console.log("MONGODB_URI:", process.env.MONGODB_URI ? "‚úì Set" : "‚úó NOT SET");
console.log(
  "NODE_ENV:",
  process.env.NODE_ENV || "not set (defaults to development)"
);

const User = require("../models/User");

async function seedAdminToDB() {
  try {
    // Use 127.0.0.1 instead of localhost to force IPv4
    const mongoUri =
      process.env.MONGODB_URI || "mongodb://127.0.0.1:27017/college-events";
    console.log("\nüì° Attempting MongoDB connection...");
    console.log("URI:", mongoUri);

    // Connect to MongoDB with timeout and IPv4 preference
    await mongoose.connect(mongoUri, {
      useNewUrlParser: true,
      useUnifiedTopology: true,
      connectTimeoutMS: 10000,
      serverSelectionTimeoutMS: 10000,
      family: 4, // Force IPv4 connection
    });

    console.log("‚úì Connected to MongoDB successfully!\n");

    // Check if admin already exists
    console.log("üîç Checking if admin already exists...");
    const existingAdmin = await User.findOne({
      email: "Adminclgevent@gmail.com",
    });

    if (existingAdmin) {
      console.log("\n‚ö†Ô∏è  Admin user already exists in database!");
      console.log("\nüìã Existing Admin Details:");
      console.log("‚îÄ".repeat(60));
      console.log(`  Email:    ${existingAdmin.email}`);
      console.log(`  Username: ${existingAdmin.username}`);
      console.log(`  Role:     ${existingAdmin.role}`);
      console.log(
        `  Status:   ${existingAdmin.isActive ? "Active" : "Inactive"}`
      );
      console.log("‚îÄ".repeat(60));
      console.log("\n‚úÖ Admin is ready to login!");
      console.log("\nTry logging in with:");
      console.log("  Email:    Adminclgevent@gmail.com");
      console.log("  Password: Admin@1031");
      await mongoose.connection.close();
      process.exit(0);
    }

    console.log("‚úì Admin does not exist, creating new admin...\n");

    // Create admin user - LET THE PRE-SAVE HOOK HASH THE PASSWORD
    console.log("üìù Creating admin user with:");
    console.log("   Email: Adminclgevent@gmail.com");
    console.log("   Role: admin");
    console.log("   (Password will be hashed by User model pre-save hook)\n");

    const admin = await User.create({
      username: "admin",
      email: "Adminclgevent@gmail.com",
      password: "Admin@1031", // Plain text - pre-save hook will hash it
      collegeId: "",
      role: "admin",
      profile: {
        fullName: "System Administrator",
        department: "Administration",
        phone: "+91-XXXX-XXXX",
        avatar: null,
        bio: "Super Admin - System Management",
      },
      contactPreferences: {
        preferredChannel: "email",
        alternateEmail: "",
        whatsappNumber: "",
      },
      notificationSettings: {
        email: {
          registration: true,
          reminders: true,
          results: true,
          announcements: true,
        },
        inApp: {
          announcements: true,
          systemAlerts: true,
          results: true,
        },
      },
      isActive: true,
      lastLogin: null,
      teams: [],
      teamInvites: [],
    });

    console.log("‚úì Admin user created successfully in MongoDB!");
    console.log("\nüìã Admin Credentials:");
    console.log("‚îÄ".repeat(60));
    console.log(`  Email:    Adminclgevent@gmail.com`);
    console.log(`  Password: Admin@1031`);
    console.log(`  Role:     admin`);
    console.log(`  Status:   Active`);
    console.log("‚îÄ".repeat(60));
    console.log("\n‚úÖ Password was hashed by User model pre-save hook");
    console.log("\nüîó Next Steps:");
    console.log("  1. Make sure backend is running: npm run dev");
    console.log("  2. Go to http://localhost:5173/login");
    console.log("  3. Enter Email: Adminclgevent@gmail.com");
    console.log("  4. Enter Password: Admin@1031");
    console.log("  5. Click Login");
    console.log("  6. You will be redirected to /admin-dashboard");
    console.log("\n‚ú® Setup Complete!\n");

    await mongoose.connection.close();
    process.exit(0);
  } catch (error) {
    console.error("\n‚úó Error:", error.message);

    if (error.message.includes("ECONNREFUSED")) {
      console.error("\n‚ö†Ô∏è  Connection refused! MongoDB might not be running.");
      console.error("\nFix: Start MongoDB with:");
      console.error("  mongod --dbpath C:\\data\\db");
      console.error("\nThen try this script again in a new PowerShell window.");
    } else {
      console.error("\nPossible causes:");
      console.error("  1. MongoDB is not running");
      console.error("  2. Connection string is incorrect in .env file");
      console.error("  3. Network/firewall issue");
      console.error("\nDebug info:");
      console.error("  MONGODB_URI:", process.env.MONGODB_URI);
      console.error("  Full error:", error);
    }

    process.exit(1);
  }
}

// Run the seeding function
console.log("");
seedAdminToDB();
</file>

<file path="backend/src/utils/jwt.util.js">
const jwt = require('jsonwebtoken');

// Generate JWT token
exports.generateToken = (userId) => {
  return jwt.sign(
    { id: userId }, // Payload: what data goes in the token
    process.env.JWT_SECRET, // Secret key to sign the token
    { expiresIn: process.env.JWT_EXPIRE || '7d' } // Token expires in 7 days
  );
};

// Send token response (used after login/register)
exports.sendTokenResponse = (user, statusCode, res) => {
  const token = this.generateToken(user._id);

  // Send token and user info as JSON response
  res.status(statusCode).json({
    success: true,
    token,
    user: {
      id: user._id,
      username: user.username,
      email: user.email,
      role: user.role,
      profile: user.profile
    }
  });
};
</file>

<file path="backend/src/utils/usnGrouping.js">
const User = require("../models/User");

exports.findPrincipalByUSN = async (usn) => {
  if (!usn) return null;

  // Find all principals with matching prefixes
  const principals = await User.find({ 
    role: "collegeAdmin",
    isActive: true,
    usn: { $exists: true, $ne: null }
  });

  for (const principal of principals) {
    if (usn.startsWith(principal.usn)) {
      return principal;  // Found matching principal
    }
  }

  return null;  // No principal found, but that's OK
};

module.exports = exports;
</file>

<file path="frontend/frontend/eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])
</file>

<file path="frontend/frontend/index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
</file>

<file path="frontend/frontend/package.json">
{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/react": "^19.2.2",
    "@types/react-dom": "^19.2.2",
    "@vitejs/plugin-react": "^5.1.0",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "vite": "^7.2.2"
  }
}
</file>

<file path="frontend/frontend/public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="frontend/frontend/README.md">
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.
</file>

<file path="frontend/frontend/src/components/EditEventModal.jsx">
import { useState, useEffect } from "react";
import axios from "axios";
import "../styles/EditEventModal.css";

const API_BASE_URL = "http://localhost:5000/api";

export default function EditEventModal({ event, token, onClose, onSuccess }) {
  const [formData, setFormData] = useState({
    title: "",
    description: "",
    category: "",
    startDate: "",
    endDate: "",
    venue: "",
    city: "",
    maxParticipants: 100,
  });

  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");

  // Initialize form with event data
  useEffect(() => {
    if (event) {
      console.log("üìù Editing event:", event);

      // Handle different date formats
      let startDateStr = "";
      let endDateStr = "";

      if (event.startDate) {
        startDateStr = event.startDate.split("T")[0];
      } else if (event.dates?.startDate) {
        startDateStr = new Date(event.dates.startDate)
          .toISOString()
          .split("T")[0];
      }

      if (event.endDate) {
        endDateStr = event.endDate.split("T")[0];
      } else if (event.dates?.endDate) {
        endDateStr = new Date(event.dates.endDate).toISOString().split("T")[0];
      }

      setFormData({
        title: event.title || "",
        description: event.description || "",
        category: event.category || "WORKSHOP",
        startDate: startDateStr,
        endDate: endDateStr,
        venue: event.venue || event.location?.venue || "",
        city: event.city || event.location?.city || "",
        maxParticipants: event.maxParticipants || 100,
      });

      console.log("‚úÖ Form initialized:", {
        startDate: startDateStr,
        endDate: endDateStr,
        venue: event.venue || event.location?.venue || "",
      });
    }
  }, [event]);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value,
    }));
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError("");

    // Validation
    if (!formData.title || !formData.description || !formData.venue) {
      setError("Please fill in all required fields");
      setLoading(false);
      return;
    }

    if (new Date(formData.startDate) >= new Date(formData.endDate)) {
      setError("End date must be after start date");
      setLoading(false);
      return;
    }

    try {
      console.log("üì§ Updating event with data:", formData);

      const response = await axios.put(
        `${API_BASE_URL}/events/${event._id}`,
        formData,
        {
          headers: { Authorization: `Bearer ${token}` },
        }
      );

      if (response.data.success) {
        console.log("‚úÖ Event updated successfully");
        alert("‚úÖ Event updated successfully!");
        onSuccess(); // Refresh the dashboard
        onClose(); // Close the modal
      }
    } catch (err) {
      console.error("‚ùå Error updating event:", err);
      const errorMsg = err.response?.data?.message || "Failed to update event";
      setError(errorMsg);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="modal-overlay" onClick={onClose}>
      <div className="modal-content" onClick={(e) => e.stopPropagation()}>
        <div className="modal-header">
          <h2>‚úèÔ∏è Edit Event</h2>
          <button className="modal-close" onClick={onClose} type="button">
            ‚úï
          </button>
        </div>

        {error && <div className="error-message">‚ö†Ô∏è {error}</div>}

        <form onSubmit={handleSubmit}>
          {/* Title */}
          <div className="form-group">
            <label htmlFor="title">Event Title *</label>
            <input
              id="title"
              type="text"
              name="title"
              value={formData.title}
              onChange={handleChange}
              placeholder="Enter event title"
              required
            />
          </div>

          {/* Description */}
          <div className="form-group">
            <label htmlFor="description">Description *</label>
            <textarea
              id="description"
              name="description"
              value={formData.description}
              onChange={handleChange}
              placeholder="Enter event description"
              rows="4"
              required
            ></textarea>
          </div>

          {/* Category & Max Participants */}
          <div className="form-row">
            <div className="form-group">
              <label htmlFor="category">Category *</label>
              <select
                id="category"
                name="category"
                value={formData.category}
                onChange={handleChange}
                required
              >
                <option value="workshop">Workshop</option>
                <option value="hackathon">Hackathon</option>
                <option value="seminar">Seminar</option>
                <option value="conference">Conference</option>
                <option value="meetup">Meetup</option>
              </select>
            </div>

            <div className="form-group">
              <label htmlFor="maxParticipants">Max Participants *</label>
              <input
                id="maxParticipants"
                type="number"
                name="maxParticipants"
                value={formData.maxParticipants}
                onChange={handleChange}
                min="1"
                required
              />
            </div>
          </div>

          {/* Start Date & End Date */}
          <div className="form-row">
            <div className="form-group">
              <label htmlFor="startDate">Start Date *</label>
              <input
                id="startDate"
                type="date"
                name="startDate"
                value={formData.startDate}
                onChange={handleChange}
                required
              />
            </div>

            <div className="form-group">
              <label htmlFor="endDate">End Date *</label>
              <input
                id="endDate"
                type="date"
                name="endDate"
                value={formData.endDate}
                onChange={handleChange}
                required
              />
            </div>
          </div>

          {/* Venue & City */}
          <div className="form-row">
            <div className="form-group">
              <label htmlFor="venue">Venue *</label>
              <input
                id="venue"
                type="text"
                name="venue"
                value={formData.venue}
                onChange={handleChange}
                placeholder="e.g., Auditorium, Lab 2, etc."
                required
              />
            </div>

            <div className="form-group">
              <label htmlFor="city">City *</label>
              <input
                id="city"
                type="text"
                name="city"
                value={formData.city}
                onChange={handleChange}
                placeholder="e.g., Bengaluru"
                required
              />
            </div>
          </div>

          {/* Action Buttons */}
          <div className="modal-actions">
            <button type="button" className="btn-cancel" onClick={onClose}>
              Cancel
            </button>
            <button type="submit" className="btn-save" disabled={loading}>
              {loading ? "üíæ Saving..." : "‚úÖ Save Changes"}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/components/NotificationBell.jsx">
import { useEffect, useState } from 'react';
import axios from 'axios';
import { useAuth } from '../context/AuthContext';
import '../styles/NotificationBell.css';

const API_BASE_URL = 'http://localhost:5000/api';

export default function NotificationBell() {
  const { token } = useAuth();
  const [notifications, setNotifications] = useState([]);
  const [showDropdown, setShowDropdown] = useState(false);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    if (token) {
      fetchNotifications();
      const interval = setInterval(fetchNotifications, 10000);
      return () => clearInterval(interval);
    }
  }, [token]);

  const fetchNotifications = async () => {
    try {
      const res = await axios.get(`${API_BASE_URL}/notifications`, {
        headers: { Authorization: `Bearer ${token}` },
      });
      //console.log('‚úÖ Fetched notifications:', res.data.data);
      setNotifications(res.data.data || []);
    } catch (err) {
      console.error('‚ùå Error fetching notifications', err);
    }
  };

  const handleAcceptTeamInvite = async (notificationId, teamId) => {
    try {
      setLoading(true);
      console.log('üì§ Accepting invite for team:', teamId);

      await axios.post(
        `${API_BASE_URL}/teams/${teamId}/invite/respond`,
        { accept: true },
        { headers: { Authorization: `Bearer ${token}` } }
      );

      console.log('‚úÖ Invitation accepted, refreshing notifications...');

      // Immediately refresh the notifications list
      await fetchNotifications();

      alert('‚úÖ Joined team successfully!');
      
      // Close dropdown
      setTimeout(() => {
        setShowDropdown(false);
      }, 500);
    } catch (err) {
      console.error('‚ùå Accept error:', err);
      alert('‚ùå ' + (err.response?.data?.message || 'Failed to join team'));
    } finally {
      setLoading(false);
    }
  };

  const handleDeclineTeamInvite = async (notificationId, teamId) => {
    try {
      setLoading(true);
      console.log('üì§ Declining invite for team:', teamId);

      await axios.post(
        `${API_BASE_URL}/teams/${teamId}/invite/respond`,
        { accept: false },
        { headers: { Authorization: `Bearer ${token}` } }
      );

      console.log('‚úÖ Invitation declined, refreshing notifications...');

      // Immediately refresh the notifications list
      await fetchNotifications();

      alert('‚úÖ Declined invite');

      // Close dropdown
      setTimeout(() => {
        setShowDropdown(false);
      }, 500);
    } catch (err) {
      console.error('‚ùå Decline error:', err);
      alert('‚ùå ' + (err.response?.data?.message || 'Failed to decline'));
    } finally {
      setLoading(false);
    }
  };

  const handleDismiss = async (notificationId) => {
    try {
      console.log('üóëÔ∏è Dismissing notification:', notificationId);

      await axios.delete(
        `${API_BASE_URL}/notifications/${notificationId}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );

      console.log('‚úÖ Notification dismissed, refreshing list...');

      // Immediately refresh the notifications list
      await fetchNotifications();
    } catch (err) {
      console.error('‚ùå Error dismissing notification', err);
      alert('Failed to dismiss notification');
    }
  };

  const unreadCount = notifications.filter((n) => !n.read).length;

  return (
    <div className="notification-bell">
      <button
        className="bell-btn"
        onClick={() => setShowDropdown(!showDropdown)}
        title={`${notifications.length} notification${notifications.length !== 1 ? 's' : ''}`}
      >
        üîî
        {unreadCount > 0 && <span className="badge">{unreadCount}</span>}
      </button>

      {showDropdown && (
        <div className="notification-dropdown">
          <div className="dropdown-header">
            <h3>Notifications ({notifications.length})</h3>
            <button
              className="close-btn"
              onClick={() => setShowDropdown(false)}
            >
              ‚úï
            </button>
          </div>

          <div className="notifications-list">
            {notifications.length === 0 ? (
              <div className="empty-notif">üì≠ No notifications yet</div>
            ) : (
              notifications.map((notif) => (
                <div
                  key={notif._id}
                  className={`notification-item ${notif.read ? 'read' : 'unread'}`}
                >
                  <div className="notif-content">
                    <div className="notif-header">
                      <h4>{notif.title}</h4>
                      {notif.type === 'team_invite' && (
                        <span className="notif-badge">Team Invite</span>
                      )}
                    </div>
                    <p>{notif.message}</p>
                    <small>{new Date(notif.createdAt).toLocaleDateString()}</small>
                  </div>

                  <div className="notif-action-bar">
                    {notif.type === 'team_invite' ? (
                      <div className="action-buttons">
                        <button
                          className="btn-action btn-accept"
                          onClick={() =>
                            handleAcceptTeamInvite(notif._id, notif.data?.teamId)
                          }
                          disabled={loading}
                        >
                          {loading ? '‚è≥ ...' : '‚úì Accept'}
                        </button>
                        <button
                          className="btn-action btn-decline"
                          onClick={() =>
                            handleDeclineTeamInvite(notif._id, notif.data?.teamId)
                          }
                          disabled={loading}
                        >
                          {loading ? '‚è≥ ...' : '‚úï Decline'}
                        </button>
                      </div>
                    ) : (
                      <button
                        className="btn-action btn-dismiss"
                        onClick={() => handleDismiss(notif._id)}
                        disabled={loading}
                      >
                        Dismiss
                      </button>
                    )}
                  </div>
                </div>
              ))
            )}
          </div>
        </div>
      )}
    </div>
  );
}
</file>

<file path="frontend/frontend/src/main.jsx">
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
</file>

<file path="frontend/frontend/src/pages/AdminDashboardPage.jsx">
import { useEffect, useState } from "react";
import { principalAPI } from "../services/api";
import { useAuth } from "../context/AuthContext";

export default function AdminDashboardPage() {
  const { user } = useAuth();
  const [requests, setRequests] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");

  const loadRequests = async () => {
    try {
      setLoading(true);
      setError("");
      const res = await principalAPI.getRequests();
      setRequests(res.data.data || []);
    } catch (err) {
      setError(err.response?.data?.message || "Failed to load requests");
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    loadRequests();
  }, []);

  const handleApprove = async (id) => {
    try {
      await principalAPI.approve(id);
      await loadRequests();
      alert("Principal approved and account created");
    } catch (err) {
      alert(err.response?.data?.message || "Approval failed");
    }
  };

  const handleReject = async (id) => {
    const notes = prompt("Reason for rejection (optional):") || "";
    try {
      await principalAPI.reject(id, notes);
      await loadRequests();
    } catch (err) {
      alert(err.response?.data?.message || "Rejection failed");
    }
  };

  return (
    <div style={{ padding: "24px" }}>
      <h1>Admin Dashboard</h1>
      <p>Welcome, {user?.profile?.fullName || user?.username}</p>

      <h2 style={{ marginTop: "24px" }}>Pending Principal Requests</h2>
      {error && <div className="error-message">{error}</div>}
      {loading ? (
        <p>Loading...</p>
      ) : requests.length === 0 ? (
        <p>No pending requests.</p>
      ) : (
        <table className="requests-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>College</th>
              <th>College Code</th>
              <th>Email</th>
              <th>Mobile</th>
              <th>Submitted At</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {requests.map((r) => (
              <tr key={r._id}>
                <td>{r.name}</td>
                <td>{r.collegeName}</td>
                <td>{r.collegeCode}</td>
                <td>{r.email}</td>
                <td>{r.mobile}</td>
                <td>{new Date(r.createdAt).toLocaleString()}</td>
                <td>
                  <button onClick={() => handleApprove(r._id)}>Approve</button>
                  <button
                    onClick={() => handleReject(r._id)}
                    style={{ marginLeft: 8 }}
                  >
                    Reject
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      )}
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/CollegeAdminDashboardPage.jsx">
import { useEffect, useState } from "react";
import { useAuth } from "../context/AuthContext";
import API from "../services/api";
import "../styles/CollegeAdminDashboard.css";

export default function CollegeAdminDashboardPage({ setCurrentPage }) {
  const { user } = useAuth();
  const [students, setStudents] = useState([]);
  const [filteredStudents, setFilteredStudents] = useState([]);
  const [organizers, setOrganizers] = useState([]);
  const [filteredOrganizers, setFilteredOrganizers] = useState([]);
  const [recentEvents, setRecentEvents] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");
  const [success, setSuccess] = useState("");
  const [activeTab, setActiveTab] = useState("overview");
  const [searchStudents, setSearchStudents] = useState("");
  const [searchOrganizers, setSearchOrganizers] = useState("");
  const [stats, setStats] = useState({
    totalStudents: 0,
    totalOrganizers: 0,
    totalEvents: 0,
    upcomingEvents: 0,
  });

  // ‚úÖ ORGANIZER CREATION WITH SEARCH (ENDPOINT FIXED)
  const [showOrganizerModal, setShowOrganizerModal] = useState(false);
  const [userSearchQuery, setUserSearchQuery] = useState("");
  const [userSearchResults, setUserSearchResults] = useState([]);
  const [selectedUser, setSelectedUser] = useState(null);
  const [clubName, setClubName] = useState("");
  const [searchingUsers, setSearchingUsers] = useState(false);

  // Load all data on mount
  useEffect(() => {
    loadDashboardData();
  }, []);

  // Filter students when search changes
  useEffect(() => {
    filterStudents();
  }, [students, searchStudents]);

  // Filter organizers when search changes
  useEffect(() => {
    filterOrganizers();
  }, [organizers, searchOrganizers]);

  // ‚úÖ LOAD ALL DASHBOARD DATA
  const loadDashboardData = async () => {
    try {
      setLoading(true);
      setError("");

      // Load students
      const studentsRes = await API.get("/college-admin/students");
      if (studentsRes.data?.data) {
        setStudents(studentsRes.data.data);
      }

      // Load organizers
      const organizersRes = await API.get("/college-admin/organizers");
      if (organizersRes.data?.data) {
        setOrganizers(organizersRes.data.data);
      }

      // Load recent events
      const eventsRes = await API.get("/college-admin/recent-events");
      if (eventsRes.data?.events) {
        setRecentEvents(eventsRes.data.events.slice(0, 5));
      }

      // Calculate stats
      if (studentsRes.data?.data && organizersRes.data?.data && eventsRes.data?.events) {
        const upcomingCount = eventsRes.data.events.filter(
          (e) => new Date(e.dates?.startDate) > new Date()
        ).length;

        setStats({
          totalStudents: studentsRes.data.data.length,
          totalOrganizers: organizersRes.data.data.length,
          totalEvents: eventsRes.data.events.length,
          upcomingEvents: upcomingCount,
        });
      }
    } catch (err) {
      setError(err.response?.data?.message || "Failed to load dashboard data");
    } finally {
      setLoading(false);
    }
  };

  // ‚úÖ FILTER STUDENTS
  const filterStudents = () => {
    if (searchStudents.trim() === "") {
      setFilteredStudents(students);
      return;
    }

    const query = searchStudents.toLowerCase();
    const filtered = students.filter(
      (s) =>
        s.profile?.fullName?.toLowerCase().includes(query) ||
        s.email?.toLowerCase().includes(query) ||
        s.usn?.toLowerCase().includes(query) ||
        s.username?.toLowerCase().includes(query)
    );
    setFilteredStudents(filtered);
  };

  // ‚úÖ FILTER ORGANIZERS
  const filterOrganizers = () => {
    if (searchOrganizers.trim() === "") {
      setFilteredOrganizers(organizers);
      return;
    }

    const query = searchOrganizers.toLowerCase();
    const filtered = organizers.filter(
      (o) =>
        o.profile?.fullName?.toLowerCase().includes(query) ||
        o.email?.toLowerCase().includes(query) ||
        o.clubName?.toLowerCase().includes(query) ||
        o.username?.toLowerCase().includes(query)
    );
    setFilteredOrganizers(filtered);
  };

  // ‚úÖ SEARCH USERS FOR ORGANIZER ASSIGNMENT (ENDPOINT FIXED)
  const handleSearchUsers = async (query) => {
    setUserSearchQuery(query);

    // If query is less than 2 chars, clear results
    if (!query || query.trim().length < 2) {
      setUserSearchResults([]);
      return;
    }

    try {
      setSearchingUsers(true);
      console.log("üîç Searching for:", query);

      // ‚úÖ FIXED: Use /college-admin/search endpoint
      const res = await API.get(`/college-admin/search`, {
        params: { query: query.trim() }
      });

      console.log("‚úÖ Search results:", res.data);

      if (res.data?.data && Array.isArray(res.data.data)) {
        // Filter out already existing organizers
        const existingOrgIds = organizers.map((o) => o._id);
        const available = res.data.data.filter(
          (u) => !existingOrgIds.includes(u._id)
        );
        
        console.log("üìã Available users:", available);
        setUserSearchResults(available.slice(0, 10)); // Max 10 results
      } else {
        setUserSearchResults([]);
      }
    } catch (err) {
      console.error("‚ùå Search error:", err);
      console.error("Error details:", err.response?.data);
      setError("Failed to search users: " + (err.response?.data?.message || err.message));
      setUserSearchResults([]);
      setTimeout(() => setError(""), 3000);
    } finally {
      setSearchingUsers(false);
    }
  };

  // ‚úÖ SELECT USER AS ORGANIZER
  const handleSelectUser = (user) => {
    console.log("‚úì Selected user:", user);
    setSelectedUser(user);
    setUserSearchQuery("");
    setUserSearchResults([]);
  };

  // ‚úÖ CREATE ORGANIZER FROM SELECTED USER
  const handleCreateOrganizer = async (e) => {
    e.preventDefault();

    if (!selectedUser) {
      setError("Please select a user first");
      setTimeout(() => setError(""), 3000);
      return;
    }

    try {
      setLoading(true);
      setError("");

      console.log("üì§ Creating organizer:", {
        userId: selectedUser._id,
        clubName: clubName.trim() || null
      });

      const res = await API.post("/college-admin/organizers", {
        userId: selectedUser._id,
        clubName: clubName.trim() || null
      });

      console.log("‚úÖ Organizer created:", res.data);

      setSuccess("Organizer created successfully!");
      setShowOrganizerModal(false);
      setSelectedUser(null);
      setClubName("");
      setUserSearchQuery("");
      loadDashboardData();

      setTimeout(() => setSuccess(""), 3000);
    } catch (err) {
      console.error("‚ùå Error creating organizer:", err);
      const errorMsg =
        err.response?.data?.message || "Failed to create organizer";
      setError(errorMsg);
      setTimeout(() => setError(""), 3000);
    } finally {
      setLoading(false);
    }
  };

  // ‚úÖ REMOVE ORGANIZER
  const handleRemoveOrganizer = async (organizerId) => {
    if (
      !window.confirm(
        "Are you sure you want to remove this organizer? They will no longer be able to create events."
      )
    ) {
      return;
    }

    try {
      setLoading(true);
      await API.delete(`/college-admin/organizers/${organizerId}`);
      setSuccess("Organizer removed successfully!");
      loadDashboardData();
      setTimeout(() => setSuccess(""), 3000);
    } catch (err) {
      setError(err.response?.data?.message || "Failed to remove organizer");
      setTimeout(() => setError(""), 3000);
    } finally {
      setLoading(false);
    }
  };

  // ‚úÖ CLOSE MODAL
  const handleCloseOrganizerModal = () => {
    setShowOrganizerModal(false);
    setSelectedUser(null);
    setClubName("");
    setUserSearchQuery("");
    setUserSearchResults([]);
  };

  if (!user || user.role !== "collegeAdmin") {
    return (
      <div className="college-admin-dashboard">
        <div className="error-container">
          <h1>‚õî Access Denied</h1>
          <p>You do not have permission to view this page.</p>
        </div>
      </div>
    );
  }

  return (
    <div className="college-admin-dashboard">
      {/* Header */}
      <div className="dashboard-header">
        <div className="header-content">
          <h1>üè´ College Admin Dashboard</h1>
          <p className="welcome-text">
            Welcome, {user?.profile?.fullName || user?.username}
          </p>
        </div>
      </div>

      {/* Alerts */}
      {error && (
        <div className="alert alert-error">
          <span>‚ùå</span> {error}
          <button onClick={() => setError("")} className="alert-close">
            &times;
          </button>
        </div>
      )}
      {success && (
        <div className="alert alert-success">
          <span>‚úÖ</span> {success}
          <button onClick={() => setSuccess("")} className="alert-close">
            &times;
          </button>
        </div>
      )}

      {/* Tabs Navigation */}
      <div className="tabs-navigation">
        <button
          className={`tab-btn ${activeTab === "overview" ? "active" : ""}`}
          onClick={() => {
            setActiveTab("overview");
            setSearchStudents("");
            setSearchOrganizers("");
          }}
        >
          üìä Overview
        </button>
        <button
          className={`tab-btn ${activeTab === "students" ? "active" : ""}`}
          onClick={() => {
            setActiveTab("students");
            setSearchStudents("");
          }}
        >
          üë®‚Äçüéì Students ({students.length})
        </button>
        <button
          className={`tab-btn ${activeTab === "organizers" ? "active" : ""}`}
          onClick={() => {
            setActiveTab("organizers");
            setSearchOrganizers("");
          }}
        >
          üë• Organizers ({organizers.length})
        </button>
      </div>

      {loading && activeTab === "overview" ? (
        <div className="loading-container">
          <div className="spinner"></div>
          <p>Loading dashboard...</p>
        </div>
      ) : (
        <>
          {/* TAB 1: OVERVIEW */}
          {activeTab === "overview" && (
            <div className="dashboard-content">
              {/* STATS CARDS */}
              <div className="stats-grid">
                <div className="stat-card">
                  <div className="stat-icon">üë®‚Äçüéì</div>
                  <div className="stat-info">
                    <p className="stat-label">Total Students</p>
                    <p className="stat-value">{stats.totalStudents}</p>
                  </div>
                </div>

                <div className="stat-card">
                  <div className="stat-icon">üë•</div>
                  <div className="stat-info">
                    <p className="stat-label">Total Organizers</p>
                    <p className="stat-value">{stats.totalOrganizers}</p>
                  </div>
                </div>

                <div className="stat-card">
                  <div className="stat-icon">üìÖ</div>
                  <div className="stat-info">
                    <p className="stat-label">Total Events</p>
                    <p className="stat-value">{stats.totalEvents}</p>
                  </div>
                </div>

                <div className="stat-card">
                  <div className="stat-icon">‚è≥</div>
                  <div className="stat-info">
                    <p className="stat-label">Upcoming Events</p>
                    <p className="stat-value">{stats.upcomingEvents}</p>
                  </div>
                </div>
              </div>

              {/* RECENT EVENTS */}
              <div className="section">
                <h2>üìã Recent Events</h2>
                {recentEvents.length === 0 ? (
                  <div className="empty-state">
                    <p>No events yet</p>
                  </div>
                ) : (
                  <div className="events-list">
                    {recentEvents.map((event) => (
                      <div key={event._id} className="event-item">
                        <div className="event-info">
                          <h4 className="event-title">{event.title}</h4>
                          <p className="event-organizer">
                            By {event.organizerId?.clubName || event.organizerId?.username}
                          </p>
                          <p className="event-date">
                            {new Date(event.dates?.startDate).toLocaleDateString()}
                          </p>
                        </div>
                        <div className="event-stat">
                          <span className="registration-badge">
                            {event.participantsCount || 0} registrations
                          </span>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* TAB 2: STUDENTS */}
          {activeTab === "students" && (
            <div className="admin-section">
              <div className="section-header">
                <h2>üë®‚Äçüéì Students</h2>
                <div className="header-stats">
                  <span className="stat">
                    Total: <strong>{students.length}</strong>
                  </span>
                </div>
              </div>

              {/* Search Box */}
              <div className="filters-container">
                <div className="search-box">
                  <input
                    type="text"
                    placeholder="üîç Search by name, email, USN, or username..."
                    value={searchStudents}
                    onChange={(e) => setSearchStudents(e.target.value)}
                    className="search-input"
                    autoComplete="off"
                  />
                  {searchStudents && (
                    <button
                      className="clear-btn"
                      onClick={() => setSearchStudents("")}
                    >
                      ‚úï
                    </button>
                  )}
                </div>
              </div>

              {/* Students Grid */}
              {loading ? (
                <div className="loading-container">
                  <div className="spinner"></div>
                  <p>Loading...</p>
                </div>
              ) : filteredStudents.length === 0 ? (
                <div className="empty-state">
                  <p className="empty-icon">üë®‚Äçüéì</p>
                  <p className="empty-message">
                    {searchStudents ? "No students found matching your search" : "No students"}
                  </p>
                </div>
              ) : (
                <div className="students-grid">
                  {filteredStudents.map((student) => (
                    <div key={student._id} className="student-card">
                      <div className="card-header">
                        <h3 className="student-name">
                          {student.profile?.fullName || student.username}
                        </h3>
                      </div>

                      <div className="card-body">
                        <div className="info-item">
                          <span className="info-label">üìß Email:</span>
                          <span className="info-value">{student.email}</span>
                        </div>

                        <div className="info-item">
                          <span className="info-label">üéì USN:</span>
                          <span className="info-value">{student.usn || "-"}</span>
                        </div>

                        <div className="info-item">
                          <span className="info-label">üë§ Username:</span>
                          <span className="info-value">{student.username}</span>
                        </div>

                        <div className="info-item">
                          <span className="info-label">üì± Phone:</span>
                          <span className="info-value">
                            {student.profile?.phone || "-"}
                          </span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          )}

          {/* TAB 3: ORGANIZERS */}
          {activeTab === "organizers" && (
            <div className="admin-section">
              <div className="section-header">
                <h2>üë• Organizers Management</h2>
                <div className="header-stats">
                  <span className="stat">
                    Total: <strong>{organizers.length}</strong>
                  </span>
                </div>
              </div>

              {/* Add Organizer Button */}
              <div className="organizers-toolbar">
                <button
                  className="btn btn-primary"
                  onClick={() => setShowOrganizerModal(true)}
                >
                  ‚ûï Add Organizer
                </button>
              </div>

              {/* Search Box */}
              <div className="filters-container">
                <div className="search-box">
                  <input
                    type="text"
                    placeholder="üîç Search by name, email, club, or username..."
                    value={searchOrganizers}
                    onChange={(e) => setSearchOrganizers(e.target.value)}
                    className="search-input"
                    autoComplete="off"
                  />
                  {searchOrganizers && (
                    <button
                      className="clear-btn"
                      onClick={() => setSearchOrganizers("")}
                    >
                      ‚úï
                    </button>
                  )}
                </div>
              </div>

              {/* Organizers Grid */}
              {loading ? (
                <div className="loading-container">
                  <div className="spinner"></div>
                  <p>Loading...</p>
                </div>
              ) : filteredOrganizers.length === 0 ? (
                <div className="empty-state">
                  <p className="empty-icon">üë•</p>
                  <p className="empty-message">
                    {searchOrganizers ? "No organizers found matching your search" : "No organizers yet"}
                  </p>
                </div>
              ) : (
                <div className="organizers-grid">
                  {filteredOrganizers.map((org) => (
                    <div key={org._id} className="organizer-card">
                      <div className="card-header">
                        <h3 className="organizer-name">
                          {org.clubName || org.profile?.fullName || org.username}
                        </h3>
                      </div>

                      <div className="card-body">
                        <div className="info-item">
                          <span className="info-label">üë§ Username:</span>
                          <span className="info-value">{org.username}</span>
                        </div>

                        <div className="info-item">
                          <span className="info-label">üìß Email:</span>
                          <span className="info-value">{org.email}</span>
                        </div>

                        <div className="info-item">
                          <span className="info-label">üìù Full Name:</span>
                          <span className="info-value">
                            {org.profile?.fullName || "-"}
                          </span>
                        </div>

                        <div className="info-item">
                          <span className="info-label">üìÖ Joined:</span>
                          <span className="info-value">
                            {new Date(org.createdAt).toLocaleDateString()}
                          </span>
                        </div>
                      </div>

                      <div className="card-footer">
                        <button
                          className="btn btn-danger btn-block"
                          onClick={() => handleRemoveOrganizer(org._id)}
                          disabled={loading}
                        >
                          üóëÔ∏è Remove
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          )}
        </>
      )}

      {/* ‚úÖ ADD ORGANIZER MODAL */}
      {showOrganizerModal && (
        <div className="modal-overlay" onClick={handleCloseOrganizerModal}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2>‚ûï Add New Organizer</h2>
              <button
                className="modal-close"
                onClick={handleCloseOrganizerModal}
              >
                ‚úï
              </button>
            </div>

            <form onSubmit={handleCreateOrganizer} className="organizer-form">
              {/* User Search */}
              <div className="form-group">
                <label className="form-label">Search Users *</label>
                <div className="search-input-wrapper">
                  <input
                    type="text"
                    placeholder="Type name, email, or username (min 2 chars)..."
                    value={userSearchQuery}
                    onChange={(e) => handleSearchUsers(e.target.value)}
                    className="search-input"
                    autoComplete="off"
                    disabled={selectedUser !== null}
                  />
                  {searchingUsers && (
                    <div className="search-spinner">‚è≥</div>
                  )}
                </div>

                {/* Search Results Dropdown */}
                {userSearchQuery.trim().length >= 2 && userSearchResults.length > 0 && !selectedUser && (
                  <div className="search-dropdown">
                    {userSearchResults.map((u) => (
                      <div
                        key={u._id}
                        className="dropdown-item"
                        onClick={() => handleSelectUser(u)}
                      >
                        <div className="user-name">
                          {u.profile?.fullName || u.username}
                        </div>
                        <div className="user-email">{u.email}</div>
                      </div>
                    ))}
                  </div>
                )}

                {userSearchQuery.trim().length >= 2 && userSearchResults.length === 0 && !selectedUser && !searchingUsers && (
                  <div className="no-results">No users found</div>
                )}
              </div>

              {/* Selected User Display */}
              {selectedUser && (
                <div className="selected-user-card">
                  <div className="selected-badge">‚úì Selected</div>
                  <div className="selected-name">
                    {selectedUser.profile?.fullName || selectedUser.username}
                  </div>
                  <div className="selected-email">{selectedUser.email}</div>
                  <button
                    type="button"
                    className="btn btn-sm btn-outline"
                    onClick={() => {
                      setSelectedUser(null);
                      setUserSearchQuery("");
                    }}
                  >
                    Change
                  </button>
                </div>
              )}

              {/* Club Name (OPTIONAL) */}
              <div className="form-group">
                <label className="form-label">Club Name (Optional)</label>
                <input
                  type="text"
                  placeholder="Enter club or organization name (optional)"
                  value={clubName}
                  onChange={(e) => setClubName(e.target.value)}
                  className="form-control"
                />
              </div>

              {/* Buttons */}
              <div className="modal-buttons">
                <button
                  type="button"
                  className="btn btn-secondary"
                  onClick={handleCloseOrganizerModal}
                >
                  Cancel
                </button>
                <button
                  type="submit"
                  className="btn btn-primary"
                  disabled={!selectedUser || loading}
                >
                  {loading ? "Creating..." : "Create Organizer"}
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/CollegeAdminEventsPage.jsx">
// =====================================================
// COLLEGE ADMIN EVENTS PAGE - State-Based Router Version
// =====================================================

// FILE: frontend/src/pages/CollegeAdminEventsPage.jsx

import { useEffect, useState } from "react";
import { useAuth } from "../context/AuthContext";
import API from "../services/api";
import "../styles/CollegeAdminDashboard.css";

export default function CollegeAdminEventsPage({ setCurrentPage }) {
  const { user } = useAuth();
  const [events, setEvents] = useState([]);
  const [myEvents, setMyEvents] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");
  const [activeTab, setActiveTab] = useState("all");
  const [filterCategory, setFilterCategory] = useState("All");
  const [searchTitle, setSearchTitle] = useState("");

  useEffect(() => {
    fetchEvents();
  }, []);

  // ‚úÖ FETCH EVENTS
  const fetchEvents = async () => {
    try {
      setLoading(true);
      setError("");

      const allEventsRes = await API.get("/college-admin/recent-events");
      if (allEventsRes.data?.events) {
        setEvents(allEventsRes.data.events);
      }

      const organizersRes = await API.get("/college-admin/organizers");
      if (organizersRes.data?.data) {
        const organizerIds = organizersRes.data.data.map((o) => o._id);
        const myEventsFiltered = allEventsRes.data?.events?.filter((event) =>
          organizerIds.includes(event.organizerId?._id || event.organizerId)
        );
        setMyEvents(myEventsFiltered || []);
      }
    } catch (err) {
      console.error("Error loading events:", err);
      setError(err.response?.data?.message || "Failed to load events");
    } finally {
      setLoading(false);
    }
  };

  const getDisplayedEvents = () => {
    let displayed = activeTab === "all" ? events : myEvents;

    if (filterCategory !== "All") {
      displayed = displayed.filter((event) => event.category === filterCategory);
    }

    if (searchTitle.trim() !== "") {
      displayed = displayed.filter((event) =>
        event.title.toLowerCase().includes(searchTitle.toLowerCase())
      );
    }

    return displayed;
  };

  const getAllCategories = () => {
    const categories = new Set();
    events.forEach((event) => {
      if (event.category) categories.add(event.category);
    });
    return ["All", ...Array.from(categories)];
  };

  const isUpcoming = (startDate) => {
    return new Date(startDate) > new Date();
  };

  const displayedEvents = getDisplayedEvents();
  const categories = getAllCategories();

  if (!user || user.role !== "collegeAdmin") {
    return (
      <div className="college-admin-dashboard">
        <div className="error-container">
          <h1>‚õî Access Denied</h1>
          <p>You do not have permission to view this page.</p>
        </div>
      </div>
    );
  }

  return (
    <div className="college-admin-dashboard">
      {/* Header */}
      <div className="dashboard-header">
        <div className="header-content">
          <h1>üìÖ Events Management</h1>
          <p className="welcome-text">View and manage college events</p>
        </div>
      </div>

      {/* Alerts */}
      {error && (
        <div className="alert alert-error">
          <span>‚ùå</span> {error}
          <button onClick={() => setError("")} className="alert-close">
            &times;
          </button>
        </div>
      )}

      {loading ? (
        <div className="loading-container">
          <div className="spinner"></div>
          <p>Loading events...</p>
        </div>
      ) : (
        <div className="dashboard-content">
          {/* TAB NAVIGATION */}
          <div className="tabs-container">
            <button
              className={`tab-button ${activeTab === "all" ? "active" : ""}`}
              onClick={() => {
                setActiveTab("all");
                setSearchTitle("");
                setFilterCategory("All");
              }}
            >
              üìå All Events ({events.length})
            </button>
            <button
              className={`tab-button ${activeTab === "my-events" ? "active" : ""}`}
              onClick={() => {
                setActiveTab("my-events");
                setSearchTitle("");
                setFilterCategory("All");
              }}
            >
              üéØ My College Events ({myEvents.length})
            </button>
          </div>

          {/* SEARCH AND FILTER */}
          <div className="events-filters">
            <div className="search-box">
              <input
                type="text"
                placeholder="Search events by title..."
                value={searchTitle}
                onChange={(e) => setSearchTitle(e.target.value)}
                className="search-input"
              />
            </div>

            <div className="filter-category">
              <select
                value={filterCategory}
                onChange={(e) => setFilterCategory(e.target.value)}
                className="filter-select"
              >
                {categories.map((cat) => (
                  <option key={cat} value={cat}>
                    {cat}
                  </option>
                ))}
              </select>
            </div>
          </div>

          {/* EVENTS LIST */}
          <div className="events-container">
            {displayedEvents.length === 0 ? (
              <div className="empty-state">
                <p className="empty-icon">üì≠</p>
                <p className="empty-message">
                  {activeTab === "all"
                    ? "No events available"
                    : "No events created by your organizers"}
                </p>
              </div>
            ) : (
              <div className="events-grid">
                {displayedEvents.map((event) => (
                  <div key={event._id} className="event-card">
                    {/* Event Header */}
                    <div className="event-header">
                      <h3 className="event-title">{event.title}</h3>
                      <span
                        className={`event-status ${
                          isUpcoming(event.dates?.startDate)
                            ? "status-upcoming"
                            : "status-past"
                        }`}
                      >
                        {isUpcoming(event.dates?.startDate)
                          ? "‚è≥ Upcoming"
                          : "‚úì Past"}
                      </span>
                    </div>

                    {/* Event Details */}
                    <div className="event-details">
                      <div className="detail-item">
                        <span className="detail-label">üìÇ Category:</span>
                        <span className="detail-value">
                          {event.category || "-"}
                        </span>
                      </div>

                      <div className="detail-item">
                        <span className="detail-label">üìÖ Start Date:</span>
                        <span className="detail-value">
                          {event.dates?.startDate
                            ? new Date(
                                event.dates.startDate
                              ).toLocaleDateString()
                            : "-"}
                        </span>
                      </div>

                      <div className="detail-item">
                        <span className="detail-label">üéØ Organizer:</span>
                        <span className="detail-value">
                          {event.organizerId?.clubName ||
                            event.organizerId?.profile?.fullName ||
                            event.organizerId?.username ||
                            "-"}
                        </span>
                      </div>

                      <div className="detail-item">
                        <span className="detail-label">üë• Registrations:</span>
                        <span className="registration-badge">
                          {event.participantsCount ||
                            event.participants?.length ||
                            0}
                        </span>
                      </div>

                      {event.description && (
                        <div className="detail-item">
                          <span className="detail-label">üìù Description:</span>
                          <p className="event-description">
                            {event.description.substring(0, 100)}
                            {event.description.length > 100 ? "..." : ""}
                          </p>
                        </div>
                      )}
                    </div>

                    {/* Event Footer */}
                    <div className="event-footer">
                      <span className="event-location">
                        üìç {event.location || "Location not specified"}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* STATS SECTION */}
          {activeTab === "my-events" && myEvents.length > 0 && (
            <div className="events-stats">
              <div className="stat-item">
                <span className="stat-label">Total Events:</span>
                <span className="stat-value">{myEvents.length}</span>
              </div>
              <div className="stat-item">
                <span className="stat-label">Upcoming:</span>
                <span className="stat-value">
                  {myEvents.filter((e) => isUpcoming(e.dates?.startDate))
                    .length}
                </span>
              </div>
              <div className="stat-item">
                <span className="stat-label">Total Registrations:</span>
                <span className="stat-value">
                  {myEvents.reduce(
                    (sum, e) => sum + (e.participantsCount || 0),
                    0
                  )}
                </span>
              </div>
            </div>
          )}
        </div>
      )}
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/CreateEventPage.jsx">
import { useState } from 'react';
import { eventAPI } from '../services/api';
import '../styles/CreateEventPage.css';

export default function CreateEventPage({ setCurrentPage }) {
  const [formData, setFormData] = useState({
    title: '',
    description: '',
    category: 'hackathon',
    venueName: '',
    venueLocation: '',
    venueCapacity: '100',
    startDate: '',
    endDate: '',
    registrationDeadline: '',
    maxParticipants: '100',
    registrationType: 'individual',
    teamMin: '2',
    teamMax: '4',
  });

  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value,
    }));
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    try {
      // Validation
      if (!formData.title || !formData.description || !formData.startDate || !formData.endDate) {
        setError('Title, description, start date and end date are required');
        setLoading(false);
        return;
      }

      // Build event data
      const eventData = {
        title: formData.title.trim(),
        description: formData.description.trim(),
        category: formData.category,
        registrationType: formData.registrationType,
        maxParticipants: parseInt(formData.maxParticipants) || 100,
        
        // Dates
        startDate: formData.startDate,
        endDate: formData.endDate,
        registrationDeadline: formData.registrationDeadline || formData.endDate,
        
        // Venue
        location: formData.venueLocation || 'TBD',
        
        // Team size (if team registration)
        teamSize:
          formData.registrationType === 'team'
            ? {
                min: parseInt(formData.teamMin) || 2,
                max: parseInt(formData.teamMax) || 4,
              }
            : { min: 1, max: 1 },
      };

      console.log('üì§ Sending event data:', eventData);

      const response = await eventAPI.createEvent(eventData);
      
      console.log('‚úÖ Event created:', response.data);

      alert('‚úÖ Event created successfully!');
      setCurrentPage('events');
    } catch (err) {
      console.error('‚ùå Error response:', err.response?.data);
      console.error('‚ùå Error message:', err.message);
      
      setError(
        err.response?.data?.message || 
        err.response?.data?.error ||
        'Failed to create event'
      );
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="create-event-page">
      <div className="create-event-header">
        <h1>üéØ Create New Event</h1>
        <button className="btn-secondary" onClick={() => setCurrentPage('events')}>
          ‚Üê Back to Events
        </button>
      </div>

      {error && <div className="alert alert-error">{error}</div>}

      <form className="create-event-form" onSubmit={handleSubmit}>
        {/* Basic details */}
        <div className="form-row">
          <div className="form-group">
            <label>Event Title *</label>
            <input
              type="text"
              name="title"
              value={formData.title}
              onChange={handleChange}
              placeholder="Enter event title"
              required
            />
          </div>
          <div className="form-group">
            <label>Category *</label>
            <select name="category" value={formData.category} onChange={handleChange} required>
              <option value="hackathon">Hackathon</option>
              <option value="cultural">Cultural</option>
              <option value="workshop">Workshop</option>
              <option value="sports">Sports</option>
              <option value="technical">Technical</option>
              <option value="competition">Competition</option>
              <option value="seminar">Seminar</option>
            </select>
          </div>
        </div>

        <div className="form-row">
          <div className="form-group">
            <label>Description *</label>
            <textarea
              name="description"
              value={formData.description}
              onChange={handleChange}
              placeholder="Describe the event..."
              required
            />
          </div>
        </div>

        {/* Venue */}
        <div className="form-row">
          <div className="form-group">
            <label>Venue Name</label>
            <input
              type="text"
              name="venueName"
              value={formData.venueName}
              onChange={handleChange}
              placeholder="e.g., Seminar Hall"
            />
          </div>
          <div className="form-group">
            <label>Venue Location</label>
            <input
              type="text"
              name="venueLocation"
              value={formData.venueLocation}
              onChange={handleChange}
              placeholder="e.g., Block A, 2nd Floor"
            />
          </div>
          <div className="form-group">
            <label>Venue Capacity</label>
            <input
              type="number"
              name="venueCapacity"
              value={formData.venueCapacity}
              onChange={handleChange}
              min="1"
            />
          </div>
        </div>

        {/* Dates */}
        <div className="form-row">
          <div className="form-group">
            <label>Start Date & Time *</label>
            <input
              type="datetime-local"
              name="startDate"
              value={formData.startDate}
              onChange={handleChange}
              required
            />
          </div>
          <div className="form-group">
            <label>End Date & Time *</label>
            <input
              type="datetime-local"
              name="endDate"
              value={formData.endDate}
              onChange={handleChange}
              required
            />
          </div>
        </div>

        <div className="form-row">
          <div className="form-group">
            <label>Registration Deadline</label>
            <input
              type="datetime-local"
              name="registrationDeadline"
              value={formData.registrationDeadline}
              onChange={handleChange}
            />
          </div>
          <div className="form-group">
            <label>Max Participants</label>
            <input
              type="number"
              name="maxParticipants"
              value={formData.maxParticipants}
              onChange={handleChange}
              min="1"
            />
          </div>
        </div>

        {/* Registration type */}
        <div className="form-row">
          <div className="form-group">
            <label>Registration Type *</label>
            <div className="radio-group">
              <label className="radio-label">
                <input
                  type="radio"
                  name="registrationType"
                  value="individual"
                  checked={formData.registrationType === 'individual'}
                  onChange={handleChange}
                />
                <span>üë§ Individual</span>
              </label>
              <label className="radio-label">
                <input
                  type="radio"
                  name="registrationType"
                  value="team"
                  checked={formData.registrationType === 'team'}
                  onChange={handleChange}
                />
                <span>üë• Team</span>
              </label>
            </div>
          </div>

          {formData.registrationType === 'team' && (
            <div className="form-group">
              <label>Team Size (min - max)</label>
              <div className="team-size-row">
                <input
                  type="number"
                  name="teamMin"
                  value={formData.teamMin}
                  onChange={handleChange}
                  min="1"
                />
                <span className="team-size-separator">to</span>
                <input
                  type="number"
                  name="teamMax"
                  value={formData.teamMax}
                  onChange={handleChange}
                  min={formData.teamMin || 1}
                />
              </div>
            </div>
          )}
        </div>

        <div className="form-actions">
          <button type="submit" className="btn-primary" disabled={loading}>
            {loading ? '‚è≥ Creating...' : '‚úì Create Event'}
          </button>
        </div>
      </form>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/DashboardPage.jsx">
import { useState, useEffect } from 'react';
import axios from 'axios';
import { useAuth } from '../context/AuthContext';
import '../styles/DashboardPage.css';

const API_BASE_URL = 'http://localhost:5000/api';

export default function DashboardPage({ onSelectEvent, setCurrentPage }) {
  const [registeredEvents, setRegisteredEvents] = useState([]);
  const [createdEvents, setCreatedEvents] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState('');
  const [activeTab, setActiveTab] = useState('registered');
  const { user, token } = useAuth();

  console.log('DashboardPage - User:', user);

  useEffect(() => {
    if (!user || !token) {
      setError('Please login to view dashboard');
      setLoading(false);
      return;
    }
    fetchDashboardData();
  }, [user, token]);

  const fetchDashboardData = async () => {
    try {
      setLoading(true);
      setError('');
  
      // Fetch all events
      const response = await axios.get(`${API_BASE_URL}/events`, {
        headers: { Authorization: `Bearer ${token}` }
      });
  
      const allEvents = response.data.data || [];
      console.log('All events from API:', allEvents); // Debug
  
      // Separate registered and created events
      // Separate registered and created events
const registered = allEvents.filter(event => {
  const isRegistered = event.participants?.some(
    participant => {
      const participantId = participant._id ? participant._id.toString() : participant.toString();
      return participantId === user._id.toString();
    }
  );
  console.log(`Event "${event.title}" - Registered:`, isRegistered);
  return isRegistered;
});

      const created = allEvents.filter(event => {
        console.log('Checking event:', {
          eventId: event._id,
          eventOrganizerId: event.organizerId,
          userId: user._id,
          match: event.organizerId === user._id
        });
        return event.organizerId === user._id;
      });
      
  
      console.log('Registered events:', registered);
      console.log('Created events:', created);
  
      setRegisteredEvents(registered);
      setCreatedEvents(created);
    } catch (err) {
      console.error('Error fetching dashboard data:', err);
      setError('Failed to load dashboard data: ' + err.message);
    } finally {
      setLoading(false);
    }
  };
  

  const handleUnregister = async (eventId) => {
    if (window.confirm('Are you sure you want to unregister?')) {
      try {
        const response = await axios.delete(
          `${API_BASE_URL}/events/${eventId}/register`,
          { headers: { Authorization: `Bearer ${token}` } }
        );

        if (response.data.success) {
          alert('‚úÖ Unregistered successfully');
          fetchDashboardData();
        }
      } catch (err) {
        alert('‚ùå ' + (err.response?.data?.message || 'Unregister failed'));
      }
    }
  };

  const handleDeleteEvent = async (eventId) => {
    if (window.confirm('Are you sure you want to delete this event?')) {
      try {
        const response = await axios.delete(
          `${API_BASE_URL}/events/${eventId}`,
          { headers: { Authorization: `Bearer ${token}` } }
        );

        if (response.data.success) {
          alert('‚úÖ Event deleted successfully');
          fetchDashboardData();
        }
      } catch (err) {
        alert('‚ùå ' + (err.response?.data?.message || 'Delete failed'));
      }
    }
  };

  if (loading) {
    return (
      <div className="dashboard-container">
        <div className="loading-spinner">
          <div className="spinner"></div>
          <p>Loading your dashboard...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="dashboard-container">
      <div className="dashboard-header">
        <h1>üìä My Dashboard</h1>
        <p className="subtitle">Welcome, {user?.name}! üëã</p>
      </div>

      {error && (
        <div className="error-message">
          <p>‚ö†Ô∏è {error}</p>
        </div>
      )}

      {/* Tabs */}
      <div className="dashboard-tabs">
        <button
          className={`tab-btn ${activeTab === 'registered' ? 'active' : ''}`}
          onClick={() => setActiveTab('registered')}
        >
          üìù Registered Events ({registeredEvents.length})
        </button>
        <button
          className={`tab-btn ${activeTab === 'created' ? 'active' : ''}`}
          onClick={() => setActiveTab('created')}
        >
          üéØ My Events ({createdEvents.length})
        </button>
      </div>

      {/* Registered Events Tab */}
      {activeTab === 'registered' && (
        <div className="tab-content">
          {registeredEvents.length === 0 ? (
            <div className="empty-state">
              <p className="empty-icon">üì≠</p>
              <p className="empty-title">No Registered Events</p>
              <p className="empty-desc">You haven't registered for any events yet</p>
              <button
                className="btn-browse"
                onClick={() => setCurrentPage('events')}
              >
                Browse Events ‚Üí
              </button>
            </div>
          ) : (
            <div className="events-list">
              {registeredEvents.map(event => {
                const eventDate = new Date(event.eventDate || event.dates?.startDate);
                return (
                  <div key={event._id} className="event-item">
                    <div className="event-item-left">
                      <h3>{event.title}</h3>
                      <p className="event-category">{event.category}</p>
                      <p className="event-desc">{event.description.substring(0, 80)}...</p>

                      <div className="event-meta">
                        <span>üìÖ {eventDate.toLocaleDateString()}</span>
                        <span>üìç {event.venue?.name || 'TBA'}</span>
                        <span>üë• {event.participants?.length} registered</span>
                      </div>
                    </div>

                    <div className="event-item-actions">
                      <button
                        className="btn btn-view"
                        onClick={() => onSelectEvent(event._id)}
                      >
                        View Details
                      </button>
                      <button
                        className="btn btn-danger"
                        onClick={() => handleUnregister(event._id)}
                      >
                        Unregister
                      </button>
                    </div>
                  </div>
                );
              })}
            </div>
          )}
        </div>
      )}

      {/* Created Events Tab */}
      {activeTab === 'created' && (
        <div className="tab-content">
          {createdEvents.length === 0 ? (
            <div className="empty-state">
              <p className="empty-icon">üé™</p>
              <p className="empty-title">No Created Events</p>
              <p className="empty-desc">You haven't created any events yet</p>
              <button
                className="btn-create"
                onClick={() => setCurrentPage('create')}
              >
                Create Event ‚Üí
              </button>
            </div>
          ) : (
            <div className="events-list">
             {createdEvents.map(event => {
  // Use dates.startDate instead of eventDate
  const eventDate = new Date(event.dates?.startDate || new Date());
  
  return (
    <div key={event._id} className="event-item">
      <div className="event-item-left">
        <h3>{event.title}</h3>
        <p className="event-category">{event.category}</p>
        <p className="event-desc">{event.description?.substring(0, 80)}...</p>

        <div className="event-meta">
          <span>üìÖ {eventDate.toLocaleDateString('en-IN')}</span>
          <span>üìç {event.venue?.name || 'TBA'}</span>
          <span>üë• {event.participants?.length || 0} registered</span>
        </div>

        <div className="event-stats">
          <div className="stat">
            <span className="stat-label">Registrations</span>
            <span className="stat-value">{event.participants?.length || 0}</span>
          </div>
          <div className="stat">
            <span className="stat-label">Status</span>
            <span className="stat-value active">{event.status || 'Active'}</span>
          </div>
        </div>
      </div>

      <div className="event-item-actions">
        <button
          className="btn btn-view"
          onClick={() => onSelectEvent(event._id)}
        >
          View
        </button>
        <button
          className="btn btn-edit"
          onClick={() => alert('Edit coming soon!')}
        >
          Edit
        </button>
        <button
          className="btn btn-danger"
          onClick={() => handleDeleteEvent(event._id)}
        >
          Delete
        </button>
      </div>
    </div>
  );


              })}
            </div>
          )}
        </div>
      )}
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/PrincipalRegisterPage.jsx">
import { useState } from "react";
import { principalAPI } from "../services/api";
import "../styles/AuthPages.css";

export default function PrincipalRegisterPage({ setCurrentPage }) {
  const [form, setForm] = useState({
    name: "",
    mobile: "",
    collegeName: "",
    collegeCode: "",
    usnPrefix: "",           // NEW
    email: "",
    password: "",
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");
  const [success, setSuccess] = useState("");

  const handleChange = (e) => {
    const { name, value } = e.target;
    setForm((prev) => ({ ...prev, [name]: value }));
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError("");
    setSuccess("");
    setLoading(true);
    try {
      const res = await principalAPI.register(form);
      if (res.data.success) {
        setSuccess("Request submitted. Admin will verify and approve your account.");
        setForm({
          name: "",
          mobile: "",
          collegeName: "",
          collegeCode: "",
          usnPrefix: "",
          email: "",
          password: "",
        });
      }
    } catch (err) {
      setError(err.response?.data?.message || "Failed to submit request");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="auth-container">
      <div className="auth-card">
        <h2>Principal Registration</h2>
        {error && <div className="error-message">{error}</div>}
        {success && <div className="success-message">{success}</div>}

        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <label>Principal Name</label>
            <input
              name="name"
              type="text"
              value={form.name}
              onChange={handleChange}
              required
            />
          </div>

          <div className="form-group">
            <label>Mobile Number</label>
            <input
              name="mobile"
              type="tel"
              value={form.mobile}
              onChange={handleChange}
              required
            />
          </div>

          <div className="form-group">
            <label>College Name</label>
            <input
              name="collegeName"
              type="text"
              value={form.collegeName}
              onChange={handleChange}
              required
            />
          </div>

          <div className="form-group">
            <label>College Code</label>
            <input
              name="collegeCode"
              type="text"
              value={form.collegeCode}
              onChange={handleChange}
              required
            />
          </div>

          <div className="form-group">
            <label>USN Prefix (e.g., 1SI, 2CS)</label>
            <input
              name="usnPrefix"
              type="text"
              value={form.usnPrefix}
              onChange={handleChange}
              placeholder="e.g., 1SI"
              required
            />
          </div>

          <div className="form-group">
            <label>Official Email (principal.&lt;college&gt;.edu)</label>
            <input
              name="email"
              type="email"
              value={form.email}
              onChange={handleChange}
              required
            />
          </div>

          <div className="form-group">
            <label>Create Password</label>
            <input
              name="password"
              type="password"
              value={form.password}
              onChange={handleChange}
              required
            />
          </div>

          <button type="submit" disabled={loading} className="btn-primary">
            {loading ? "Submitting..." : "Submit for Approval"}
          </button>
        </form>

        <p className="auth-link">
          Already approved?{" "}
          <a
            onClick={() => setCurrentPage("login")}
            style={{ cursor: "pointer", color: "#007bff", textDecoration: "underline" }}
          >
            Login
          </a>
        </p>
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/TeamPage.jsx">
import { useEffect, useState } from 'react';
import axios from 'axios';
import { useAuth } from '../context/AuthContext';
import '../styles/TeamPage.css';

const API_BASE_URL = 'http://localhost:5000/api';

export default function TeamPage({ setCurrentPage }) {
  const { user, token } = useAuth();
  const [myTeams, setMyTeams] = useState([]);
  const [invites, setInvites] = useState([]);
  const [loading, setLoading] = useState(false);
  const [showCreateForm, setShowCreateForm] = useState(false);
  const [teamName, setTeamName] = useState('');
  const [teamDesc, setTeamDesc] = useState('');
  const [maxMembers, setMaxMembers] = useState(5);
  const [selectedTeam, setSelectedTeam] = useState(null);
  const [inviteEmail, setInviteEmail] = useState('');
  const [error, setError] = useState('');
  const [success, setSuccess] = useState('');
  const [deletingTeamId, setDeletingTeamId] = useState(null);

  useEffect(() => {
    fetchTeams();
  }, [token]);

  const fetchTeams = async () => {
    try {
      setLoading(true);
      const res = await axios.get(`${API_BASE_URL}/teams/my-teams`, {
        headers: { Authorization: `Bearer ${token}` },
      });
      setMyTeams(res.data.data);

      // Extract invites from user
      if (user?.teamInvites) {
        setInvites(user.teamInvites.filter((i) => i.status === 'pending'));
      }
    } catch (err) {
      console.error('Error fetching teams', err);
      setError('Failed to load teams');
    } finally {
      setLoading(false);
    }
  };

  const handleCreateTeam = async (e) => {
    e.preventDefault();
    if (!teamName) {
      setError('Team name is required');
      return;
    }

    try {
      setLoading(true);
      const res = await axios.post(
        `${API_BASE_URL}/teams`,
        {
          name: teamName,
          description: teamDesc,
          maxMembers,
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );

      setMyTeams([res.data.data, ...myTeams]);
      setSuccess('Team created successfully!');
      setTeamName('');
      setTeamDesc('');
      setMaxMembers(5);
      setShowCreateForm(false);

      setTimeout(() => setSuccess(''), 3000);
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to create team');
    } finally {
      setLoading(false);
    }
  };

  const handleInviteMember = async (teamId) => {
    if (!inviteEmail) {
      setError('Email is required');
      return;
    }

    try {
      setLoading(true);
      // First find user by email
      const userRes = await axios.get(
        `${API_BASE_URL}/users/search?email=${inviteEmail}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );

      if (!userRes.data.data) {
        setError('User not found');
        return;
      }

      const res = await axios.post(
        `${API_BASE_URL}/teams/${teamId}/invite`,
        { userId: userRes.data.data._id },
        { headers: { Authorization: `Bearer ${token}` } }
      );

      setMyTeams(myTeams.map((t) => (t._id === teamId ? res.data.data : t)));
      setSuccess('Invite sent!');
      setInviteEmail('');

      setTimeout(() => setSuccess(''), 3000);
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to invite');
    } finally {
      setLoading(false);
    }
  };

  const handleDeleteTeam = async (teamId) => {
    const confirmDelete = window.confirm(
      '‚ö†Ô∏è Are you sure you want to delete this team? This action cannot be undone.'
    );

    if (!confirmDelete) return;

    try {
      setDeletingTeamId(teamId);
      await axios.delete(
        `${API_BASE_URL}/teams/${teamId}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );

      setMyTeams(myTeams.filter((t) => t._id !== teamId));
      setSuccess('‚úÖ Team deleted successfully');

      setTimeout(() => setSuccess(''), 3000);
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to delete team');
    } finally {
      setDeletingTeamId(null);
    }
  };

  const handleRespondInvite = async (teamId, accept) => {
    try {
      await axios.post(
        `${API_BASE_URL}/teams/${teamId}/invite/respond`,
        { accept },
        { headers: { Authorization: `Bearer ${token}` } }
      );

      setInvites(invites.filter((i) => i.teamId !== teamId));
      setSuccess(accept ? '‚úÖ Joined team!' : '‚úÖ Declined invite');

      setTimeout(() => setSuccess(''), 3000);
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to respond');
    }
  };

  return (
    <div className="team-page">
      <div className="team-header">
        <h1>üë• My Teams</h1>
        <button
          className="btn-primary"
          onClick={() => setShowCreateForm(!showCreateForm)}
        >
          {showCreateForm ? '‚úï Cancel' : '‚ûï Create Team'}
        </button>
      </div>

      {error && <div className="alert alert-error">{error}</div>}
      {success && <div className="alert alert-success">{success}</div>}

      {/* Create Team Form */}
      {showCreateForm && (
        <div className="team-form">
          <h2>Create New Team</h2>
          <form onSubmit={handleCreateTeam}>
            <div className="form-group">
              <label>Team Name *</label>
              <input
                type="text"
                value={teamName}
                onChange={(e) => setTeamName(e.target.value)}
                placeholder="Enter team name"
              />
            </div>
            <div className="form-group">
              <label>Description</label>
              <textarea
                value={teamDesc}
                onChange={(e) => setTeamDesc(e.target.value)}
                placeholder="Team description (optional)"
                rows="3"
              />
            </div>
            <div className="form-group">
              <label>Max Members</label>
              <input
                type="number"
                min="2"
                max="10"
                value={maxMembers}
                onChange={(e) => setMaxMembers(parseInt(e.target.value))}
              />
            </div>
            <button type="submit" className="btn-primary" disabled={loading}>
              {loading ? 'Creating...' : 'Create Team'}
            </button>
          </form>
        </div>
      )}

      {/* Pending Invites */}
      {invites.length > 0 && (
        <div className="invites-section">
          <h2>üì¨ Pending Invites ({invites.length})</h2>
          <div className="invites-list">
            {invites.map((invite) => (
              <div key={invite.teamId} className="invite-card">
                <div>
                  <h3>Team Invitation</h3>
                  <p>You're invited to join a team</p>
                </div>
                <div className="invite-actions">
                  <button
                    className="btn-primary"
                    onClick={() => handleRespondInvite(invite.teamId, true)}
                  >
                    ‚úì Accept
                  </button>
                  <button
                    className="btn-secondary"
                    onClick={() => handleRespondInvite(invite.teamId, false)}
                  >
                    ‚úï Decline
                  </button>
                </div>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* My Teams */}
      <div className="teams-section">
        <h2>Your Teams ({myTeams.length})</h2>
        {myTeams.length === 0 ? (
          <div className="empty-message">
            <p>No teams yet. Create one to get started!</p>
          </div>
        ) : (
          <div className="teams-grid">
            {myTeams.map((team) => (
              <div key={team._id} className="team-card">
                <div className="team-card-header">
                  <h3>{team.name}</h3>
                  {team.leader._id === user._id && (
                    <span className="badge-leader">Leader</span>
                  )}
                </div>
                <p className="team-desc">{team.description || 'No description'}</p>

                <div className="team-stats">
                  <div className="stat">
                    <span className="stat-label">Members</span>
                    <span className="stat-value">
                      {team.members?.filter((m) => m.status !== 'pending').length}/{team.maxMembers}
                    </span>
                  </div>
                  <div className="stat">
                    <span className="stat-label">Events</span>
                    <span className="stat-value">{team.registeredEvents?.length || 0}</span>
                  </div>
                </div>

                {/* Members List */}
                <div className="members-list">
                  <h4>Members</h4>
                  {team.members?.map((member) => (
                    <div key={member.userId._id} className="member-item">
                      <span>{member.userId.profile?.fullName || member.userId.username}</span>
                      <span className="member-status">{member.status}</span>
                    </div>
                  ))}
                </div>

                {/* Invite Member (if leader) */}
                {team.leader._id === user._id && (
                  <div className="invite-form">
                    <input
                      type="email"
                      placeholder="Email to invite"
                      value={inviteEmail}
                      onChange={(e) => setInviteEmail(e.target.value)}
                    />
                    <button
                      className="btn-secondary"
                      onClick={() => handleInviteMember(team._id)}
                      disabled={loading}
                    >
                      Invite
                    </button>
                  </div>
                )}

                {/* Action Buttons */}
                <div className="team-actions">
                  <button
                    className="btn-primary"
                    onClick={() => setCurrentPage('events')}
                    style={{ flex: 1 }}
                  >
                    üìã Register for Events
                  </button>

                  {team.leader._id === user._id && (
                    <button
                      className="btn-danger"
                      onClick={() => handleDeleteTeam(team._id)}
                      disabled={deletingTeamId === team._id}
                      style={{ flex: 1 }}
                    >
                      {deletingTeamId === team._id ? 'üóëÔ∏è Deleting...' : 'üóëÔ∏è Delete Team'}
                    </button>
                  )}
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/styles/AuthPages.css">
.auth-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: calc(100vh - 60px);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
  }
  
  .auth-card {
    background: white;
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    width: 100%;
    max-width: 450px;
  }
  
  .auth-card h2 {
    text-align: center;
    color: #333;
    margin-bottom: 30px;
    font-size: 28px;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
  }
  
  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: #555;
  }
  
  .form-group input,
  .form-group select {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
    transition: border-color 0.3s;
  }
  
  .form-group input:focus,
  .form-group select:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  
  .btn-primary {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s;
    margin-top: 10px;
  }
  
  .btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
  }
  
  .btn-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  .error-message {
    background: #fee;
    color: #c33;
    padding: 12px;
    border-radius: 5px;
    margin-bottom: 20px;
    border-left: 4px solid #c33;
  }
  
  .auth-link {
    text-align: center;
    margin-top: 20px;
    color: #666;
  }
  
  .auth-link a {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;
  }
  
  .auth-link a:hover {
    text-decoration: underline;
  }
  
  @media (max-width: 600px) {
    .form-row {
      grid-template-columns: 1fr;
    }
  
    .auth-card {
      padding: 25px;
    }
  }
</file>

<file path="frontend/frontend/src/styles/CollegeAdminDashboard.css">
:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
/* =====================================================
   COLLEGE ADMIN DASHBOARD STYLES
   ===================================================== */

.college-admin-dashboard {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--space-20);
  background: var(--color-background);
  min-height: 100vh;
}

/* =====================================================
   HEADER
   ===================================================== */

.dashboard-header {
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-24);
  margin-bottom: var(--space-24);
  box-shadow: var(--shadow-sm);
}

.header-content h1 {
  margin: 0 0 var(--space-8) 0;
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

.welcome-text {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
}

/* =====================================================
   ALERTS
   ===================================================== */

.alert {
  display: flex;
  align-items: center;
  gap: var(--space-12);
  padding: var(--space-16);
  border-radius: var(--radius-base);
  margin-bottom: var(--space-16);
  animation: slideDown var(--duration-normal) var(--ease-standard);
  border-left: 4px solid;
  box-shadow: var(--shadow-sm);
}

.alert-error {
  background: rgba(var(--color-error-rgb), var(--status-bg-opacity));
  color: var(--color-error);
  border-left-color: var(--color-error);
  border: 1px solid rgba(var(--color-error-rgb), var(--status-border-opacity));
  border-left: 4px solid var(--color-error);
}

.alert-success {
  background: rgba(var(--color-success-rgb), var(--status-bg-opacity));
  color: var(--color-success);
  border-left-color: var(--color-success);
  border: 1px solid rgba(var(--color-success-rgb), var(--status-border-opacity));
  border-left: 4px solid var(--color-success);
}

.alert-close {
  margin-left: auto;
  background: none;
  border: none;
  color: inherit;
  font-size: var(--font-size-xl);
  cursor: pointer;
  padding: 0;
  transition: opacity var(--duration-fast) var(--ease-standard);
}

.alert-close:hover {
  opacity: 0.7;
}

.alert-close:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* =====================================================
   TABS NAVIGATION
   ===================================================== */

.tabs-navigation {
  display: flex;
  gap: var(--space-12);
  margin-bottom: var(--space-24);
  border-bottom: 2px solid var(--color-border);
}

.tab-btn {
  padding: var(--space-12) var(--space-20);
  background: none;
  border: none;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border-bottom: 3px solid transparent;
  margin-bottom: -2px;
  font-family: var(--font-family-base);
}

.tab-btn:hover {
  color: var(--color-text);
}

.tab-btn.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

.tab-btn:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* =====================================================
   DASHBOARD CONTENT & SECTIONS
   ===================================================== */

.dashboard-content {
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-24);
  box-shadow: var(--shadow-sm);
}

.admin-section {
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-24);
  box-shadow: var(--shadow-sm);
}

.section {
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-24);
  margin-bottom: var(--space-24);
  box-shadow: var(--shadow-sm);
}

.section h2 {
  margin: 0 0 var(--space-20) 0;
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-24);
  flex-wrap: wrap;
  gap: var(--space-16);
}

.section-header h2 {
  margin: 0;
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

.header-stats {
  display: flex;
  gap: var(--space-24);
}

.stat {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  text-align: center;
  padding: var(--space-12);
  background: var(--color-bg-1);
  border-radius: var(--radius-base);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-xs);
}

.stat strong {
  font-size: var(--font-size-lg);
  color: var(--color-primary);
  font-weight: var(--font-weight-bold);
}

/* =====================================================
   STATS GRID
   ===================================================== */

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-16);
  margin-bottom: var(--space-24);
}

.stat-card {
  display: flex;
  align-items: center;
  gap: var(--space-16);
  background: var(--color-bg-1);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-20);
  transition: all var(--duration-normal) var(--ease-standard);
  box-shadow: var(--shadow-sm);
}

.stat-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.stat-icon {
  font-size: 2.5rem;
  line-height: 1;
}

.stat-info {
  flex: 1;
}

.stat-label {
  margin: 0;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.stat-value {
  margin: var(--space-4) 0 0 0;
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  line-height: var(--line-height-tight);
}

/* =====================================================
   EVENTS LIST
   ===================================================== */

.events-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
}

.event-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-16);
  background: var(--color-bg-2);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-base);
  transition: all var(--duration-normal) var(--ease-standard);
  box-shadow: var(--shadow-xs);
}

.event-item:hover {
  box-shadow: var(--shadow-sm);
  transform: translateX(2px);
}

.event-info {
  flex: 1;
}

.event-title {
  margin: 0 0 var(--space-6) 0;
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  line-height: var(--line-height-tight);
}

.event-organizer {
  margin: 0 0 var(--space-4) 0;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.event-date {
  margin: 0;
  font-size: var(--font-size-sm);
  color: var(--color-primary);
  font-weight: var(--font-weight-medium);
}

.event-stat {
  display: flex;
  gap: var(--space-12);
}

.registration-badge {
  display: inline-block;
  padding: var(--space-8) var(--space-12);
  background: var(--color-bg-3);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  box-shadow: var(--shadow-xs);
}

/* =====================================================
   FILTERS & SEARCH
   ===================================================== */

.filters-container {
  display: flex;
  gap: var(--space-16);
  margin-bottom: var(--space-20);
  flex-wrap: wrap;
  align-items: center;
}

.search-box {
  position: relative;
  flex: 1;
  min-width: 250px;
}

.search-input {
  width: 100%;
  padding: var(--space-10) var(--space-12);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  color: var(--color-text);
  background-color: var(--color-surface);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
  box-shadow: var(--shadow-xs);
}

.search-input::placeholder {
  color: var(--color-text-secondary);
}

.search-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: var(--focus-ring);
}

.clear-btn {
  position: absolute;
  right: var(--space-12);
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--color-text-secondary);
  cursor: pointer;
  font-size: var(--font-size-lg);
  padding: var(--space-4);
  transition: color var(--duration-fast) var(--ease-standard);
  border-radius: var(--radius-sm);
}

.clear-btn:hover {
  color: var(--color-text);
}

.clear-btn:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* =====================================================
   GRIDS - STUDENTS & ORGANIZERS
   ===================================================== */

.students-grid,
.organizers-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-16);
  margin-top: var(--space-20);
}

.student-card,
.organizer-card {
  display: flex;
  flex-direction: column;
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: all var(--duration-normal) var(--ease-standard);
  box-shadow: var(--shadow-sm);
}

.student-card:hover,
.organizer-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.card-header {
  padding: var(--space-16);
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
  border-bottom: 1px solid var(--color-card-border-inner);
}

.student-name,
.organizer-name {
  margin: 0;
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: inherit;
  line-height: var(--line-height-tight);
}

.card-body {
  padding: var(--space-16);
  flex: 1;
  background: var(--color-bg-1);
}

.info-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  margin-bottom: var(--space-12);
}

.info-item:last-child {
  margin-bottom: 0;
}

.info-label {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.info-value {
  font-size: var(--font-size-sm);
  color: var(--color-text);
  word-break: break-word;
  line-height: var(--line-height-normal);
}

.card-footer {
  padding: var(--space-16);
  border-top: 1px solid var(--color-card-border-inner);
  background: var(--color-surface);
}

/* =====================================================
   BUTTONS
   ===================================================== */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border: none;
  border-radius: var(--radius-base);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family-base);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  white-space: nowrap;
  line-height: 1.5;
  text-decoration: none;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-danger {
  background: var(--color-error);
  color: var(--color-white);
  box-shadow: var(--shadow-inset-sm);
}

.btn-danger:hover:not(:disabled) {
  background: rgba(var(--color-error-rgb), 0.9);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.btn-danger:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-xs);
}

.btn-block {
  width: 100%;
}

/* =====================================================
   LOADING & EMPTY STATES
   ===================================================== */

.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-32) var(--space-20);
  gap: var(--space-16);
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.empty-state {
  text-align: center;
  padding: var(--space-32) var(--space-20);
}

.empty-icon {
  font-size: 3rem;
  margin-bottom: var(--space-16);
  opacity: 0.5;
  line-height: 1;
}

.empty-message {
  color: var(--color-text-secondary);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
}

.error-container {
  text-align: center;
  padding: var(--space-32) var(--space-20);
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}

.error-container h1 {
  color: var(--color-error);
  font-weight: var(--font-weight-semibold);
  letter-spacing: var(--letter-spacing-tight);
}

/* =====================================================
   ANIMATIONS
   ===================================================== */

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* =====================================================
   RESPONSIVE DESIGN
   ===================================================== */

@media (max-width: 768px) {
  .college-admin-dashboard {
    padding: var(--space-16);
  }

  .dashboard-content,
  .admin-section,
  .section {
    padding: var(--space-16);
  }

  .dashboard-header {
    padding: var(--space-16);
  }

  .header-content h1 {
    font-size: var(--font-size-2xl);
  }

  .section-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .header-stats {
    width: 100%;
    flex-direction: column;
  }

  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .students-grid,
  .organizers-grid {
    grid-template-columns: 1fr;
  }

  .event-item {
    flex-direction: column;
    gap: var(--space-12);
    align-items: flex-start;
  }

  .event-stat {
    width: 100%;
  }

  .registration-badge {
    display: block;
  }

  .filters-container {
    flex-direction: column;
  }

  .search-box {
    min-width: auto;
    width: 100%;
  }

  .tabs-navigation {
    flex-wrap: wrap;
    gap: var(--space-8);
  }

  .tab-btn {
    padding: var(--space-10) var(--space-16);
    font-size: var(--font-size-sm);
  }

  .stat-card {
    gap: var(--space-12);
  }

  .stat-icon {
    font-size: 2rem;
  }

  .stat-value {
    font-size: var(--font-size-2xl);
  }
}

@media (max-width: 480px) {
  .college-admin-dashboard {
    padding: var(--space-12);
  }

  .dashboard-content,
  .admin-section,
  .section {
    padding: var(--space-12);
  }

  .dashboard-header {
    padding: var(--space-12);
    margin-bottom: var(--space-16);
  }

  .header-content h1 {
    font-size: var(--font-size-xl);
  }

  .section-header {
    margin-bottom: var(--space-16);
    gap: var(--space-12);
  }

  .section-header h2 {
    font-size: var(--font-size-xl);
  }

  .header-stats {
    gap: var(--space-12);
  }

  .stat {
    padding: var(--space-8);
  }

  .search-input {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: var(--space-8) var(--space-10);
  }

  .stats-grid {
    grid-template-columns: 1fr;
    gap: var(--space-12);
  }

  .stat-card {
    padding: var(--space-16);
    gap: var(--space-12);
  }

  .stat-icon {
    font-size: 2rem;
  }

  .stat-value {
    font-size: var(--font-size-2xl);
  }

  .students-grid,
  .organizers-grid {
    grid-template-columns: 1fr;
    gap: var(--space-12);
  }

  .card-header {
    padding: var(--space-12);
  }

  .student-name,
  .organizer-name {
    font-size: var(--font-size-base);
  }

  .card-body {
    padding: var(--space-12);
  }

  .card-footer {
    padding: var(--space-12);
  }

  .info-item {
    margin-bottom: var(--space-10);
  }

  .events-list {
    gap: var(--space-8);
  }

  .event-item {
    padding: var(--space-12);
  }

  .event-title {
    font-size: var(--font-size-base);
    margin-bottom: var(--space-4);
  }

  .event-stat {
    flex-direction: column;
    gap: var(--space-8);
    width: 100%;
  }

  .registration-badge {
    text-align: center;
  }

  .section h2 {
    font-size: var(--font-size-lg);
  }

  .tabs-navigation {
    gap: var(--space-6);
    margin-bottom: var(--space-16);
  }

  .tab-btn {
    padding: var(--space-8) var(--space-12);
    font-size: var(--font-size-xs);
  }

  .btn {
    padding: var(--space-8) var(--space-12);
    font-size: var(--font-size-sm);
  }

  .filters-container {
    gap: var(--space-12);
    margin-bottom: var(--space-16);
  }

  .loading-container {
    padding: var(--space-24) var(--space-16);
  }

  .empty-state {
    padding: var(--space-24) var(--space-16);
  }

  .empty-icon {
    font-size: 2.5rem;
    margin-bottom: var(--space-12);
  }

  .error-container {
    padding: var(--space-24) var(--space-16);
  }
}
</file>

<file path="frontend/frontend/src/styles/CollegeAdminEventsStyles.css">
:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
```css
/* =====================================================
   COLLEGE ADMIN EVENTS PAGE STYLES
   Add to frontend/src/styles/CollegeAdminDashboard.css
   ===================================================== */

/* =====================================================
   TABS CONTAINER
   ===================================================== */

.tabs-container {
  display: flex;
  gap: var(--space-16);
  margin-bottom: var(--space-32);
  border-bottom: 2px solid var(--color-border);
  padding: 0 var(--space-16);
}

.tab-button {
  padding: var(--space-16) var(--space-24);
  background: none;
  border: none;
  border-bottom: 3px solid transparent;
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  position: relative;
  margin-bottom: -2px;
}

.tab-button:hover {
  color: var(--color-text);
  background: var(--color-secondary);
}

.tab-button:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

.tab-button.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

/* =====================================================
   EVENTS FILTERS
   ===================================================== */

.events-filters {
  display: flex;
  gap: var(--space-20);
  margin-bottom: var(--space-32);
  padding: var(--space-20);
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  flex-wrap: wrap;
  box-shadow: var(--shadow-xs);
}

.search-box {
  flex: 1;
  min-width: 250px;
}

.search-input {
  width: 100%;
  padding: var(--space-10) var(--space-16);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  background-color: var(--color-background);
  color: var(--color-text);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

.search-input::placeholder {
  color: var(--color-text-secondary);
}

.search-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: var(--focus-ring);
}

.filter-category {
  min-width: 200px;
}

.filter-select {
  width: 100%;
  padding: var(--space-10) var(--space-16);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  background-color: var(--color-background);
  color: var(--color-text);
  cursor: pointer;
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

@media (prefers-color-scheme: dark) {
  .filter-select {
    background-image: var(--select-caret-dark);
  }
}

[data-color-scheme="dark"] .filter-select {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] .filter-select {
  background-image: var(--select-caret-light);
}

.filter-select:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: var(--focus-ring);
}

/* =====================================================
   EVENTS CONTAINER & GRID
   ===================================================== */

.events-container {
  margin-bottom: var(--space-32);
}

.events-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap: var(--space-24);
}

/* =====================================================
   EVENT CARD
   ===================================================== */

.event-card {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  overflow: hidden;
  transition: all var(--duration-normal) var(--ease-standard);
  box-shadow: var(--shadow-sm);
  display: flex;
  flex-direction: column;
}

.event-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: var(--color-primary);
}

.event-header {
  padding: var(--space-20);
  border-bottom: 1px solid var(--color-card-border-inner);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--space-16);
}

.event-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
  color: var(--color-text);
  margin: 0;
  flex: 1;
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tight);
}

.event-status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  white-space: nowrap;
}

.status-upcoming {
  background: rgba(var(--color-warning-rgb), var(--status-bg-opacity));
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb), var(--status-border-opacity));
}

.status-past {
  background: rgba(var(--color-info-rgb), var(--status-bg-opacity));
  color: var(--color-info);
  border: 1px solid rgba(var(--color-info-rgb), var(--status-border-opacity));
}

.event-details {
  padding: var(--space-20);
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
  flex: 1;
}

.detail-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.detail-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.detail-value {
  font-size: var(--font-size-base);
  color: var(--color-text);
  line-height: var(--line-height-normal);
}

.event-description {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin: 0;
  line-height: var(--line-height-normal);
}

.registration-badge {
  display: inline-flex;
  align-items: center;
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
  width: fit-content;
}

.event-footer {
  padding: var(--space-16) var(--space-20);
  background: var(--color-secondary);
  border-top: 1px solid var(--color-card-border-inner);
}

.event-location {
  font-size: var(--font-size-sm);
  color: var(--color-text);
  font-weight: var(--font-weight-medium);
}

/* =====================================================
   EMPTY STATE
   ===================================================== */

.empty-state {
  text-align: center;
  padding: calc(var(--space-32) * 1.5) var(--space-32);
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-xs);
}

.empty-icon {
  font-size: 48px;
  margin-bottom: var(--space-16);
  opacity: 0.5;
}

.empty-message {
  color: var(--color-text-secondary);
  font-size: var(--font-size-lg);
  margin: 0;
  line-height: var(--line-height-normal);
}

/* =====================================================
   EVENTS STATS
   ===================================================== */

.events-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-16);
  padding: var(--space-24);
  background: var(--color-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  margin-bottom: var(--space-32);
}

.stat-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-8);
  padding: var(--space-16);
  background: var(--color-surface);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-card-border-inner);
  transition: all var(--duration-normal) var(--ease-standard);
}

.stat-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-sm);
}

.stat-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.stat-value {
  font-size: var(--font-size-2xl);
  color: var(--color-primary);
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-tight);
}

/* =====================================================
   RESPONSIVE - EVENTS PAGE
   ===================================================== */

@media (max-width: 1024px) {
  .events-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }
}

@media (max-width: 768px) {
  .tabs-container {
    flex-wrap: wrap;
    gap: var(--space-8);
    padding: 0 var(--space-8);
  }

  .tab-button {
    padding: var(--space-12) var(--space-16);
    font-size: var(--font-size-base);
  }

  .events-filters {
    flex-direction: column;
    gap: var(--space-12);
    padding: var(--space-16);
  }

  .search-box,
  .filter-category {
    min-width: 100%;
  }

  .events-grid {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-16);
  }

  .event-header {
    flex-direction: column;
    gap: var(--space-12);
    align-items: stretch;
  }

  .event-status {
    align-self: flex-start;
  }

  .event-title {
    font-size: var(--font-size-base);
  }

  .events-stats {
    grid-template-columns: 1fr 1fr;
    gap: var(--space-12);
    padding: var(--space-16);
  }
}

@media (max-width: 480px) {
  .dashboard-content {
    margin: var(--space-16) auto;
    padding: 0 var(--space-12);
  }

  .tabs-container {
    gap: var(--space-4);
    padding: 0 var(--space-4);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .tab-button {
    padding: var(--space-10) var(--space-12);
    font-size: var(--font-size-sm);
    white-space: nowrap;
  }

  .events-filters {
    padding: var(--space-16);
    gap: var(--space-12);
  }

  .search-box {
    min-width: 100%;
  }

  .filter-category {
    min-width: 100%;
  }

  .events-grid {
    grid-template-columns: 1fr;
    gap: var(--space-16);
  }

  .event-card {
    border-radius: var(--radius-md);
  }

  .event-header {
    padding: var(--space-16);
    gap: var(--space-10);
  }

  .event-details {
    padding: var(--space-16);
    gap: var(--space-10);
  }

  .event-footer {
    padding: var(--space-12) var(--space-16);
  }

  .event-title {
    font-size: var(--font-size-base);
  }

  .event-status {
    font-size: 10px;
    padding: var(--space-4) var(--space-8);
  }

  .detail-label {
    font-size: 11px;
  }

  .detail-value {
    font-size: var(--font-size-sm);
  }

  .search-input,
  .filter-select {
    font-size: var(--font-size-sm);
    padding: var(--space-8) var(--space-12);
  }

  .filter-select {
    background-position: right var(--space-8) center;
    padding-right: var(--space-24);
  }

  .empty-state {
    padding: var(--space-32) var(--space-16);
  }

  .empty-icon {
    font-size: 32px;
    margin-bottom: var(--space-12);
  }

  .empty-message {
    font-size: var(--font-size-base);
  }

  .events-stats {
    grid-template-columns: 1fr;
    gap: var(--space-12);
    padding: var(--space-16);
  }

  .stat-item {
    padding: var(--space-12);
  }

  .stat-value {
    font-size: var(--font-size-xl);
  }

  .registration-badge {
    font-size: var(--font-size-xs);
    padding: var(--space-4) var(--space-10);
  }
}
```
</file>

<file path="frontend/frontend/src/styles/CreateEventPage.css">
.create-event-page {
  max-width: 900px;
  margin: 0 auto;
  padding: 40px 20px;
}

.create-event-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40px;
  gap: 20px;
}

.create-event-header h1 {
  margin: 0;
  font-size: 32px;
  color: #111827;
  flex: 1;
}

/* ============ FORM STYLING ============ */

.create-event-form {
  background: white;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: 1px solid #e5e7eb;
}

/* ============ FORM ROWS - FIXED 2 COLUMN LAYOUT ============ */

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 24px;
}

/* Single column for full width sections */
.form-row:has(.form-group:only-child) {
  grid-template-columns: 1fr;
}

/* 3 columns for venue section */
.form-row:has(.form-group:nth-child(3)) {
  grid-template-columns: 1fr 1fr 1fr;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-weight: 600;
  margin-bottom: 10px;
  color: #374151;
  font-size: 14px;
  letter-spacing: 0.5px;
}

.form-group input,
.form-group textarea,
.form-group select {
  padding: 12px 14px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-family: inherit;
  font-size: 14px;
  color: #111827;
  transition: all 0.2s;
  background-color: #ffffff;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  background-color: #f8f9ff;
}

.form-group input::placeholder,
.form-group textarea::placeholder {
  color: #9ca3af;
}

.form-group textarea {
  resize: vertical;
  min-height: 100px;
  font-size: 14px;
}

/* ============ SELECT STYLING ============ */

.form-group select {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px;
  padding-right: 40px;
}

.form-group select:focus {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23667eea' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

/* ============ RADIO GROUP (Registration Type) ============ */

.radio-group {
  display: flex;
  gap: 24px;
  margin-top: 12px;
  align-items: center;
}

.radio-label {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-size: 14px;
  color: #374151;
  user-select: none;
  transition: all 0.2s;
  font-weight: 500;
}

.radio-label input[type='radio'] {
  cursor: pointer;
  width: 18px;
  height: 18px;
  accent-color: #667eea;
  flex-shrink: 0;
  margin: 0;
}

.radio-label input[type='radio']:checked + span {
  color: #667eea;
  font-weight: 600;
}

.radio-label:hover {
  color: #667eea;
}

/* ============ TEAM SIZE INPUT ============ */

.team-size-row {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
}

.team-size-row input {
  flex: 1;
  padding: 12px 14px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  color: #111827;
}

.team-size-row input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.team-size-separator {
  color: #9ca3af;
  font-weight: 600;
  font-size: 13px;
  flex-shrink: 0;
}

/* ============ FORM ACTIONS ============ */

.form-actions {
  display: flex;
  gap: 12px;
  margin-top: 32px;
  padding-top: 24px;
  border-top: 1px solid #e5e7eb;
}

.btn-primary,
.btn-secondary {
  padding: 14px 28px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.btn-primary {
  flex: 1;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}

.btn-primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
}

.btn-primary:active:not(:disabled) {
  transform: translateY(0);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-secondary {
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
  padding: 14px 20px;
}

.btn-secondary:hover {
  background: #e5e7eb;
  transform: translateY(-2px);
}

/* ============ ALERTS ============ */

.alert {
  padding: 14px 16px;
  border-radius: 8px;
  margin-bottom: 24px;
  font-size: 14px;
  border-left: 4px solid;
}

.alert-error {
  background: #fee2e2;
  color: #991b1b;
  border-left-color: #dc2626;
}

.alert-success {
  background: #dcfce7;
  color: #166534;
  border-left-color: #16a34a;
}

/* ============ RESPONSIVE ============ */

@media (max-width: 768px) {
  .create-event-page {
    padding: 20px 15px;
  }

  .create-event-header {
    flex-direction: column;
    align-items: flex-start;
    margin-bottom: 30px;
  }

  .create-event-header h1 {
    font-size: 26px;
  }

  .create-event-form {
    padding: 24px;
  }

  /* All form rows become single column on mobile */
  .form-row {
    grid-template-columns: 1fr !important;
    gap: 16px;
    margin-bottom: 20px;
  }

  .radio-group {
    flex-direction: column;
    gap: 12px;
    align-items: flex-start;
  }

  .form-actions {
    flex-direction: column;
  }

  .btn-primary,
  .btn-secondary {
    width: 100%;
  }

  .team-size-row {
    flex-direction: row;
  }

  .team-size-row input {
    flex: 1;
  }
}

@media (max-width: 480px) {
  .create-event-page {
    padding: 16px 10px;
  }

  .create-event-form {
    padding: 16px;
  }

  .create-event-header h1 {
    font-size: 22px;
  }

  .form-group label {
    font-size: 13px;
  }

  .form-group input,
  .form-group textarea,
  .form-group select {
    font-size: 13px;
    padding: 10px 12px;
  }

  .btn-primary,
  .btn-secondary {
    padding: 12px 20px;
    font-size: 13px;
  }
}
</file>

<file path="frontend/frontend/src/styles/DashboardPage.css">
.dashboard-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 30px 20px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    animation: fadeIn 0.3s ease;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .dashboard-header {
    text-align: center;
    margin-bottom: 40px;
  }
  
  .dashboard-header h1 {
    font-size: 36px;
    color: #212529;
    margin: 0 0 10px 0;
    font-weight: 700;
  }
  
  .subtitle {
    font-size: 16px;
    color: #6c757d;
    margin: 0;
  }
  
  .error-message {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
    border-radius: 8px;
    padding: 15px 20px;
    margin-bottom: 20px;
  }
  
  .error-message p {
    margin: 0;
    font-weight: 500;
  }
  
  .loading-spinner {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    gap: 20px;
  }
  
  .spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #e9ecef;
    border-top-color: #007bff;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  
  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }
  
  .dashboard-tabs {
    display: flex;
    gap: 15px;
    margin-bottom: 30px;
    border-bottom: 2px solid #e9ecef;
  }
  
  .tab-btn {
    background: white;
    border: none;
    padding: 15px 25px;
    font-size: 15px;
    font-weight: 600;
    color: #6c757d;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
    position: relative;
    bottom: -2px;
  }
  
  .tab-btn:hover {
    color: #007bff;
  }
  
  .tab-btn.active {
    color: #007bff;
    border-bottom-color: #007bff;
  }
  
  .tab-content {
    animation: slideIn 0.3s ease;
  }
  
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .empty-state {
    text-align: center;
    padding: 80px 20px;
    background: white;
    border-radius: 8px;
    border: 2px dashed #dee2e6;
  }
  
  .empty-icon {
    font-size: 60px;
    margin: 0 0 20px 0;
    display: block;
  }
  
  .empty-title {
    font-size: 24px;
    color: #212529;
    margin: 0 0 10px 0;
    font-weight: 700;
  }
  
  .empty-desc {
    font-size: 16px;
    color: #6c757d;
    margin: 0 0 20px 0;
  }
  
  .btn-browse,
  .btn-create {
    padding: 12px 24px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .btn-browse:hover,
  .btn-create:hover {
    background: #0056b3;
    transform: translateY(-2px);
  }
  
  .events-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  
  .event-item {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    transition: all 0.3s ease;
  }
  
  .event-item:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
  }
  
  .event-item-left {
    flex: 1;
  }
  
  .event-item h3 {
    font-size: 20px;
    color: #212529;
    margin: 0 0 8px 0;
    font-weight: 700;
  }
  
  .event-category {
    display: inline-block;
    background: #007bff;
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    margin: 0 0 10px 0;
  }
  
  .event-desc {
    color: #6c757d;
    font-size: 14px;
    margin: 0 0 12px 0;
    line-height: 1.5;
  }
  
  .event-meta {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    margin-bottom: 12px;
    font-size: 13px;
    color: #6c757d;
  }
  
  .event-meta span {
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .event-stats {
    display: flex;
    gap: 20px;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #e9ecef;
  }
  
  .stat {
    display: flex;
    flex-direction: column;
    gap: 5px;
  }
  
  .stat-label {
    font-size: 12px;
    color: #6c757d;
    font-weight: 600;
  }
  
  .stat-value {
    font-size: 18px;
    color: #212529;
    font-weight: 700;
  }
  
  .stat-value.active {
    color: #28a745;
  }
  
  .event-item-actions {
    display: flex;
    gap: 10px;
    margin-left: 20px;
    flex-direction: column;
    min-width: 120px;
  }
  
  .btn {
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
  }
  
  .btn-view {
    background: #007bff;
    color: white;
  }
  
  .btn-view:hover {
    background: #0056b3;
  }
  
  .btn-edit {
    background: #ffc107;
    color: #000;
  }
  
  .btn-edit:hover {
    background: #e0a800;
  }
  
  .btn-danger {
    background: #dc3545;
    color: white;
  }
  
  .btn-danger:hover {
    background: #c82333;
  }
  
  @media (max-width: 768px) {
    .dashboard-container {
      padding: 20px 15px;
    }
  
    .dashboard-header h1 {
      font-size: 28px;
    }
  
    .event-item {
      flex-direction: column;
    }
  
    .event-item-actions {
      margin-left: 0;
      margin-top: 15px;
      flex-direction: row;
      min-width: auto;
    }
  
    .dashboard-tabs {
      gap: 8px;
    }
  
    .tab-btn {
      padding: 12px 15px;
      font-size: 13px;
    }
  }
</file>

<file path="frontend/frontend/src/styles/EditEventModal.css">
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
  
  .modal-content {
    background: white;
    border-radius: 12px;
    padding: 32px;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  }
  
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    border-bottom: 2px solid #e5e7eb;
    padding-bottom: 16px;
  }
  
  .modal-header h2 {
    margin: 0;
    color: #1f2937;
    font-size: 22px;
  }
  
  .modal-close {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #6b7280;
    transition: color 0.2s;
  }
  
  .modal-close:hover {
    color: #1f2937;
  }
  
  .form-group {
    margin-bottom: 16px;
  }
  
  .form-group label {
    display: block;
    font-weight: 600;
    color: #374151;
    margin-bottom: 6px;
    font-size: 14px;
  }
  
  .form-group input,
  .form-group textarea,
  .form-group select {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 14px;
    font-family: inherit;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  
  .form-group input:focus,
  .form-group textarea:focus,
  .form-group select:focus {
    outline: none;
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
  }
  
  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
  
  .error-message {
    background: #fee2e2;
    color: #991b1b;
    padding: 12px 16px;
    border-radius: 8px;
    margin-bottom: 16px;
    font-size: 14px;
    border-left: 4px solid #dc2626;
  }
  
  .modal-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
    justify-content: flex-end;
  }
  
  .btn-cancel,
  .btn-save {
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    font-size: 14px;
  }
  
  .btn-cancel {
    background: #e5e7eb;
    color: #374151;
  }
  
  .btn-cancel:hover {
    background: #d1d5db;
  }
  
  .btn-save {
    background: #6366f1;
    color: white;
  }
  
  .btn-save:hover:not(:disabled) {
    background: #4f46e5;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
  }
  
  .btn-save:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  @media (max-width: 768px) {
    .modal-content {
      padding: 24px;
    }
  
    .form-row {
      grid-template-columns: 1fr;
    }
  
    .modal-actions {
      flex-direction: column-reverse;
    }
  
    .btn-cancel,
    .btn-save {
      width: 100%;
    }
  }
</file>

<file path="frontend/frontend/src/styles/NotificationBell.css">
.notification-bell {
    position: relative;
  }
  
  .bell-btn {
    background: none;
    border: none;
    font-size: 22px;
    cursor: pointer;
    position: relative;
    padding: 0;
    transition: transform 0.2s;
    display: flex;
    align-items: center;
  }
  
  .bell-btn:hover {
    transform: scale(1.15);
  }
  
  .bell-btn .badge {
    position: absolute;
    top: -10px;
    right: -10px;
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: #fef2f2;
    font-size: 10px;
    font-weight: 800;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #7f1d1d;
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
    }
  }
  
  .notification-dropdown {
    position: absolute;
    top: 50px;
    right: -220px;
    width: 420px;
    background: #1f2937;
    border-radius: 12px;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    border: 1px solid #374151;
    overflow: hidden;
  }
  
  .dropdown-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 18px;
    border-bottom: 2px solid #374151;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #f3f4f6;
  }
  
  .dropdown-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 700;
    letter-spacing: 0.05em;
  }
  
  .close-btn {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #f3f4f6;
    padding: 4px 8px;
    border-radius: 4px;
    transition: all 0.2s;
  }
  
  .close-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    color: #fff;
  }
  
  .notifications-list {
    max-height: 500px;
    overflow-y: auto;
  }
  
  .notification-item {
    padding: 14px 16px;
    border-bottom: 1px solid #374151;
    transition: all 0.2s;
    background: #1f2937;
  }
  
  .notification-item.unread {
    background: linear-gradient(to right, #312e81 0%, transparent 100%);
    border-left: 4px solid #667eea;
    padding-left: 12px;
  }
  
  .notification-item:hover {
    background: #374151;
  }
  
  .notif-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 4px;
  }
  
  .notif-header h4 {
    margin: 0;
    font-size: 14px;
    font-weight: 700;
    color: #f3f4f6;
    flex: 1;
  }
  
  .notif-badge {
    background: #667eea;
    color: #e0e7ff;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    white-space: nowrap;
  }
  
  .notif-content p {
    margin: 6px 0;
    font-size: 13px;
    color: #d1d5db;
    line-height: 1.5;
  }
  
  .notif-content small {
    font-size: 11px;
    color: #9ca3af;
    display: block;
    margin-top: 6px;
  }
  
  .notif-action-bar {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #374151;
  }
  
  .action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  
  .btn-action {
    padding: 10px 12px;
    border: none;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    white-space: nowrap;
  }
  
  .btn-accept {
    background: linear-gradient(135deg, #10b981, #059669);
    color: #ecfdf5;
    border: 1px solid #059669;
  }
  
  .btn-accept:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
    background: linear-gradient(135deg, #059669, #047857);
  }
  
  .btn-accept:active:not(:disabled) {
    transform: translateY(0);
  }
  
  .btn-decline {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: #fee2e2;
    border: 1px solid #dc2626;
  }
  
  .btn-decline:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
    background: linear-gradient(135deg, #dc2626, #b91c1c);
  }
  
  .btn-decline:active:not(:disabled) {
    transform: translateY(0);
  }
  
  .btn-dismiss {
    background: #374151;
    color: #d1d5db;
    border: 1px solid #4b5563;
    width: 100%;
  }
  
  .btn-dismiss:hover:not(:disabled) {
    background: #4b5563;
    color: #f3f4f6;
  }
  
  .btn-action:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  .empty-notif {
    text-align: center;
    padding: 50px 20px;
    color: #9ca3af;
    font-size: 14px;
    font-weight: 500;
  }
  
  /* Scrollbar styling */
  .notifications-list::-webkit-scrollbar {
    width: 6px;
  }
  
  .notifications-list::-webkit-scrollbar-track {
    background: #1f2937;
  }
  
  .notifications-list::-webkit-scrollbar-thumb {
    background: #4b5563;
    border-radius: 3px;
  }
  
  .notifications-list::-webkit-scrollbar-thumb:hover {
    background: #6b7280;
  }
  
  @media (max-width: 768px) {
    .notification-dropdown {
      right: -80px;
      width: 340px;
    }
  
    .action-buttons {
      grid-template-columns: 1fr;
    }
  }
</file>

<file path="frontend/frontend/src/styles/ProfilePage.css">
/* ============ MODERN PROFILE PAGE ============ */

* {
  box-sizing: border-box;
}

.profile-page {
  background: #f5f7fa;
  min-height: 100vh;
  padding-bottom: 40px;
}

/* ============ HERO SECTION ============ */

.profile-hero {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  position: relative;
  overflow: hidden;
  padding: 60px 20px;
  color: white;
}

.hero-background {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0.1;
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

.hero-content {
  display: flex;
  align-items: center;
  gap: 30px;
  max-width: 900px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
}

.avatar-container {
  flex-shrink: 0;
}

.avatar-image,
.avatar-placeholder {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  border: 5px solid rgba(255, 255, 255, 0.3);
  object-fit: cover;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
}

.avatar-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 56px;
  font-weight: 700;
  background: rgba(255, 255, 255, 0.2);
}

.hero-info h1 {
  margin: 0 0 4px 0;
  font-size: 32px;
  font-weight: 700;
  letter-spacing: -0.5px;
}

.hero-info p {
  margin: 0 0 12px 0;
  font-size: 16px;
  opacity: 0.9;
}

.badge {
  display: inline-block;
  padding: 6px 14px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.badge-student {
  background: rgba(56, 189, 248, 0.2);
  border-color: rgba(56, 189, 248, 0.4);
}

.badge-organizer {
  background: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.4);
}

.badge-admin {
  background: rgba(249, 115, 22, 0.2);
  border-color: rgba(249, 115, 22, 0.4);
}

/* ============ STATS GRID ============ */

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  max-width: 1200px;
  margin: -30px auto 40px;
  padding: 0 20px;
  position: relative;
  z-index: 10;
}

.stat-card {
  display: flex;
  align-items: center;
  gap: 16px;
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

.stat-icon {
  font-size: 32px;
}

.stat-value {
  font-size: 28px;
  font-weight: 700;
  color: #667eea;
}

.stat-label {
  font-size: 12px;
  color: #9ca3af;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-top: 4px;
}

/* ============ ALERTS ============ */

.alert {
  max-width: 1200px;
  margin: 20px auto;
  padding: 14px 18px;
  border-radius: 8px;
  font-size: 14px;
  border-left: 4px solid;
}

.alert-error {
  background: #fef2f2;
  color: #991b1b;
  border-color: #dc2626;
}

.alert-success {
  background: #ecfdf5;
  color: #166534;
  border-color: #16a34a;
}

/* ============ TABS ============ */

.tabs-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.tabs {
  display: flex;
  gap: 8px;
  border-bottom: 2px solid #e5e7eb;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.tab-btn {
  padding: 14px 20px;
  background: none;
  border: none;
  font-size: 14px;
  font-weight: 600;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
  border-bottom: 3px solid transparent;
  margin-bottom: -2px;
  white-space: nowrap;
}

.tab-btn:hover {
  color: #667eea;
}

.tab-btn.active {
  color: #667eea;
  border-color: #667eea;
}

/* ============ CONTENT ============ */

.profile-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 40px 20px;
}

.tab-pane {
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 32px;
  border-bottom: 2px solid #f0f0f0;
  padding-bottom: 16px;
}

.section-header h2 {
  margin: 0;
  font-size: 24px;
  color: #111827;
}

.btn-toggle {
  padding: 8px 14px;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-toggle:hover {
  background: #e5e7eb;
}

.btn-toggle.active {
  background: #667eea;
  color: white;
  border-color: #667eea;
}

/* ============ INFO GRID ============ */

.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 24px;
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.info-item {
  display: flex;
  flex-direction: column;
}

.info-item.full {
  grid-column: 1 / -1;
}

.info-item .label {
  font-size: 11px;
  font-weight: 700;
  color: #9ca3af;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  margin-bottom: 8px;
}

.info-item .value {
  font-size: 15px;
  color: #111827;
  line-height: 1.5;
  word-break: break-word;
}

/* ============ FORMS ============ */

.edit-form {
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 8px;
}

.form-group input,
.form-group select,
.form-group textarea {
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.form-group textarea {
  resize: vertical;
  min-height: 100px;
}

.radio-group {
  display: flex;
  gap: 20px;
  margin-top: 8px;
}

.radio-label,
.checkbox-item {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  user-select: none;
  font-size: 14px;
  color: #374151;
}

.radio-label input[type='radio'],
.checkbox-item input[type='checkbox'] {
  cursor: pointer;
  accent-color: #667eea;
  width: 18px;
  height: 18px;
}

.checkbox-item {
  margin-bottom: 12px;
}

.checkbox-item input:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* ============ PREFERENCES ============ */

.preferences-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 32px;
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.pref-section h3 {
  margin: 0 0 16px 0;
  font-size: 14px;
  font-weight: 700;
  color: #111827;
}

/* ============ SECURITY ============ */

.security-content {
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.account-dates {
  background: #f9fafb;
  padding: 16px;
  border-radius: 8px;
  border-left: 4px solid #667eea;
  margin-bottom: 32px;
}

.account-dates p {
  margin: 8px 0;
  font-size: 14px;
  color: #374151;
}

.password-section h3 {
  margin: 0 0 16px 0;
  font-size: 16px;
  color: #111827;
}

.password-form {
  background: #f9fafb;
  padding: 20px;
  border-radius: 8px;
  margin-top: 16px;
}

.form-actions {
  display: flex;
  gap: 12px;
  margin-top: 16px;
}

/* ============ ACTIONS ============ */

.actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.action-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 28px 20px;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s;
  text-align: center;
}

.action-card:hover:not(:disabled) {
  border-color: #667eea;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
}

.action-card:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.action-icon {
  font-size: 40px;
}

.action-title {
  font-size: 15px;
  font-weight: 700;
  color: #111827;
}

.action-desc {
  font-size: 12px;
  color: #9ca3af;
  line-height: 1.4;
}

/* ============ BUTTONS ============ */

.btn-primary,
.btn-secondary {
  padding: 10px 18px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
}

.btn-primary {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  width: 100%;
}

.btn-primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.btn-secondary {
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
}

.btn-secondary:hover:not(:disabled) {
  background: #e5e7eb;
  border-color: #9ca3af;
}

.btn-primary:disabled,
.btn-secondary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ============ UTILITIES ============ */

.empty-state,
.loader {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 400px;
  color: #6b7280;
  font-size: 16px;
}

.loader {
  font-size: 14px;
}

.loader::after {
  content: '';
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid #e5e7eb;
  border-top-color: #667eea;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
  margin-left: 8px;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.capitalize {
  text-transform: capitalize;
}

/* ============ RESPONSIVE ============ */

@media (max-width: 768px) {
  .profile-hero {
    padding: 40px 20px;
  }

  .hero-content {
    flex-direction: column;
    text-align: center;
    gap: 20px;
  }

  .avatar-image,
  .avatar-placeholder {
    width: 100px;
    height: 100px;
  }

  .hero-info h1 {
    font-size: 24px;
  }

  .stats-grid {
    margin: -20px auto 30px;
  }

  .stat-card {
    flex-direction: column;
    text-align: center;
  }

  .tabs {
    flex-wrap: wrap;
  }

  .info-grid,
  .preferences-grid {
    grid-template-columns: 1fr;
  }

  .form-row {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .preferences-grid {
    gap: 16px;
  }

  .radio-group {
    flex-direction: column;
    gap: 12px;
  }

  .actions-grid {
    grid-template-columns: 1fr;
  }

  .form-actions {
    flex-direction: column;
  }

  .form-actions button {
    width: 100%;
  }
}

@media (max-width: 480px) {
  .profile-page {
    padding-bottom: 20px;
  }

  .profile-hero {
    padding: 30px 16px;
  }

  .avatar-image,
  .avatar-placeholder {
    width: 80px;
    height: 80px;
  }

  .hero-info h1 {
    font-size: 20px;
  }

  .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .btn-toggle {
    width: 100%;
  }

  .edit-form {
    padding: 16px;
  }

  .stats-grid {
    grid-template-columns: 1fr;
    gap: 12px;
    padding: 0 16px;
  }
}
/* ============ EVENTS LIST ============ */

.events-list {
  display: grid;
  gap: 16px;
  margin-top: 20px;
}

.event-item {
  background: white;
  padding: 20px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  transition: all 0.3s;
}

.event-item:hover {
  border-color: #667eea;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
}

.event-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.event-header h3 {
  margin: 0;
  font-size: 18px;
  color: #111827;
}

.category-badge {
  display: inline-block;
  padding: 4px 10px;
  background: #dbeafe;
  color: #1e40af;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.event-desc {
  margin: 0 0 12px 0;
  color: #6b7280;
  font-size: 14px;
  line-height: 1.5;
}

.event-meta {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 12px;
  font-size: 13px;
  color: #9ca3af;
}

.event-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.empty-message {
  text-align: center;
  padding: 40px 20px;
  color: #9ca3af;
  background: #f9fafb;
  border-radius: 12px;
  margin-top: 20px;
}

/* Make stat cards clickable */
.stat-card.cursor-pointer {
  cursor: pointer;
}

.stat-card.cursor-pointer:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 30px rgba(102, 126, 234, 0.2) !important;
}

.capitalize {
  text-transform: capitalize;
}
/* ============ EVENTS TAB STYLES ============ */

.events-list {
  display: grid;
  gap: 16px;
  margin-top: 20px;
}

.event-item {
  background: white;
  padding: 20px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  transition: all 0.3s;
}

.event-item:hover {
  border-color: #667eea;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
}

.event-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
  flex-wrap: wrap;
  gap: 12px;
}

.event-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: #111827;
  flex: 1;
}

.category-badge {
  display: inline-block;
  padding: 4px 12px;
  background: #dbeafe;
  color: #1e40af;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  white-space: nowrap;
}

.event-desc {
  margin: 0 0 12px 0;
  color: #6b7280;
  font-size: 14px;
  line-height: 1.5;
}

.event-meta {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 16px;
  font-size: 13px;
  color: #9ca3af;
}

.event-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.event-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 16px;
  padding: 12px;
  background: #f9fafb;
  border-radius: 8px;
}

.stat {
  display: flex;
  flex-direction: column;
}

.stat-label {
  font-size: 11px;
  font-weight: 600;
  color: #9ca3af;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.stat-value {
  font-size: 16px;
  font-weight: 700;
  color: #667eea;
  margin-top: 4px;
}

.stat-value.active {
  color: #16a34a;
}

.event-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.btn-secondary {
  flex: 1;
  min-width: 120px;
  padding: 10px 14px;
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-secondary:hover:not(:disabled) {
  background: #e5e7eb;
  border-color: #9ca3af;
}

.btn-secondary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-danger {
  flex: 1;
  min-width: 120px;
  padding: 10px 14px;
  background: #fee2e2;
  color: #991b1b;
  border: 1px solid #fecaca;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-danger:hover:not(:disabled) {
  background: #fecaca;
  border-color: #dc2626;
}

.btn-danger:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.empty-message {
  text-align: center;
  padding: 40px 20px;
  color: #9ca3af;
  background: #f9fafb;
  border-radius: 12px;
  margin-top: 20px;
}

.empty-message p {
  margin: 0;
  font-size: 16px;
  font-weight: 500;
  color: #6b7280;
}

/* Responsive */
@media (max-width: 768px) {
  .event-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .event-stats {
    grid-template-columns: 1fr;
  }

  .event-actions {
    flex-direction: column;
  }

  .btn-secondary,
  .btn-danger {
    width: 100%;
  }
}

.btn-view-details,
.btn-edit,
.btn-delete {
  flex: 1;
  padding: 10px 16px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 13px;
}

.btn-view-details {
  background: #dbeafe;
  color: #1e40af;
}

.btn-view-details:hover {
  background: #bfdbfe;
  transform: translateY(-2px);
}

.btn-edit {
  background: #fef3c7;
  color: #92400e;
}

.btn-edit:hover {
  background: #fde68a;
  transform: translateY(-2px);
}

.btn-delete {
  background: #fee2e2;
  color: #991b1b;
}

.btn-delete:hover {
  background: #fecaca;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);
}

.btn-delete:active {
  transform: translateY(0);
}

@media (max-width: 768px) {
  .event-actions {
    flex-direction: column;
  }

  .btn-view-details,
  .btn-edit,
  .btn-delete {
    width: 100%;
  }
}
</file>

<file path="frontend/frontend/src/styles/TeamPage.css">
.team-page {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
  }
  
  .team-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
  }
  
  .team-header h1 {
    margin: 0;
    font-size: 32px;
    color: #111827;
  }
  
  .team-form {
    background: white;
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    margin-bottom: 40px;
  }
  
  .team-form h2 {
    margin: 0 0 20px 0;
    font-size: 20px;
  }
  
  .form-group {
    margin-bottom: 16px;
  }
  
  .form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: #374151;
  }
  
  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-family: inherit;
    font-size: 14px;
  }
  
  .invites-section,
  .teams-section {
    margin-bottom: 40px;
  }
  
  .invites-section h2,
  .teams-section h2 {
    margin: 0 0 20px 0;
    font-size: 20px;
    color: #111827;
  }
  
  .invites-list {
    display: grid;
    gap: 12px;
  }
  
  .invite-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: white;
    padding: 16px;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
  }
  
  .invite-card h3 {
    margin: 0;
    font-size: 16px;
    color: #111827;
  }
  
  .invite-card p {
    margin: 4px 0 0 0;
    color: #6b7280;
    font-size: 13px;
  }
  
  .invite-actions {
    display: flex;
    gap: 8px;
  }
  
  .teams-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
  }
  
  .team-card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: all 0.3s;
  }
  
  .team-card:hover {
    border-color: #667eea;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
  }
  
  .team-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  
  .team-card-header h3 {
    margin: 0;
    font-size: 18px;
    color: #111827;
  }
  
  .badge-leader {
    background: #dbeafe;
    color: #1e40af;
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
  }
  
  .team-desc {
    margin: 0 0 12px 0;
    color: #6b7280;
    font-size: 14px;
  }
  
  .team-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 16px;
    padding: 12px;
    background: #f9fafb;
    border-radius: 8px;
  }
  
  .stat {
    display: flex;
    flex-direction: column;
  }
  
  .stat-label {
    font-size: 11px;
    color: #9ca3af;
    text-transform: uppercase;
    font-weight: 600;
  }
  
  .stat-value {
    font-size: 18px;
    font-weight: 700;
    color: #667eea;
    margin-top: 4px;
  }
  
  .members-list {
    margin-bottom: 16px;
  }
  
  .members-list h4 {
    margin: 0 0 8px 0;
    font-size: 13px;
    color: #6b7280;
    text-transform: uppercase;
    font-weight: 600;
  }
  
  .member-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px;
    background: #f9fafb;
    border-radius: 6px;
    font-size: 13px;
    margin-bottom: 6px;
  }
  
  .member-status {
    background: #dbeafe;
    color: #1e40af;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
  }
  
  .invite-form {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
  }
  
  .invite-form input {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 13px;
  }
  
  .empty-message {
    text-align: center;
    padding: 60px 20px;
    color: #9ca3af;
  }
  
  /* ============ BUTTONS ============ */
  
  .btn-primary,
  .btn-secondary {
    padding: 10px 16px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    font-size: 13px;
  }
  
  .btn-primary {
    flex: 1;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
  }
  
  .btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
  }
  
  .btn-secondary {
    background: #f3f4f6;
    color: #374151;
    border: 1px solid #d1d5db;
  }
  
  .btn-secondary:hover {
    background: #e5e7eb;
  }
  
  .btn-danger {
    padding: 8px 12px;
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: #fef2f2;
    border: 1px solid #dc2626;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    flex-shrink: 0;
    white-space: nowrap;
  }
  
  .btn-danger:hover:not(:disabled) {
    background: linear-gradient(135deg, #dc2626, #b91c1c);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
  }
  
  .btn-danger:active:not(:disabled) {
    transform: translateY(0);
  }
  
  .btn-danger:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  /* ============ TEAM ACTIONS ============ */
  
  .team-actions {
    display: flex;
    gap: 10px;
    margin-top: 16px;
    align-items: center;
  }
  
  /* ============ ALERTS ============ */
  
  .alert {
    padding: 12px 16px;
    border-radius: 8px;
    margin-bottom: 20px;
    font-size: 14px;
  }
  
  .alert-error {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #fecaca;
  }
  
  .alert-success {
    background: #dcfce7;
    color: #166534;
    border: 1px solid #bbf7d0;
  }
  
  /* ============ RESPONSIVE ============ */
  
  @media (max-width: 768px) {
    .teams-grid {
      grid-template-columns: 1fr;
    }
  
    .team-header {
      flex-direction: column;
      gap: 16px;
    }
  
    .team-actions {
      flex-direction: column;
    }
  
    .btn-primary {
      width: 100%;
    }
  
    .btn-danger {
      width: 100%;
    }
  }
</file>

<file path="frontend/frontend/src/styles/ViewParticipantsModal.css">
:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
/* Participants Modal Styles */

.participants-modal {
  max-width: 1000px !important;
  max-height: 90vh !important;
  display: flex;
  flex-direction: column;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--space-20);
  border-bottom: 2px solid var(--color-border);
  padding-bottom: var(--space-16);
}

.modal-header h2 {
  margin: 0;
  color: var(--color-text);
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
}

.event-title {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin-top: var(--space-4);
  margin-bottom: 0;
}

/* Stats Section */
.participants-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--space-12);
  margin-bottom: var(--space-20);
  padding: var(--space-12);
  background: var(--color-secondary);
  border-radius: var(--radius-base);
  border: 1px solid var(--color-card-border);
}

.stat {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.stat .label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.stat .value {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
}

/* Filters Section */
.filters-section {
  margin-bottom: var(--space-20);
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
}

.search-box {
  flex: 1;
}

.search-input {
  width: 100%;
  padding: var(--space-10) var(--space-12);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  background-color: var(--color-surface);
  color: var(--color-text);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

.search-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: var(--focus-ring);
}

.filter-controls {
  display: flex;
  gap: var(--space-12);
  flex-wrap: wrap;
}

.sort-select {
  padding: var(--space-10) var(--space-12);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-size: var(--font-size-sm);
  font-family: var(--font-family-base);
  background-color: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
  transition: border-color var(--duration-fast) var(--ease-standard);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

@media (prefers-color-scheme: dark) {
  .sort-select {
    background-image: var(--select-caret-dark);
  }
}

[data-color-scheme="dark"] .sort-select {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] .sort-select {
  background-image: var(--select-caret-light);
}

.sort-select:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: var(--focus-ring);
}

.btn-export {
  padding: var(--space-10) var(--space-16);
  background: var(--color-success);
  color: var(--color-btn-primary-text);
  border: none;
  border-radius: var(--radius-base);
  font-weight: var(--font-weight-semibold);
  font-family: var(--font-family-base);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  font-size: var(--font-size-sm);
  white-space: nowrap;
  box-shadow: var(--shadow-xs);
}

.btn-export:hover {
  filter: brightness(1.1);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn-export:active {
  transform: translateY(0);
  box-shadow: var(--shadow-xs);
}

.btn-export:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

/* Table Styles */
.participants-table-wrapper {
  flex: 1;
  overflow: auto;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  margin-bottom: var(--space-12);
  background-color: var(--color-surface);
}

.participants-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--font-size-sm);
  font-family: var(--font-family-base);
}

.participants-table thead {
  position: sticky;
  top: 0;
  background: var(--color-secondary);
  z-index: 10;
}

.participants-table th {
  padding: var(--space-12);
  text-align: left;
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  border-bottom: 2px solid var(--color-border);
  white-space: nowrap;
  font-size: var(--font-size-sm);
}

.participants-table td {
  padding: var(--space-12);
  border-bottom: 1px solid var(--color-card-border-inner);
  color: var(--color-text);
}

.participant-row:hover {
  background: var(--color-secondary);
}

.participant-row:last-child td {
  border-bottom: none;
}

.participants-table td.index {
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
  width: 40px;
  text-align: center;
}

.participants-table td.name {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
}

.participants-table td.email a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

.participants-table td.email a:hover {
  color: var(--color-primary-hover);
  text-decoration: underline;
}

.participants-table td.username {
  color: var(--color-text-secondary);
  font-family: var(--font-family-mono);
  font-size: var(--font-size-sm);
}

.participants-table td.college-id {
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.participants-table td.department {
  color: var(--color-text-secondary);
}

.participants-table td.year {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 40px var(--space-20);
  color: var(--color-text-secondary);
}

.empty-state p {
  margin: 0;
  font-size: var(--font-size-base);
}

/* Results Info */
.results-info {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  padding: var(--space-8) 0;
  text-align: right;
}

/* Modal Footer */
.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-8);
  padding-top: var(--space-16);
  border-top: 1px solid var(--color-border);
}

.btn-close {
  padding: var(--space-10) var(--space-20);
  background: var(--color-secondary);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-weight: var(--font-weight-semibold);
  font-family: var(--font-family-base);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-standard);
  font-size: var(--font-size-base);
}

.btn-close:hover {
  background: var(--color-secondary-hover);
}

.btn-close:active {
  background: var(--color-secondary-active);
}

.btn-close:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

/* Responsive - Mobile Portrait */
@media (max-width: 480px) {
  .participants-modal {
    max-width: 100vw !important;
    max-height: 100vh !important;
    border-radius: 0;
  }

  .modal-header {
    margin-bottom: var(--space-16);
    padding-bottom: var(--space-12);
  }

  .modal-header h2 {
    font-size: var(--font-size-xl);
  }

  .event-title {
    font-size: var(--font-size-xs);
  }

  .participants-stats {
    grid-template-columns: 1fr;
    gap: var(--space-8);
    padding: var(--space-8);
    margin-bottom: var(--space-16);
  }

  .stat .value {
    font-size: var(--font-size-lg);
  }

  .filters-section {
    margin-bottom: var(--space-16);
    gap: var(--space-8);
  }

  .search-input {
    padding: var(--space-8) var(--space-10);
    font-size: var(--font-size-sm);
  }

  .filter-controls {
    flex-direction: column;
    gap: var(--space-8);
  }

  .sort-select,
  .btn-export {
    width: 100%;
    padding: var(--space-8) var(--space-12);
  }

  .participants-table {
    font-size: var(--font-size-xs);
  }

  .participants-table th,
  .participants-table td {
    padding: var(--space-6);
  }

  /* Hide less important columns on mobile */
  .participants-table th:nth-child(5),
  .participants-table td:nth-child(5),
  .participants-table th:nth-child(6),
  .participants-table td:nth-child(6),
  .participants-table th:nth-child(7),
  .participants-table td:nth-child(7) {
    display: none;
  }

  .modal-footer {
    padding-top: var(--space-12);
    gap: var(--space-6);
  }

  .btn-close {
    padding: var(--space-8) var(--space-16);
    font-size: var(--font-size-sm);
  }

  .empty-state {
    padding: var(--space-32) var(--space-16);
  }

  .results-info {
    font-size: var(--font-size-xs);
    padding: var(--space-6) 0;
  }
}

/* Responsive - Tablet */
@media (max-width: 768px) and (min-width: 481px) {
  .participants-modal {
    max-width: 95vw !important;
    max-height: 95vh !important;
  }

  .participants-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .participants-table {
    font-size: var(--font-size-sm);
  }

  .participants-table th,
  .participants-table td {
    padding: var(--space-8);
  }

  .filter-controls {
    flex-wrap: wrap;
  }

  .sort-select {
    flex: 1;
    min-width: 200px;
  }

  .btn-export {
    flex: 0 1 auto;
  }

  /* Hide some columns on tablet */
  .participants-table th:nth-child(6),
  .participants-table td:nth-child(6),
  .participants-table th:nth-child(7),
  .participants-table td:nth-child(7) {
    display: none;
  }
}
</file>

<file path="frontend/frontend/vite.config.js">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})
</file>

<file path="package.json">
{
  "dependencies": {
    "axios": "^1.13.2",
    "bcryptjs": "^3.0.3",
    "cloudinary": "^2.8.0",
    "compression": "^1.8.1",
    "cookie-parser": "^1.4.7",
    "cors": "^2.8.5",
    "dotenv": "^17.2.3",
    "express": "^5.1.0",
    "express-mongo-sanitize": "^2.2.0",
    "express-rate-limit": "^8.2.1",
    "express-validator": "^7.3.0",
    "helmet": "^8.1.0",
    "joi": "^18.0.1",
    "jsonwebtoken": "^9.0.2",
    "mongoose": "^8.19.3",
    "morgan": "^1.10.1",
    "multer": "^2.0.2",
    "nodemailer": "^7.0.10",
    "passport": "^0.7.0",
    "passport-google-oauth20": "^2.0.0",
    "react-router-dom": "^7.9.5",
    "socket.io": "^4.8.1"
  },
  "devDependencies": {
    "nodemon": "^3.1.11"
  }
}
</file>

<file path=".gitignore">
# === Core dependencies ===
node_modules/

# === Build outputs ===
dist/
build/
out/
.vercel/
.next/
.vite/
.vite-temp/

# === Env files ===
.env
.env.local
.env.*.local

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="backend/.gitignore">
# === Core dependencies ===
node_modules/

# === Build outputs ===
dist/
build/
out/
.vercel/
.next/
.vite/
.vite-temp/

# === Cache ===
*.local

# === Env files ===
.env
.env.*.local

# === Logs ===
*.log

# === Editor folders ===
.vscode/
.idea/
.DS_Store
</file>

<file path="backend/src/config/db.js">
const mongoose = require("mongoose");

const connectDB = async () => {
  try {
    console.log(
      "üîç Attempting to connect with MONGO_URI:",
      process.env.MONGO_URI
    );

    const conn = await mongoose.connect(process.env.MONGO_URI, {
      useNewUrlParser: true,
      useUnifiedTopology: true,
    });

    console.log(`‚úÖ MongoDB Connected: ${conn.connection.host}`);
    return conn;
  } catch (error) {
    console.error(`‚ùå Error connecting to MongoDB: ${error.message}`);
    process.exit(1);
  }
};

module.exports = connectDB;
</file>

<file path="backend/src/controllers/authController.js">
const User = require('../models/User');
const { sendTokenResponse } = require('../utils/jwt.util');
const { findPrincipalByUSN } = require('../utils/usnGrouping');

// @desc    Register user
// @route   POST /api/auth/register
// @access  Public
exports.register = async (req, res) => {
  try {
    const { username, email, password, usn, fullName, department, year, phone, role } = req.body;

    // Validate that required fields are provided
    if (!username || !email || !password || !fullName) {
      return res.status(400).json({ 
        success: false,
        message: 'Please provide all required fields' 
      });
    }

    // Check if user with this email or username already exists
    const existingUser = await User.findOne({ 
      $or: [{ email }, { username }] 
    });

    if (existingUser) {
      return res.status(400).json({ 
        success: false,
        message: 'User with this email or username already exists' 
      });
    }

    // NEW: Try to find principal by USN, but don't fail if not found
    let principalId = null;
    if (usn && role === "student") {
      try {
        const principal = await findPrincipalByUSN(usn);
        if (principal) {
          principalId = principal._id;
        }
      } catch (err) {
        console.log("Principal not found for USN:", usn, "- Student registered without principal assignment");
      }
    }

    // Create new user
    const user = await User.create({
      username,
      email,
      password,
      usn,                    // Changed from collegeId
      principalId: principalId,  // NEW: null if principal not found
      role: role || 'student',
      profile: {
        fullName,
        department,
        year,
        phone
      }
    });

    // Send token response (logs user in automatically after registration)
    sendTokenResponse(user, 201, res);

  } catch (error) {
    res.status(500).json({ 
      success: false,
      message: error.message 
    });
  }
};

// @desc    Login user
// @route   POST /api/auth/login
// @access  Public
exports.login = async (req, res) => {
  try {
    const { email, password } = req.body;

    // Validate input
    if (!email || !password) {
      return res.status(400).json({ 
        success: false,
        message: 'Please provide email and password' 
      });
    }

    // Find user by email (include password field since it's normally hidden)
    const user = await User.findOne({ email }).select('+password');

    if (!user) {
      return res.status(401).json({ 
        success: false,
        message: 'Invalid credentials' 
      });
    }

    // Compare provided password with hashed password in database
    const isPasswordMatch = await user.comparePassword(password);

    if (!isPasswordMatch) {
      return res.status(401).json({ 
        success: false,
        message: 'Invalid credentials' 
      });
    }

    // Send token response
    sendTokenResponse(user, 200, res);

  } catch (error) {
    res.status(500).json({ 
      success: false,
      message: error.message 
    });
  }
};

// @desc    Get current logged in user
// @route   GET /api/auth/me
// @access  Private (requires token)
exports.getMe = async (req, res) => {
  try {
    // req.user is set by the protect middleware
    const user = await User.findById(req.user.id);

    res.status(200).json({
      success: true,
      user
    });
  } catch (error) {
    res.status(500).json({ 
      success: false,
      message: error.message 
    });
  }
};

// @desc    Logout user
// @route   POST /api/auth/logout
// @access  Private
exports.logout = async (req, res) => {
  res.status(200).json({
    success: true,
    message: 'Logged out successfully'
  });
};
</file>

<file path="backend/src/controllers/eventController.js">
const Event = require("../models/Event");
const User = require("../models/User"); // ‚úÖ use User instead of Organizer

// @desc    Get all events
// @route   GET /api/events
// @access  Public
exports.getAllEvents = async (req, res) => {
  try {
    const events = await Event.find().populate(
      "organizerId",
      "username profile.fullName email clubName role"
    );

    res.json({
      success: true,
      count: events.length,
      data: events,
    });
  } catch (error) {
    console.error("Error in getAllEvents:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};

// @desc    Get single event by ID
// @route   GET /api/events/:id
// @access  Public
exports.getEventById = async (req, res) => {
  try {
    const event = await Event.findById(req.params.id)
      .populate(
        "organizerId",
        "clubName username profile.fullName email profile.phone role"
      )
      .populate("participants", "profile.fullName email profile.phone");

    if (!event) {
      return res.status(404).json({
        success: false,
        message: "Event not found",
      });
    }

    res.json({
      success: true,
      data: event,
    });
  } catch (error) {
    console.error("Error in getEventById:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};

// @desc    Get events by organizer
// @route   GET /api/events/organizer/:organizerId
// @access  Public
exports.getEventsByOrganizer = async (req, res) => {
  try {
    const { organizerId } = req.params;

    // Verify organizer exists in User collection with organizer role
    const organizer = await User.findById(organizerId);
    if (!organizer || organizer.role !== "organizer") {
      return res.status(404).json({
        success: false,
        message: "Organizer not found",
      });
    }

    const events = await Event.find({ organizerId })
      .populate(
        "organizerId",
        "clubName username profile.fullName email profile.phone role"
      )
      .populate("participants", "profile.fullName email profile.phone")
      .sort({ "dates.startDate": 1 });

    res.json({
      success: true,
      count: events.length,
      data: events,
    });
  } catch (error) {
    console.error("Error in getEventsByOrganizer:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};

// @desc    Create new event
// @route   POST /api/events
// @access  Private (Organizer only)
exports.createEvent = async (req, res) => {
  try {
    const {
      title,
      description,
      category,
      venue,
      dates,
      rules,
      prizes,
      registrationType,
      teamSize,
      maxParticipants,
      organizerId, // optional override
    } = req.body;

    if (!title || !description || !category || !dates) {
      return res.status(400).json({
        success: false,
        message:
          "Please provide all required fields (title, description, category, dates)",
      });
    }

    const finalOrganizerId = organizerId || req.user._id;

    console.log("üîµ Creating event with organizerId:", finalOrganizerId);

    // Verify organizer in User collection
    const organizer = await User.findById(finalOrganizerId);
    if (!organizer || organizer.role !== "organizer") {
      return res.status(404).json({
        success: false,
        message: "Organizer not found",
      });
    }

    const event = await Event.create({
      title,
      description,
      category,
      organizerId: finalOrganizerId,
      venue,
      dates,
      rules: rules || [],
      prizes: prizes || [],
      registrationType: registrationType || "individual",
      teamSize: teamSize || { min: 1, max: 1 },
      maxParticipants: maxParticipants || 100,
      status: "published",
      participants: [],
    });

    console.log("‚úÖ Event created:", event._id);

    await event.populate(
      "organizerId",
      "clubName username profile.fullName email profile.phone role"
    );

    res.status(201).json({
      success: true,
      message: "Event created successfully",
      data: event,
    });
  } catch (error) {
    console.error("‚ùå Error in createEvent:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};

// @desc    Update event
// @route   PUT /api/events/:id
// @access  Private (Organizer only)
exports.updateEvent = async (req, res) => {
  try {
    let event = await Event.findById(req.params.id);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: "Event not found",
      });
    }

    if (event.organizerId.toString() !== req.user._id.toString()) {
      return res.status(403).json({
        success: false,
        message: "Not authorized to update this event",
      });
    }

    event = await Event.findByIdAndUpdate(req.params.id, req.body, {
      new: true,
      runValidators: true,
    }).populate(
      "organizerId",
      "clubName username profile.fullName email profile.phone role"
    );

    res.status(200).json({
      success: true,
      message: "Event updated successfully",
      data: event,
    });
  } catch (error) {
    console.error("Error in updateEvent:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};

// @desc    Delete event
// @route   DELETE /api/events/:id
// @access  Private (Organizer only)
exports.deleteEvent = async (req, res) => {
  try {
    const event = await Event.findById(req.params.id);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: "Event not found",
      });
    }

    if (event.organizerId.toString() !== req.user._id.toString()) {
      return res.status(403).json({
        success: false,
        message: "Not authorized to delete this event",
      });
    }

    await Event.findByIdAndDelete(req.params.id);

    res.status(200).json({
      success: true,
      message: "Event deleted successfully",
    });
  } catch (error) {
    console.error("Error in deleteEvent:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};

// @desc    Register participant for event
// @route   POST /api/events/:id/register
// @access  Private (Student)
exports.registerParticipant = async (req, res) => {
  try {
    const event = await Event.findById(req.params.id);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: "Event not found",
      });
    }

    if (event.participants.includes(req.user._id)) {
      return res.status(400).json({
        success: false,
        message: "Already registered for this event",
      });
    }

    if (event.participants.length >= event.maxParticipants) {
      return res.status(400).json({
        success: false,
        message: "Event is full. Registration closed.",
      });
    }

    if (new Date() > new Date(event.dates.registrationDeadline)) {
      return res.status(400).json({
        success: false,
        message: "Registration deadline has passed",
      });
    }

    event.participants.push(req.user._id);
    await event.save();

    res.json({
      success: true,
      message: "Registered successfully for the event",
      data: event,
    });
  } catch (error) {
    console.error("Error in registerParticipant:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};

// @desc    Unregister participant from event
// @route   DELETE /api/events/:id/register
// @access  Private (Student)
exports.unregisterParticipant = async (req, res) => {
  try {
    const event = await Event.findById(req.params.id);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: "Event not found",
      });
    }

    if (!event.participants.includes(req.user._id)) {
      return res.status(400).json({
        success: false,
        message: "Not registered for this event",
      });
    }

    event.participants = event.participants.filter(
      (id) => id.toString() !== req.user._id.toString()
    );
    await event.save();

    res.json({
      success: true,
      message: "Unregistered successfully from the event",
      data: event,
    });
  } catch (error) {
    console.error("Error in unregisterParticipant:", error);
    res.status(500).json({
      success: false,
      message: error.message,
    });
  }
};
</file>

<file path="backend/src/models/Event.js">
const mongoose = require('mongoose');

const eventSchema = new mongoose.Schema(
  {
    title: {
      type: String,
      required: [true, 'Event title is required'],
      trim: true,
      index: true,
    },
    description: {
      type: String,
      required: [true, 'Event description is required'],
    },
    category: {
      type: String,
      required: true,
      enum: ['hackathon', 'cultural', 'workshop', 'sports', 'technical', 'competition', 'seminar'],
      index: true,
    },
    
    // ============ ORGANIZER REFERENCE (now User) ============
organizerId: {
  type: mongoose.Schema.Types.ObjectId,
  ref: 'User',          // ‚úÖ CHANGE THIS from 'Organizer' to 'User'
  required: true,
  index: true,
},
    
    venue: {
      name: String,
      location: String,
      capacity: Number,
    },
    dates: {
      startDate: {
        type: Date,
        required: true,
        index: true,
      },
      endDate: {
        type: Date,
        required: true,
      },
      registrationDeadline: {
        type: Date,
        required: true,
      },
    },
    poster: {
      type: String,
      default: null,
    },
    rules: [String],
    prizes: [
      {
        position: String,
        prize: String,
        amount: Number,
      },
    ],

    // ============ REGISTRATION TYPE ============
    registrationType: {
      type: String,
      enum: ['individual', 'team'],
      default: 'individual',
      required: true,
    },

    // ============ TEAM CONFIGURATION (for team-based events) ============
    teamSize: {
      min: {
        type: Number,
        default: 1,
      },
      max: {
        type: Number,
        default: 1,
      },
    },

    // ============ CAPACITY ============
    maxParticipants: {
      type: Number,
      default: 100,
    },

    // ============ INDIVIDUAL REGISTRATIONS ============
    participants: [
      {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'User',
      },
    ],

    // ============ TEAM REGISTRATIONS (for team-based events) ============
    teamRegistrations: [
      {
        teamId: {
          type: mongoose.Schema.Types.ObjectId,
          ref: 'Team',
        },
        registeredAt: {
          type: Date,
          default: Date.now,
        },
        members: [
          {
            userId: {
              type: mongoose.Schema.Types.ObjectId,
              ref: 'User',
            },
          },
        ],
      },
    ],

    status: {
      type: String,
      enum: ['draft', 'published', 'ongoing', 'completed', 'cancelled'],
      default: 'draft',
      index: true,
    },

    visibility: {
      type: String,
      enum: ['public', 'private'],
      default: 'public',
    },
  },
  {
    timestamps: true,
  }
);

// ============ VIRTUAL: Get participant count (works for both individual and team) ============
eventSchema.virtual('participantCount').get(function () {
  if (this.registrationType === 'individual') {
    return this.participants?.length || 0;
  } else {
    // Count all members in team registrations
    return (
      this.teamRegistrations?.reduce((total, reg) => total + (reg.members?.length || 0), 0) || 0
    );
  }
});

// ============ VIRTUAL: Get team count ============
eventSchema.virtual('teamCount').get(function () {
  if (this.registrationType === 'team') {
    return this.teamRegistrations?.length || 0;
  }
  return 0;
});

module.exports = mongoose.model('Event', eventSchema);
</file>

<file path="backend/src/models/User.js">
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');

const userSchema = new mongoose.Schema(
  {
    username: {
      type: String,
      required: [true, 'Username is required'],
      unique: true,
      trim: true,
      minlength: 3,
    },
    email: {
      type: String,
      required: [true, 'Email is required'],
      unique: true,
      lowercase: true,
      match: [/^\S+@\S+\.\S+$/, 'Please provide a valid email'],
    },
    password: {
      type: String,
      required: [true, 'Password is required'],
      minlength: 6,
      select: false,
    },
    usn: { 
      type: String, 
      trim: true 
    },  // e.g., "1SI21CS001"
    principalId: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "User",
      default: null,
    },  // Link to principal (null if not found)
    
    role: {
      type: String,
      enum: ['student', 'organizer', 'admin',"collegeAdmin"],
      default: 'student',
    },

    // ============ PROFILE FIELDS ============
    profile: {
      fullName: {
        type: String,
        required: true,
      },
      department: String,
      year: Number,
      phone: String,
      avatar: {
        type: String,
        default: null,
      },
      bio: String,
      skills: String, // comma-separated
    },

    // ============ CONTACT PREFERENCES ============
    contactPreferences: {
      preferredChannel: {
        type: String,
        enum: ['email', 'whatsapp', 'in-app'],
        default: 'email',
      },
      alternateEmail: String,
      whatsappNumber: String,
    },

    // ============ NOTIFICATION SETTINGS ============
    notificationSettings: {
      email: {
        registration: {
          type: Boolean,
          default: true,
        },
        reminders: {
          type: Boolean,
          default: true,
        },
        results: {
          type: Boolean,
          default: true,
        },
        announcements: {
          type: Boolean,
          default: true,
        },
      },
      inApp: {
        announcements: {
          type: Boolean,
          default: true,
        },
        systemAlerts: {
          type: Boolean,
          default: true,
        },
        results: {
          type: Boolean,
          default: true,
        },
      },
    },

    // ============ ACCOUNT TRACKING ============
    isActive: {
      type: Boolean,
      default: true,
    },
    lastLogin: {
      type: Date,
      default: null,
    },
    // ============ TEAM RELATED ============
teams: [
  {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Team'
  }
],

teamInvites: [
  {
    teamId: {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'Team'
    },
    status: {
      type: String,
      enum: ['pending', 'accepted', 'declined'],
      default: 'pending'
    },
    invitedAt: {
      type: Date,
      default: Date.now
    }
  }
]
  },
  {
    timestamps: true, // createdAt, updatedAt
  }
);

// ============ HASH PASSWORD BEFORE SAVING ============
userSchema.pre('save', async function (next) {
  if (!this.isModified('password')) {
    return next();
  }

  try {
    const salt = await bcrypt.genSalt(12);
    this.password = await bcrypt.hash(this.password, salt);
    next();
  } catch (error) {
    next(error);
  }
});

// ============ COMPARE PASSWORD METHOD ============
userSchema.methods.comparePassword = async function (candidatePassword) {
  return await bcrypt.compare(candidatePassword, this.password);
};

module.exports = mongoose.model('User', userSchema);
</file>

<file path="backend/src/package.json">
{
  "name": "src",
  "version": "1.0.0",
  "main": "server.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": "",
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
</file>

<file path="backend/src/routes/event.routes.js">
const express = require('express');
const router = express.Router();
const Event = require('../models/Event');
const Team = require('../models/Team');
const User = require('../models/User');
const { protect } = require('../middleware/auth.middleware');

// ============ CREATE EVENT (POST before all GET routes) ============
router.post('/', protect, async (req, res) => {
  try {
    const {
      title,
      description,
      category,
      location,
      maxParticipants,
      registrationType,
      teamSize,
      startDate,
      endDate,
      registrationDeadline,
    } = req.body;

    console.log('üì• CREATE EVENT - Request body:', req.body);

    if (!title || !description || !startDate || !endDate || !category) {
      console.log('‚ùå Validation failed');
      return res.status(400).json({
        success: false,
        message: 'Title, description, category, startDate and endDate are required',
      });
    }

    const event = new Event({
      title: title.trim(),
      description: description.trim(),
      category,
      organizerId: req.user.id,
      venue: {
        location: location || 'TBD',
      },
      dates: {
        startDate: new Date(startDate),
        endDate: new Date(endDate),
        registrationDeadline: registrationDeadline
          ? new Date(registrationDeadline)
          : new Date(endDate),
      },
      maxParticipants: maxParticipants || 100,
      registrationType: registrationType || 'individual',
      teamSize: teamSize || { min: 1, max: 1 },
      status: 'published',
      visibility: 'public',
      participants: [],
      teamRegistrations: [],
    });

    console.log('üíæ Saving event...');
    await event.save();
    console.log('‚úÖ Event created:', event.title);

    res.status(201).json({
      success: true,
      message: 'Event created successfully',
      data: event,
    });
  } catch (error) {
    console.error('‚ùå CREATE EVENT ERROR:', error);
    res.status(500).json({
      success: false,
      message: 'Server error: ' + error.message,
    });
  }
});

// ============ GET MY REGISTERED EVENTS ============
router.get('/my-events/registered', protect, async (req, res) => {
  try {
    console.log('üì• Fetching my registered events for user:', req.user.id);

    // Query for events where user is:
    // 1. In participants array (individual registration)
    // 2. In any team member list (team registration)
    const events = await Event.find({
      $or: [
        { participants: req.user.id },
        { 'teamRegistrations.members.userId': req.user.id },
      ],
    })
      .populate('organizerId', 'username profile.fullName')
      .populate('teamRegistrations.teamId', 'name')
      .populate('teamRegistrations.members.userId', 'username profile.fullName')
      .populate('participants', 'username profile.fullName')
      .sort({ 'dates.startDate': -1 });

    console.log('‚úÖ Found', events.length, 'registered events');
    events.forEach((e) => {
      console.log(`  - ${e.title} (${e.registrationType}), participants: ${e.participants.length}, teams: ${e.teamRegistrations.length}`);
    });

    res.json({
      success: true,
      count: events.length,
      data: events,
    });
  } catch (error) {
    console.error('‚ùå Get my events error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ REGISTER FOR EVENT (SPECIFIC - before :eventId) ============
router.post('/:eventId/register', protect, async (req, res) => {
  try {
    const event = await Event.findById(req.params.eventId);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: 'Event not found',
      });
    }

    if (event.registrationType !== 'individual') {
      return res.status(400).json({
        success: false,
        message: 'This event is for team registration only',
      });
    }

    if (event.participants.includes(req.user.id)) {
      return res.status(400).json({
        success: false,
        message: 'Already registered for this event',
      });
    }

    if (event.maxParticipants && event.participants.length >= event.maxParticipants) {
      return res.status(400).json({
        success: false,
        message: 'Event is full',
      });
    }

    event.participants.push(req.user.id);
    await event.save();

    await User.findByIdAndUpdate(
      req.user.id,
      { $addToSet: { registeredEvents: event._id } },
      { new: true }
    );

    console.log('‚úÖ User registered for event:', event.title);

    res.json({
      success: true,
      message: 'Registered successfully',
      data: event,
    });
  } catch (error) {
    console.error('Register error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error: ' + error.message,
    });
  }
});

// ============ REGISTER TEAM FOR EVENT ============
router.post('/:eventId/register-team', protect, async (req, res) => {
  try {
    const { teamId } = req.body;
    const eventId = req.params.eventId;

    console.log('üì§ [REGISTER TEAM]');
    console.log('  EventID:', eventId);
    console.log('  TeamID:', teamId);
    console.log('  UserID:', req.user.id);

    if (!teamId) {
      console.log('‚ùå Team ID missing');
      return res.status(400).json({
        success: false,
        message: 'teamId is required',
      });
    }

    const event = await Event.findById(eventId);
    console.log('‚úÖ Event found:', event?.title, 'Type:', event?.registrationType);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: 'Event not found',
      });
    }

    if (event.registrationType !== 'team') {
      console.log('‚ùå Event is not team registration. It is:', event.registrationType);
      return res.status(400).json({
        success: false,
        message: `This event is for ${event.registrationType} registration only`,
      });
    }

    const team = await Team.findById(teamId);
    console.log('‚úÖ Team found:', team?.name);

    if (!team) {
      return res.status(404).json({
        success: false,
        message: 'Team not found',
      });
    }

    if (team.leader.toString() !== req.user.id) {
      console.log('‚ùå User is not team leader');
      return res.status(403).json({
        success: false,
        message: 'Only team leader can register team for events',
      });
    }

    const alreadyRegistered = event.teamRegistrations.some(
      (reg) => reg.teamId.toString() === teamId
    );

    if (alreadyRegistered) {
      console.log('‚ùå Team already registered');
      return res.status(400).json({
        success: false,
        message: 'Team is already registered for this event',
      });
    }

    // Get ONLY accepted members (excluding leader)
    const acceptedMembers = team.members.filter((m) => m.status === 'accepted');
    const teamMemberIds = acceptedMembers.map((m) => m.userId);

    console.log('üìã Team members to register:', teamMemberIds.length);
    console.log('üìã Member IDs:', teamMemberIds);

    // Add team leader to the list too
    const allMembersToAdd = [team.leader, ...teamMemberIds];
    console.log('üìã All members (including leader):', allMembersToAdd.length);

    if (event.maxParticipants) {
      const currentParticipants = event.participants.length;
      console.log('üìä Current participants:', currentParticipants, 'Max:', event.maxParticipants);

      if (currentParticipants + allMembersToAdd.length > event.maxParticipants) {
        return res.status(400).json({
          success: false,
          message: `Event can only accommodate ${event.maxParticipants - currentParticipants} more participants`,
        });
      }
    }

    // Add team registration
    event.teamRegistrations.push({
      teamId,
      members: allMembersToAdd.map((userId) => ({ userId })),
    });

    // Add all members to participants array (avoid duplicates)
    const existingParticipants = event.participants.map((p) => p.toString());
    const newMemberIds = allMembersToAdd.map((m) => m.toString());
    const uniqueParticipants = [...new Set([...existingParticipants, ...newMemberIds])];
    event.participants = uniqueParticipants;

    console.log('‚úÖ Event participants count:', event.participants.length);

    await event.save();
    console.log('‚úÖ Event saved');

    // Add event to all team members' registeredEvents
    await User.updateMany(
      { _id: { $in: allMembersToAdd } },
      { $addToSet: { registeredEvents: event._id } }
    );

    console.log('‚úÖ User records updated');

    // Populate for response
    await event.populate([
      { path: 'organizerId', select: 'username email profile.fullName' },
      { path: 'teamRegistrations.teamId', select: 'name' },
      { path: 'teamRegistrations.members.userId', select: 'username email profile.fullName' },
      { path: 'participants', select: 'username email profile.fullName' },
    ]);

    console.log('‚úÖ Team registered successfully with', allMembersToAdd.length, 'members');

    res.json({
      success: true,
      message: `Team registered successfully with ${allMembersToAdd.length} members`,
      data: event,
    });
  } catch (error) {
    console.error('‚ùå REGISTER TEAM ERROR:', error);
    res.status(500).json({
      success: false,
      message: 'Server error: ' + error.message,
    });
  }
});

// ============ UNREGISTER FROM EVENT ============
router.post('/:eventId/unregister', protect, async (req, res) => {
  try {
    console.log('üóëÔ∏è UNREGISTER - User:', req.user.id, 'Event:', req.params.eventId);

    const event = await Event.findById(req.params.eventId);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: 'Event not found',
      });
    }

    // Check if user is registered
    const wasRegistered = event.participants.some(
      (id) => id.toString() === req.user.id
    );

    if (!wasRegistered) {
      return res.status(400).json({
        success: false,
        message: 'You are not registered for this event',
      });
    }

    // Remove user from participants
    event.participants = event.participants.filter(
      (id) => id.toString() !== req.user.id
    );

    console.log('‚úÖ User removed from participants. Count:', event.participants.length);

    await event.save();
    console.log('‚úÖ Event saved');

    // Remove event from user's registeredEvents
    await User.findByIdAndUpdate(
      req.user.id,
      { $pull: { registeredEvents: event._id } },
      { new: true }
    );

    console.log('‚úÖ Event removed from user record');

    // Populate and return updated event
    await event.populate([
      { path: 'organizerId', select: 'username email profile.fullName' },
      { path: 'participants', select: 'username email profile.fullName' },
      { path: 'teamRegistrations.teamId', select: 'name' },
      { path: 'teamRegistrations.members.userId', select: 'username email profile.fullName' },
    ]);

    console.log('‚úÖ Individual unregistered successfully');

    res.json({
      success: true,
      message: 'Unregistered successfully',
      data: event,
    });
  } catch (error) {
    console.error('‚ùå Unregister error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error: ' + error.message,
    });
  }
});

// ============ UNREGISTER TEAM FROM EVENT ============
router.post('/:eventId/unregister-team', protect, async (req, res) => {
  try {
    const { teamId } = req.body;
    const eventId = req.params.eventId;

    const event = await Event.findById(eventId);
    if (!event) {
      return res.status(404).json({
        success: false,
        message: 'Event not found',
      });
    }

    const team = await Team.findById(teamId);
    if (!team) {
      return res.status(404).json({
        success: false,
        message: 'Team not found',
      });
    }

    if (team.leader.toString() !== req.user.id) {
      return res.status(403).json({
        success: false,
        message: 'Only team leader can unregister team',
      });
    }

    const registrationIndex = event.teamRegistrations.findIndex(
      (reg) => reg.teamId.toString() === teamId.toString()
    );

    if (registrationIndex === -1) {
      return res.status(400).json({
        success: false,
        message: 'Team is not registered for this event',
      });
    }

    const registration = event.teamRegistrations[registrationIndex];

    // all member IDs as strings
    const memberIds = registration.members.map((m) =>
      (m.userId?._id || m.userId).toString()
    );

    // remove this team registration
    event.teamRegistrations.splice(registrationIndex, 1);

    // remove all members from participants
    event.participants = event.participants.filter((id) => {
      const idStr = id.toString();
      return !memberIds.includes(idStr);
    });

    await event.save();

    // remove event from all users' registeredEvents
    await User.updateMany(
      { _id: { $in: memberIds } },
      { $pull: { registeredEvents: event._id } }
    );

    // optional: repopulate
    await event.populate([
      { path: 'organizerId', select: 'username email profile.fullName' },
      { path: 'teamRegistrations.teamId', select: 'name' },
      {
        path: 'teamRegistrations.members.userId',
        select: 'username email profile.fullName',
      },
      { path: 'participants', select: 'username email profile.fullName' },
    ]);

    return res.json({
      success: true,
      message: 'Team unregistered successfully',
      data: event,
    });
  } catch (error) {
    console.error('‚ùå Unregister team error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error: ' + error.message,
    });
  }
});



// ============ GET EVENT PARTICIPANTS ============
router.get('/:eventId/participants', protect, async (req, res) => {
  try {
    console.log('üì• GET PARTICIPANTS - Event:', req.params.eventId, 'User:', req.user.id);

    const event = await Event.findById(req.params.eventId)
      .populate('organizerId', 'username email profile.fullName')
      .populate('participants', 'username email profile.fullName')
      .populate({
        path: 'teamRegistrations.teamId',
        select: 'name'
      })
      .populate({
        path: 'teamRegistrations.members.userId',
        select: 'username email profile.fullName'
      });

    if (!event) {
      console.log('‚ùå Event not found');
      return res.status(404).json({
        success: false,
        message: 'Event not found'
      });
    }

    // ‚úÖ FIX: Check if user is organizer
    if (event.organizerId._id.toString() !== req.user.id) {
      console.log('‚ùå User is not organizer. Organizer:', event.organizerId._id, 'User:', req.user.id);
      return res.status(403).json({
        success: false,
        message: 'Only event organizer can view participants'
      });
    }

    console.log('‚úÖ Authorization passed');

    // ‚úÖ FIX: Build proper response structure
    let allParticipants = [];

    if (event.registrationType === 'individual') {
      // For individual events, just list individual participants
      allParticipants = event.participants.map(p => ({
        _id: p._id,
        username: p.username,
        email: p.email,
        fullName: p.profile?.fullName || p.username,
        team: null,
        registrationType: 'individual'
      })) || [];
      console.log('üë§ Individual participants:', allParticipants.length);
    } else if (event.registrationType === 'team') {
      // For team events, flatten team members
      if (event.teamRegistrations && Array.isArray(event.teamRegistrations)) {
        event.teamRegistrations.forEach((registration) => {
          const teamName = registration.teamId?.name || 'Unknown Team';
          
          if (registration.members && Array.isArray(registration.members)) {
            registration.members.forEach((member) => {
              if (member.userId) {
                allParticipants.push({
                  _id: member.userId._id,
                  username: member.userId.username,
                  email: member.userId.email,
                  fullName: member.userId.profile?.fullName || member.userId.username,
                  team: teamName,
                  registrationType: 'team'
                });
              }
            });
          }
        });
      }
      console.log('üë• Team participants:', allParticipants.length);
    }

    console.log('‚úÖ Participants fetched successfully');

    // ‚úÖ FIX: Return proper response structure
    return res.json({
      success: true,
      eventTitle: event.title,
      registrationType: event.registrationType,
      maxParticipants: event.maxParticipants,
      totalParticipants: allParticipants.length,
      individualParticipants: event.registrationType === 'individual' ? allParticipants : [],
      teamRegistrations: event.registrationType === 'team' ? event.teamRegistrations.map(reg => ({
        teamId: reg.teamId?._id,
        name: reg.teamId?.name,
        members: reg.members.map(m => ({
          userId: {
            _id: m.userId._id,
            username: m.userId.username,
            email: m.userId.email,
            fullName: m.userId.profile?.fullName
          }
        }))
      })) : [],
      allParticipants: allParticipants // ‚úÖ Flat list for easy iteration
    });
  } catch (error) {
    console.error('‚ùå Participants error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error: ' + error.message
    });
  }
});

// ============ UPDATE EVENT ============
router.put('/:eventId', protect, async (req, res) => {
  try {
    const event = await Event.findById(req.params.eventId);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: 'Event not found',
      });
    }

    if (event.organizerId.toString() !== req.user.id) {
      return res.status(403).json({
        success: false,
        message: 'Not authorized to update this event',
      });
    }

    const allowedFields = ['title', 'description', 'category', 'status', 'rules', 'prizes'];
    allowedFields.forEach((field) => {
      if (req.body[field]) {
        event[field] = req.body[field];
      }
    });

    await event.save();

    res.json({
      success: true,
      message: 'Event updated successfully',
      data: event,
    });
  } catch (error) {
    console.error('Update event error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ DELETE EVENT ============
router.delete('/:eventId', protect, async (req, res) => {
  try {
    const event = await Event.findById(req.params.eventId);

    if (!event) {
      return res.status(404).json({
        success: false,
        message: 'Event not found',
      });
    }

    if (event.organizerId.toString() !== req.user.id) {
      return res.status(403).json({
        success: false,
        message: 'Not authorized to delete this event',
      });
    }

    await Event.findByIdAndDelete(req.params.eventId);

    res.json({
      success: true,
      message: 'Event deleted successfully',
    });
  } catch (error) {
    console.error('Delete event error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ GET ALL EVENTS (GENERIC - MUST BE LAST) ============
router.get('/', async (req, res) => {
  try {
    console.log('üì• Fetching all events...');

    const events = await Event.find({ status: { $ne: 'draft' } })
      .populate('organizerId', 'username email profile.fullName')
      .populate('teamRegistrations.teamId', 'name')
      .populate('teamRegistrations.members.userId', 'username email profile.fullName')
      .populate('participants', 'username email profile.fullName')
      .sort({ 'dates.startDate': 1 });

    console.log('‚úÖ Found', events.length, 'events');

    res.json({
      success: true,
      count: events.length,
      data: events,
    });
  } catch (error) {
    console.error('‚ùå Get all events error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

// ============ GET SINGLE EVENT (MUST BE LAST) ============
router.get('/:eventId', async (req, res) => {
  try {
    const event = await Event.findById(req.params.eventId)
      .populate('organizerId', 'username email profile.fullName')
      .populate('participants', 'username email profile.fullName')
      .populate('teamRegistrations.teamId', 'name')
      .populate('teamRegistrations.members.userId', 'username email profile.fullName');

    if (!event) {
      return res.status(404).json({
        success: false,
        message: 'Event not found',
      });
    }

    res.json({
      success: true,
      data: event,
    });
  } catch (error) {
    console.error('Get event error:', error);
    res.status(500).json({
      success: false,
      message: 'Server error',
    });
  }
});

module.exports = router;
</file>

<file path="frontend/frontend/.gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# Dependency Folders
node_modules/

# Build output
dist/
build/
dist-ssr/
.next/
out/
.vercel/

# Local environment
*.local
.env
.env.*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="frontend/frontend/src/App.css">
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f5f5;
    color: #333;
  }
  
  /* Navbar */
  .navbar {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 0;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
  }
  
  .nav-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .logo {
    color: white;
    font-size: 24px;
    font-weight: 700;
    margin: 0;
  }
  
  .nav-links {
    display: flex;
    gap: 25px;
  }
  
  .nav-links a {
    color: white;
    text-decoration: none;
    font-weight: 500;
    transition: opacity 0.3s;
  }
  
  .nav-links a:hover {
    opacity: 0.8;
  }
  
  /* Loading state */
  .loading {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    font-size: 18px;
    color: #667eea;
  }
  
  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }
  
  ::-webkit-scrollbar-thumb {
    background: #667eea;
    border-radius: 10px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: #764ba2;
  }
  
  @media (max-width: 768px) {
    .nav-container {
      flex-direction: column;
      gap: 15px;
    }
  
    .nav-links {
      width: 100%;
      justify-content: center;
      gap: 15px;
    }
  
    .logo {
      font-size: 20px;
    }
  }
  
  .navbar {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 0;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .nav-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
  }
  
  .logo {
    margin: 0;
    font-size: 24px;
    font-weight: 700;
    cursor: pointer;
    transition: opacity 0.2s;
  }
  
  .logo:hover {
    opacity: 0.8;
  }
  
  .nav-links {
    display: flex;
    gap: 24px;
    align-items: center;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .nav-links a {
    color: white;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: opacity 0.2s;
  }
  
  .nav-links a:hover {
    opacity: 0.8;
  }
  
  .nav-links button {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
  }
  
  .nav-links button:hover {
    background: rgba(255, 255, 255, 0.3);
  }
  
  @media (max-width: 768px) {
    .nav-container {
      flex-direction: column;
      gap: 16px;
    }
  
    .nav-links {
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
    }
  }
</file>

<file path="frontend/frontend/src/components/ViewParticipantsModal.jsx">
import { useState, useEffect } from "react";
import axios from "axios";
import "../styles/ViewParticipantsModal.css";

const API_BASE_URL = "http://localhost:5000/api";

export default function ViewParticipantsModal({ event, token, onClose }) {
  const [participants, setParticipants] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");
  const [searchTerm, setSearchTerm] = useState("");
  const [sortBy, setSortBy] = useState("name");

  useEffect(() => {
    fetchParticipants();
  }, [event._id, token]);

  const fetchParticipants = async () => {
    try {
      setLoading(true);
      setError("");

      console.log("üì• Fetching participants for event:", event._id);

      const response = await axios.get(
        `${API_BASE_URL}/events/${event._id}/participants`,
        {
          headers: { Authorization: `Bearer ${token}` },
        }
      );

      console.log("‚úÖ Response received:", response.data);

      if (response.data.success) {
        // ‚úÖ FIX: Use allParticipants array from response
        const allParticipants = response.data.allParticipants || [];
        console.log("üìã Total participants loaded:", allParticipants.length);
        console.log("üìã Participants:", allParticipants);

        setParticipants(allParticipants);
      } else {
        setError(response.data.message || "Failed to load participants");
      }
    } catch (err) {
      console.error("‚ùå Error fetching participants:", err);

      // ‚úÖ FIX: Better error handling
      if (err.response?.status === 403) {
        setError("You are not authorized to view participants for this event");
      } else if (err.response?.status === 404) {
        setError("Event not found");
      } else {
        const errorMsg =
          err.response?.data?.message ||
          err.message ||
          "Failed to load participants";
        setError(errorMsg);
      }
    } finally {
      setLoading(false);
    }
  };

  // Filter participants based on search term
  const filteredParticipants = participants.filter((p) => {
    const searchLower = searchTerm.toLowerCase();
    return (
      (p.username && p.username.toLowerCase().includes(searchLower)) ||
      (p.email && p.email.toLowerCase().includes(searchLower)) ||
      (p.fullName && p.fullName.toLowerCase().includes(searchLower)) ||
      (p.team && p.team.toLowerCase().includes(searchLower))
    );
  });

  // Sort participants
  const sortedParticipants = [...filteredParticipants].sort((a, b) => {
    switch (sortBy) {
      case "name":
        return (a.fullName || a.username || "").localeCompare(
          b.fullName || b.username || ""
        );
      case "email":
        return (a.email || "").localeCompare(b.email || "");
      case "team":
        return (a.team || "Individual").localeCompare(b.team || "Individual");
      default:
        return 0;
    }
  });

  // Export to CSV
  const exportToCSV = () => {
    try {
      const headers = ["#", "Name", "Email", "Username", "Team"];

      const csvContent = [
        headers.join(","),
        ...sortedParticipants.map((p, idx) =>
          [
            `${idx + 1}`,
            `"${p.fullName || p.username || ""}"`,
            `"${p.email || ""}"`,
            `"${p.username || ""}"`,
            `"${p.team || "Individual"}"`,
          ].join(",")
        ),
      ].join("\n");

      // Create blob and download
      const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
      const link = document.createElement("a");
      const url = URL.createObjectURL(blob);

      link.setAttribute("href", url);
      link.setAttribute(
        "download",
        `${event.title}-participants-${
          new Date().toISOString().split("T")[0]
        }.csv`
      );
      link.style.visibility = "hidden";

      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

      console.log(
        `‚úÖ Exported ${sortedParticipants.length} participants to CSV`
      );
    } catch (err) {
      console.error("‚ùå Export error:", err);
      alert("Failed to export CSV");
    }
  };

  return (
    <div className="modal-overlay" onClick={onClose}>
      <div
        className="modal-content participants-modal"
        onClick={(e) => e.stopPropagation()}
      >
        {/* Header */}
        <div className="modal-header">
          <div>
            <h2>üë• Event Participants</h2>
            <p className="event-title">{event.title}</p>
          </div>
          <button className="modal-close" onClick={onClose} type="button">
            ‚úï
          </button>
        </div>

        {/* Error Message */}
        {error && <div className="error-message">‚ö†Ô∏è {error}</div>}

        {/* Loading State */}
        {loading ? (
          <div className="loader">
            <p>Loading participants...</p>
          </div>
        ) : (
          <>
            {/* Stats */}
            <div className="participants-stats">
              <div className="stat">
                <span className="label">Total Registered:</span>
                <span className="value">{participants.length}</span>
              </div>
              <div className="stat">
                <span className="label">Max Capacity:</span>
                <span className="value">
                  {event.maxParticipants || "Unlimited"}
                </span>
              </div>
              {event.maxParticipants && (
                <div className="stat">
                  <span className="label">Occupancy:</span>
                  <span className="value">
                    {`${Math.round(
                      (participants.length / event.maxParticipants) * 100
                    )}%`}
                  </span>
                </div>
              )}
            </div>

            {/* Filters */}
            <div className="filters-section">
              <div className="search-box">
                <input
                  type="text"
                  placeholder="üîç Search by name, email, username, or team..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="search-input"
                />
              </div>

              <div className="filter-controls">
                <select
                  value={sortBy}
                  onChange={(e) => setSortBy(e.target.value)}
                  className="sort-select"
                >
                  <option value="name">Sort by: Name</option>
                  <option value="email">Sort by: Email</option>
                  <option value="team">Sort by: Team</option>
                </select>

                <button
                  className="btn-export"
                  onClick={exportToCSV}
                  disabled={sortedParticipants.length === 0}
                >
                  üì• Export to CSV
                </button>
              </div>
            </div>

            {/* Participants Table */}
            {sortedParticipants.length > 0 ? (
              <div className="participants-table-wrapper">
                <table className="participants-table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Username</th>
                      <th>Team</th>
                    </tr>
                  </thead>
                  <tbody>
                    {sortedParticipants.map((participant, index) => (
                      <tr
                        key={participant._id || index}
                        className="participant-row"
                      >
                        <td className="index">{index + 1}</td>
                        <td className="name">
                          <strong>
                            {participant.fullName ||
                              participant.username ||
                              "-"}
                          </strong>
                        </td>
                        <td className="email">
                          <a href={`mailto:${participant.email}`}>
                            {participant.email || "-"}
                          </a>
                        </td>
                        <td className="username">
                          @{participant.username || "-"}
                        </td>
                        <td className="team">
                          {participant.team || "Individual"}
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            ) : (
              <div className="empty-state">
                <p>
                  üòî No participants found{" "}
                  {searchTerm ? "matching your search" : ""}
                </p>
              </div>
            )}

            {/* Results Info */}
            {participants.length > 0 && (
              <div className="results-info">
                Showing {sortedParticipants.length} of {participants.length}{" "}
                participants
              </div>
            )}
          </>
        )}

        {/* Close Button */}
        <div className="modal-footer">
          <button className="btn-close" onClick={onClose}>
            Close
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/context/AuthContext.jsx">
import { createContext, useState, useContext, useEffect } from "react";
import { authAPI } from "../services/api";
import axios from "axios";

const AuthContext = createContext();
const API_BASE_URL = "http://localhost:5000/api";

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [token, setToken] = useState(localStorage.getItem("token"));

  useEffect(() => {
    const checkAuth = async () => {
      if (token) {
        try {
          console.log("üîç Checking auth with token...");
          const response = await authAPI.getMe();
          setUser(response.data.user);
          console.log("‚úÖ Auth verified:", response.data.user);
        } catch (error) {
          console.error("‚ùå Auth check failed:", error);
          localStorage.removeItem("token");
          localStorage.removeItem("userType");
          setToken(null);
          setUser(null);
        }
      } else {
        console.log("‚ö†Ô∏è No token found, user not authenticated");
      }
      setLoading(false);
    };

    checkAuth();
  }, [token]);

  const register = async (userData) => {
    try {
      const response = await authAPI.register(userData);
      localStorage.setItem("token", response.data.token);
      setToken(response.data.token);
      setUser(response.data.user);
      return { success: true };
    } catch (error) {
      return {
        success: false,
        error: error.response?.data?.message || "Registration failed",
      };
    }
  };

  const login = async (email, password) => {
    try {
      const response = await authAPI.login(email, password);
      const token = response.data.token;

      localStorage.setItem("token", token);
      localStorage.setItem("userType", "student");
      setToken(token);
      setUser(response.data.user);

      console.log("‚úÖ Student logged in:", response.data.user);
      return { success: true };
    } catch (error) {
      return {
        success: false,
        error: error.response?.data?.message || "Login failed",
      };
    }
  };

  // ‚úÖ NEW: Organizer login function
  const organizerLogin = async (email, password) => {
    try {
      console.log("üîê Organizer login attempt...");

      // ‚úÖ Create temporary axios instance to call organizer endpoint
      const response = await axios.post(`${API_BASE_URL}/organizers/login`, {
        email: email.toLowerCase(),
        password,
      });

      console.log("‚úÖ Organizer response:", response.data);

      if (response.data.success) {
        const token = response.data.token;
        const organizerData = response.data.organizer;

        // ‚úÖ Save to localStorage
        localStorage.setItem("token", token);
        localStorage.setItem("userType", "organizer");
        localStorage.setItem("organizer", JSON.stringify(organizerData));

        // ‚úÖ Update auth context
        // Convert organizer data to user-like format
        const userData = {
          id: organizerData.id,
          email: organizerData.email,
          clubName: organizerData.clubName,
          role: "organizer",
        };

        setToken(token);
        setUser(userData);

        console.log("‚úÖ Organizer logged in:", userData);
        return { success: true };
      }
    } catch (error) {
      console.error("‚ùå Organizer login error:", error);
      console.error("Response:", error.response?.data);
      return {
        success: false,
        error: error.response?.data?.message || "Login failed",
      };
    }
  };

  const logout = () => {
    localStorage.removeItem("token");
    localStorage.removeItem("userType");
    localStorage.removeItem("organizer");
    setToken(null);
    setUser(null);
  };

  return (
    <AuthContext.Provider
      value={{
        user,
        token,
        loading,
        register,
        login,
        organizerLogin, // ‚úÖ Expose organizer login
        logout,
        isAuthenticated: !!user,
      }}
    >
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error("useAuth must be used within AuthProvider");
  }
  return context;
};
</file>

<file path="frontend/frontend/src/pages/EventDetailPage.jsx">
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { useAuth } from '../context/AuthContext';
import '../styles/EventDetailPage.css';

const API_BASE_URL = 'http://localhost:5000/api';

export default function EventDetailPage({ eventId, onBack }) {
  const { user, token } = useAuth();
  const [event, setEvent] = useState(null);
  const [participants, setParticipants] = useState([]);
  const [loading, setLoading] = useState(true);
  const [registering, setRegistering] = useState(false);
  const [error, setError] = useState('');
  const [isRegistered, setIsRegistered] = useState(false);

  useEffect(() => {
    if (!eventId) {
      setError('No event ID provided');
      setLoading(false);
      return;
    }
    fetchEventDetails();
  }, [eventId, token]);

  const fetchEventDetails = async () => {
    try {
      setLoading(true);
      setError('');

      const res = await axios.get(`${API_BASE_URL}/events/${eventId}`, {
        headers: token ? { Authorization: `Bearer ${token}` } : {},
      });

      const eventData = res.data.data;
      setEvent(eventData);

      const isUserReg = eventData.participants?.some((p) => {
        const id = p?._id ? p._id.toString() : p.toString();
        return user && id === user._id.toString();
      });
      setIsRegistered(!!isUserReg);

      if (user && eventData.organizerId?.toString?.() === user._id.toString()) {
        fetchParticipants();
      }
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to load event');
    } finally {
      setLoading(false);
    }
  };

  const fetchParticipants = async () => {
    try {
      const res = await axios.get(
        `${API_BASE_URL}/events/${eventId}/participants`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setParticipants(res.data.participants || []);
    } catch (err) {
      console.error('Error:', err);
    }
  };

  const getParticipantCount = (ev) => {
    if (!ev) return 0;
    if (ev.registrationType === 'individual') {
      return ev.participants?.length || 0;
    }
    return (
      ev.teamRegistrations?.reduce(
        (total, reg) => total + (reg.members?.length || 0),
        0
      ) || 0
    );
  };

  const handleRegister = async () => {
    if (!token) {
      alert('Please login to register');
      return;
    }
    try {
      setRegistering(true);
      const res = await axios.post(
        `${API_BASE_URL}/events/${eventId}/register`,
        {},
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (res.data.success) {
        setIsRegistered(true);
        await fetchEventDetails();
        alert('‚úÖ Registered successfully!');
      }
    } catch (err) {
      alert('‚ùå ' + (err.response?.data?.message || 'Registration failed'));
    } finally {
      setRegistering(false);
    }
  };

  const handleUnregister = async () => {
    if (!token) {
      alert('Please login first');
      return;
    }
    if (!window.confirm('Unregister from this event?')) return;
    try {
      setRegistering(true);
      const res = await axios.post(
        `${API_BASE_URL}/events/${eventId}/unregister`,
        {},
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (res.data.success) {
        setIsRegistered(false);
        await fetchEventDetails();
        alert('‚úÖ Unregistered successfully!');
      }
    } catch (err) {
      alert('‚ùå ' + (err.response?.data?.message || 'Unregistration failed'));
    } finally {
      setRegistering(false);
    }
  };

  if (loading) {
    return (
      <div className="detail-container">
        <button className="back-btn" onClick={onBack}>‚Üê Back</button>
        <div className="loading">Loading...</div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="detail-container">
        <button className="back-btn" onClick={onBack}>‚Üê Back</button>
        <div className="error">{error}</div>
      </div>
    );
  }

  if (!event) {
    return (
      <div className="detail-container">
        <button className="back-btn" onClick={onBack}>‚Üê Back</button>
        <div className="error">Event not found</div>
      </div>
    );
  }

  const eventDate = new Date(event.dates?.startDate || new Date());
  const isOrganizer = user && (event.organizerId?._id || event.organizerId)?.toString() === user._id.toString();
  const participantsCount = getParticipantCount(event);

  return (
    <div className="detail-container">
      <button className="back-btn" onClick={onBack}>‚Üê Back</button>

      <div className="detail-content">
        <div className="detail-header">
          <h1>{event.title}</h1>
          <p className="category-badge">{event.category}</p>
          <p className="type-badge">
            {event.registrationType === 'individual' ? 'üë§ Individual Event' : 'üë• Team Event'}
          </p>
        </div>

        <div className="detail-info">
          <div className="info-row">
            <span className="info-label">üìÖ Date & Time:</span>
            <span>{eventDate.toLocaleString()}</span>
          </div>
          <div className="info-row">
            <span className="info-label">üìç Location:</span>
            <span>{event.venue?.location || event.venue?.name || 'Not specified'}</span>
          </div>
          <div className="info-row">
            <span className="info-label">üë§ Organizer:</span>
            <span>{event.organizerId?.profile?.fullName || event.organizerId?.username || 'Organization'}</span>
          </div>
          <div className="info-row">
            <span className="info-label">üë• Participants:</span>
            <span>{participantsCount} {event.maxParticipants ? `/ ${event.maxParticipants}` : ''}</span>
          </div>
        </div>

        <div className="detail-description">
          <h2>About</h2>
          <p>{event.description}</p>
        </div>

        <div className="detail-actions">
          {user ? (
            <>
              {isOrganizer ? (
                <p className="organizer-notice">‚úì You are organizing this event</p>
              ) : isRegistered ? (
                <button 
                  className="btn btn-unregister"
                  onClick={handleUnregister}
                  disabled={registering}
                >
                  {registering ? 'Unregistering...' : 'Unregister'}
                </button>
              ) : (
                <button 
                  className="btn btn-register"
                  onClick={handleRegister}
                  disabled={registering}
                >
                  {registering ? 'Registering...' : 'Register'}
                </button>
              )}
            </>
          ) : (
            <p className="login-notice">Please login to register</p>
          )}
        </div>

        {isOrganizer && participants.length > 0 && (
          <div className="participants-section">
            <h2>Registered Participants ({participants.length})</h2>
            <div className="participants-list">
              {participants.map((p) => (
                <div key={p._id} className="participant-item">
                  <div>
                    <p className="participant-name">
                      {p.profile?.fullName || p.username || p.name}
                    </p>
                    <p className="participant-email">{p.email}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/EventsPage.jsx">
// src/pages/EventsPage.jsx
import { useEffect, useState } from 'react';
import axios from 'axios';
import { useAuth } from '../context/AuthContext';
import '../styles/EventsPage.css';

const API_BASE_URL = 'http://localhost:5000/api';

export default function EventsPage({ onSelectEvent }) {
  const { user, token } = useAuth();
  const [allEvents, setAllEvents] = useState([]);
  const [myEvents, setMyEvents] = useState([]);
  const [myTeams, setMyTeams] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [selectedEventId, setSelectedEventId] = useState(null);
  const [registrationError, setRegistrationError] = useState('');
  const [activeTab, setActiveTab] = useState('all');
  const [filterCategory, setFilterCategory] = useState('all');
  const [filterType, setFilterType] = useState('all');
  const [categories, setCategories] = useState([]);

  useEffect(() => {
    if (!token) return;
    fetchAllEvents();
    fetchMyEvents();
    fetchMyTeams();
  }, [token]);

  useEffect(() => {
    if (allEvents.length > 0) {
      const uniqueCategories = [
        ...new Set(allEvents.map((e) => e.category).filter(Boolean)),
      ];
      setCategories(uniqueCategories);
    }
  }, [allEvents]);

  const fetchAllEvents = async () => {
    try {
      const res = await axios.get(`${API_BASE_URL}/events`, {
        headers: { Authorization: `Bearer ${token}` },
      });
      setAllEvents(res.data.data || []);
    } catch (err) {
      console.error('Error:', err);
      setError('Failed to load events');
    }
  };

  const fetchMyEvents = async () => {
    try {
      const res = await axios.get(
        `${API_BASE_URL}/events/my-events/registered`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setMyEvents(res.data.data || []);
    } catch (err) {
      console.error('Error:', err);
    }
  };

  const fetchMyTeams = async () => {
    try {
      const res = await axios.get(`${API_BASE_URL}/teams/my-teams`, {
        headers: { Authorization: `Bearer ${token}` },
      });
      setMyTeams(res.data.data || []);
    } catch (err) {
      console.error('Error:', err);
    }
  };

  const handleRegisterIndividual = async (eventId) => {
    try {
      setLoading(true);
      const res = await axios.post(
        `${API_BASE_URL}/events/${eventId}/register`,
        {},
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setAllEvents((prev) =>
        prev.map((e) => (e._id === eventId ? res.data.data : e))
      );
      setMyEvents((prev) => [...prev, res.data.data]);
      setRegistrationError('');
      alert('‚úÖ Registered successfully!');
    } catch (err) {
      setRegistrationError(
        err.response?.data?.message || 'Failed to register'
      );
    } finally {
      setLoading(false);
    }
  };

  const handleRegisterTeam = async (eventId, teamId) => {
    try {
      setLoading(true);
      const res = await axios.post(
        `${API_BASE_URL}/events/${eventId}/register-team`,
        { teamId },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setAllEvents((prev) =>
        prev.map((e) => (e._id === eventId ? res.data.data : e))
      );
      await fetchMyEvents();
      setRegistrationError('');
      setSelectedEventId(null);
      alert('‚úÖ Team registered successfully!');
    } catch (err) {
      setRegistrationError(
        err.response?.data?.message || 'Failed to register team'
      );
    } finally {
      setLoading(false);
    }
  };

  const handleUnregister = async (eventId) => {
    try {
      setLoading(true);
      const res = await axios.post(
        `${API_BASE_URL}/events/${eventId}/unregister`,
        {},
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setAllEvents((prev) =>
        prev.map((e) => (e._id === eventId ? res.data.data : e))
      );
      setMyEvents((prev) => prev.filter((e) => e._id !== eventId));
      alert('‚úÖ Unregistered successfully!');
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to unregister');
    } finally {
      setLoading(false);
    }
  };

  const isUserRegistered = (event) =>
    myEvents.some((e) => e._id === event._id);

  const getFilteredEvents = (events) =>
    events.filter((event) => {
      const categoryMatch =
        filterCategory === 'all' || event.category === filterCategory;
      const typeMatch =
        filterType === 'all' || event.registrationType === filterType;
      return categoryMatch && typeMatch;
    });

  const renderEventCard = (event) => {
    const registered = isUserRegistered(event);
    const eventDate = new Date(event.dates?.startDate);
    const dateStr = eventDate.toLocaleDateString('en-US', {
      month: 'short',
      day: 'numeric',
    });
    const timeStr = eventDate.toLocaleTimeString('en-US', {
      hour: '2-digit',
      minute: '2-digit',
    });

    return (
      <div
        key={event._id}
        className="event-card"
        onClick={() => onSelectEvent(event._id)}
      >
        <div className="card-top">
          <div>
            <h3>{event.title}</h3>
            <p className="category">{event.category}</p>
          </div>
          <span className={`badge ${event.registrationType}`}>
            {event.registrationType === 'individual' ? 'üë§' : 'üë•'}
          </span>
        </div>

        <p className="description">
          {event.description
            ? event.description.length > 120
              ? event.description.substring(0, 120) + '...'
              : event.description
            : ''}
        </p>

        <div className="card-meta">
          <span>üìç {event.venue?.location || 'TBD'}</span>
          <span>
            üìÖ {dateStr} ¬∑ {timeStr}
          </span>
        </div>

        <div className="card-footer" onClick={(e) => e.stopPropagation()}>
          {registered ? (
            <button
              className="btn btn-unregister"
              onClick={() => handleUnregister(event._id)}
              disabled={loading}
            >
              Unregister
            </button>
          ) : event.registrationType === 'individual' ? (
            <button
              className="btn btn-register"
              onClick={() => handleRegisterIndividual(event._id)}
              disabled={loading}
            >
              Register
            </button>
          ) : (
            <div className="dropdown">
              <button
                className="btn btn-register"
                onClick={() =>
                  setSelectedEventId(
                    selectedEventId === event._id ? null : event._id
                  )
                }
              >
                Register Team
              </button>
              {selectedEventId === event._id && (
                <div className="dropdown-menu">
                  {myTeams.filter((t) => t.leader._id === user._id).length ===
                  0 ? (
                    <p className="dropdown-empty">No teams where you are leader</p>
                  ) : (
                    myTeams
                      .filter((t) => t.leader._id === user._id)
                      .map((team) => (
                        <button
                          key={team._id}
                          className="dropdown-item"
                          onClick={() =>
                            handleRegisterTeam(event._id, team._id)
                          }
                          disabled={loading}
                        >
                          {team.name} (
                          {team.members?.filter(
                            (m) => m.status === 'accepted'
                          ).length || 0}{' '}
                          members)
                        </button>
                      ))
                  )}
                </div>
              )}
            </div>
          )}
        </div>
      </div>
    );
  };

  const eventsToDisplay =
    activeTab === 'all'
      ? getFilteredEvents(allEvents)
      : getFilteredEvents(myEvents);

  return (
    <div className="events-container">
     
      <div className="events-controls">
        <div className="tabs">
          <button
            className={`tab ${activeTab === 'all' ? 'active' : ''}`}
            onClick={() => setActiveTab('all')}
          >
            All Events ({allEvents.length})
          </button>
          <button
            className={`tab ${activeTab === 'my' ? 'active' : ''}`}
            onClick={() => setActiveTab('my')}
          >
            My Events ({myEvents.length})
          </button>
        </div>

        {activeTab === 'all' && (
          <div className="filters">
            <select
              value={filterCategory}
              onChange={(e) => setFilterCategory(e.target.value)}
              className="filter-input"
            >
              <option value="all">All Categories</option>
              {categories.map((cat) => (
                <option key={cat} value={cat}>
                  {cat}
                </option>
              ))}
            </select>

            <select
              value={filterType}
              onChange={(e) => setFilterType(e.target.value)}
              className="filter-input"
            >
              <option value="all">All Types</option>
              <option value="individual">Individual</option>
              <option value="team">Team</option>
            </select>
          </div>
        )}
      </div>

      {error && <div className="alert error">{error}</div>}
      {registrationError && (
        <div className="alert error">{registrationError}</div>
      )}

      <div className="events-grid">
        {eventsToDisplay.length === 0 ? (
          <div className="empty">
            <p>No events found</p>
          </div>
        ) : (
          eventsToDisplay.map((event) => renderEventCard(event))
        )}
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/LoginPage.jsx">
import { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import '../styles/AuthPages.css';

export default function LoginPage({ setCurrentPage }) {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const { login } = useAuth();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    setLoading(true);
    
    const result = await login(email, password);
    
    if (result.success) {
      const role = result.user?.role;
      setTimeout(() => {
        if (role === "admin") {
          setCurrentPage("admin-dashboard");
        } else if (role === "collegeAdmin") {
          setCurrentPage("college-admin-dashboard");
        } else {
          setCurrentPage("events");
        }
      }, 500);
    }
    else {
      setError(result.error);
    }
    
    setLoading(false);
  };

  return (
    <div className="auth-container">
      <div className="auth-card">
        <h2>Login</h2>
        {error && <div className="error-message">{error}</div>}
        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <label>Email:</label>
            <input 
              type="email" 
              value={email} 
              onChange={(e) => setEmail(e.target.value)} 
              required 
            />
          </div>
          <div className="form-group">
            <label>Password:</label>
            <input 
              type="password" 
              value={password} 
              onChange={(e) => setPassword(e.target.value)} 
              required 
            />
          </div>
          <button type="submit" disabled={loading} className="btn-primary">
            {loading ? 'Logging in...' : 'Login'}
          </button>
        </form>
        <p className="auth-link">
          Don't have account?{' '}
          <a 
            onClick={() => setCurrentPage('register')} 
            style={{cursor: 'pointer', color: '#007bff', textDecoration: 'underline'}}
          >
            Register
          </a>
        </p>
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/ProfilePage.jsx">
import { useEffect, useState } from "react";
import axios from "axios";
import { useAuth } from "../context/AuthContext";
import "../styles/ProfilePage.css";
import EventDetailPage from "./EventDetailPage";
import EditEventModal from "../components/EditEventModal";
import ViewParticipantsModal from "../components/ViewParticipantsModal";

const API_BASE_URL = "http://localhost:5000/api";

export default function ProfilePage({ setCurrentPage }) {
  const { user, token } = useAuth();
  const [profile, setProfile] = useState(null);
  const [stats, setStats] = useState(null);
  const [activeTab, setActiveTab] = useState("overview");
  const [loading, setLoading] = useState(false);
  const [saving, setSaving] = useState(false);
  const [error, setError] = useState("");
  const [successMsg, setSuccessMsg] = useState("");
  const [editingEvent, setEditingEvent] = useState(null);
  const [viewingParticipants, setViewingParticipants] = useState(null);

  // Dashboard states
  const [myEvents, setMyEvents] = useState([]);
  const [registeredEvents, setRegisteredEvents] = useState([]);
  const [dashboardLoading, setDashboardLoading] = useState(false);
  const [selectedEvent, setSelectedEvent] = useState(null);
  const [detailEventId, setDetailEventId] = useState(null);

  // Form states
  const [editPersonal, setEditPersonal] = useState(false);
  const [editContact, setEditContact] = useState(false);
  const [editNotifications, setEditNotifications] = useState(false);
  const [showPasswordForm, setShowPasswordForm] = useState(false);
  const [passwordData, setPasswordData] = useState({
    oldPassword: "",
    newPassword: "",
    confirmPassword: "",
    showPassword: false,
  });
  const [passwordMsg, setPasswordMsg] = useState("");
  const [passwordError, setPasswordError] = useState("");
  const [changingPassword, setChangingPassword] = useState(false);

  const [formData, setFormData] = useState({
    fullName: "",
    department: "",
    year: "",
    phone: "",
    avatar: "",
    bio: "",
    skills: "",
    preferredChannel: "email",
    alternateEmail: "",
    whatsappNumber: "",
    emailRegistration: true,
    emailReminders: true,
    emailResults: true,
    emailAnnouncements: true,
    inAppAnnouncements: true,
    inAppSystemAlerts: true,
    inAppResults: true,
  });

  // Fetch profile & stats
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        const [profileRes, statsRes] = await Promise.all([
          axios.get(`${API_BASE_URL}/users/me`, {
            headers: { Authorization: `Bearer ${token}` },
          }),
          axios.get(`${API_BASE_URL}/users/me/stats`, {
            headers: { Authorization: `Bearer ${token}` },
          }),
        ]);

        const profileData = profileRes.data.data;
        setProfile(profileData);
        setStats(statsRes.data.data);

        setFormData({
          fullName: profileData.profile?.fullName || "",
          department: profileData.profile?.department || "",
          year: profileData.profile?.year || "",
          phone: profileData.profile?.phone || "",
          avatar: profileData.profile?.avatar || "",
          bio: profileData.profile?.bio || "",
          skills: profileData.profile?.skills || "",
          preferredChannel:
            profileData.contactPreferences?.preferredChannel || "email",
          alternateEmail: profileData.contactPreferences?.alternateEmail || "",
          whatsappNumber: profileData.contactPreferences?.whatsappNumber || "",
          emailRegistration:
            profileData.notificationSettings?.email?.registration ?? true,
          emailReminders:
            profileData.notificationSettings?.email?.reminders ?? true,
          emailResults:
            profileData.notificationSettings?.email?.results ?? true,
          emailAnnouncements:
            profileData.notificationSettings?.email?.announcements ?? true,
          inAppAnnouncements:
            profileData.notificationSettings?.inApp?.announcements ?? true,
          inAppSystemAlerts:
            profileData.notificationSettings?.inApp?.systemAlerts ?? true,
          inAppResults:
            profileData.notificationSettings?.inApp?.results ?? true,
        });
      } catch (err) {
        console.error("Error fetching profile", err);
        setError("Failed to load profile");
      } finally {
        setLoading(false);
      }
    };

    if (token) {
      fetchData();
    }
  }, [token]);

  const fetchDashboardData = async () => {
    if (!token || !profile?._id) return;

    try {
      setDashboardLoading(true);
      const res = await axios.get(`${API_BASE_URL}/events`, {
        headers: { Authorization: `Bearer ${token}` },
      });

      const allEvents = res.data.data || [];
      const userId = profile?._id?.toString();

      console.log("=== DEBUG INFO ===");
      console.log("Current user ID:", userId);
      console.log("User object:", profile);
      console.log("All events count:", allEvents.length);

      if (allEvents.length > 0) {
        console.log("First event sample:", {
          title: allEvents[0].title,
          organizerId: allEvents[0].organizerId,
          organizerId_type: typeof allEvents[0].organizerId,
          participantsCount: allEvents[0].participants?.length,
          participants: allEvents[0].participants,
        });
      }

      // Organized events
      const organized = allEvents.filter((event) => {
        const orgId = event.organizerId;
        const orgIdStr =
          typeof orgId === "string"
            ? orgId
            : orgId?._id
            ? orgId._id.toString()
            : orgId?.toString();

        const isMatch = orgIdStr === userId;

        if (isMatch) {
          console.log(`‚úÖ Matched (organized): ${event.title}`, {
            orgId,
            userId,
          });
        }

        return isMatch;
      });

      // Registered events
      const registered = allEvents.filter((event) => {
        const isRegistered = event.participants?.some((p) => {
          const participantId =
            typeof p === "string"
              ? p
              : p?._id
              ? p._id.toString()
              : p.toString();
          return participantId === userId;
        });

        if (isRegistered) {
          console.log(`‚úÖ Registered: ${event.title}`);
        }

        return isRegistered;
      });

      console.log("Organized events found:", organized.length);
      console.log("Registered events found:", registered.length);
      console.log("================");

      setMyEvents(organized);
      setRegisteredEvents(registered);
    } catch (err) {
      console.error("Error fetching events:", err);
    } finally {
      setDashboardLoading(false);
    }
  };

  // Fetch dashboard events when Events tab is active AND profile is loaded
  useEffect(() => {
    if (activeTab === "events" && token && profile?._id) {
      fetchDashboardData();
    }
  }, [activeTab, token, profile]);

  const handleFormChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: type === "checkbox" ? checked : value,
    }));
  };

  const handleSave = async (e) => {
    e.preventDefault();
    try {
      setSaving(true);
      setError("");
      setSuccessMsg("");

      const updatePayload = {
        "profile.fullName": formData.fullName,
        "profile.department": formData.department,
        "profile.year": formData.year,
        "profile.phone": formData.phone,
        "profile.avatar": formData.avatar,
        "profile.bio": formData.bio,
        "profile.skills": formData.skills,
        "contactPreferences.preferredChannel": formData.preferredChannel,
        "contactPreferences.alternateEmail": formData.alternateEmail,
        "contactPreferences.whatsappNumber": formData.whatsappNumber,
        "notificationSettings.email.registration": formData.emailRegistration,
        "notificationSettings.email.reminders": formData.emailReminders,
        "notificationSettings.email.results": formData.emailResults,
        "notificationSettings.email.announcements": formData.emailAnnouncements,
        "notificationSettings.inApp.announcements": formData.inAppAnnouncements,
        "notificationSettings.inApp.systemAlerts": formData.inAppSystemAlerts,
        "notificationSettings.inApp.results": formData.inAppResults,
      };

      const res = await axios.put(`${API_BASE_URL}/users/me`, updatePayload, {
        headers: { Authorization: `Bearer ${token}` },
      });

      setProfile(res.data.data);
      setSuccessMsg("Profile updated successfully!");
      setEditPersonal(false);
      setEditContact(false);
      setEditNotifications(false);

      setTimeout(() => setSuccessMsg(""), 3000);
    } catch (err) {
      console.error("Error updating profile", err);
      setError("Failed to update profile");
    } finally {
      setSaving(false);
    }
  };

  const handleEditClick = (event) => {
    setEditingEvent(event);
  };

  const handleDeleteClick = async (eventId) => {
    if (
      !window.confirm(
        "Are you sure you want to delete this event? This action cannot be undone."
      )
    ) {
      return;
    }

    try {
      const response = await axios.delete(`${API_BASE_URL}/events/${eventId}`, {
        headers: { Authorization: `Bearer ${token}` },
      });

      if (response.data.success) {
        alert("‚úÖ Event deleted successfully!");
        setMyEvents(myEvents.filter((e) => e._id !== eventId));
        setSuccessMsg("Event deleted successfully!");
        setTimeout(() => setSuccessMsg(""), 3000);
      }
    } catch (error) {
      console.error("Error deleting event:", error);
      const errorMsg =
        error.response?.data?.message || "Failed to delete event";
      setError(errorMsg);
      setTimeout(() => setError(""), 3000);
    }
  };

  const handleUnregister = async (eventId) => {
    if (!window.confirm('Are you sure you want to unregister from this event?')) {
      return;
    }
  
    try {
      setLoading(true);
      console.log('üóëÔ∏è Unregistering from event:', eventId);
  
      const event = registeredEvents.find(e => e._id === eventId);
      if (!event) {
        throw new Error('Event not found');
      }
  
      // Check if this is a team event and if user is a team leader
      let isTeamLeader = false;
      let teamIdToUnregister = null;
  
      if (event.registrationType === 'team' && event.teamRegistrations?.length > 0) {
        for (const teamReg of event.teamRegistrations) {
          const isInTeam = teamReg.members?.some((m) => 
            (m.userId?._id || m.userId)?.toString() === profile._id?.toString()
          );
  
          if (isInTeam) {
            try {
              const teamRes = await axios.get(
                `${API_BASE_URL}/teams/${teamReg.teamId?._id || teamReg.teamId}`,
                { headers: { Authorization: `Bearer ${token}` } }
              );
  
              if (teamRes.data.data?.leader?.toString() === profile._id?.toString()) {
                isTeamLeader = true;
                teamIdToUnregister = teamReg.teamId?._id || teamReg.teamId;
                break;
              }
            } catch (err) {
              console.log('Could not verify team leadership');
            }
          }
        }
      }
  
      if (isTeamLeader && teamIdToUnregister) {
        // Team unregister
        console.log('üë• Unregistering entire team from event...');
        const confirmTeamUnregister = window.confirm(
          '‚ö†Ô∏è You are the team leader. Unregistering will remove your ENTIRE TEAM from this event. All team members will be removed. Continue?'
        );
  
        if (!confirmTeamUnregister) {
          setLoading(false);
          return;
        }
  
        const res = await axios.post(
          `${API_BASE_URL}/events/${eventId}/unregister-team`,
          { teamId: teamIdToUnregister },
          { headers: { Authorization: `Bearer ${token}` } }
        );
  
        console.log('‚úÖ Team unregistered response:', res.data);
        alert(`‚úÖ Your entire team has been unregistered! ${res.data.message}`);
      } else {
        // Individual unregister
        console.log('üë§ Unregistering individual from event...');
        const res = await axios.post(
          `${API_BASE_URL}/events/${eventId}/unregister`,
          {},
          { headers: { Authorization: `Bearer ${token}` } }
        );
  
        console.log('‚úÖ Individual unregistered response:', res.data);
        alert('‚úÖ You have been unregistered from the event!');
      }
  
      // Refresh registered events list
      console.log('üîÑ Refreshing registered events...');
      const updatedRes = await axios.get(
        `${API_BASE_URL}/events/my-events/registered`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      
      setRegisteredEvents(updatedRes.data.data);
      setError('');
      console.log('‚úÖ Registered events refreshed:', updatedRes.data.data.length);
    } catch (err) {
      console.error('‚ùå Unregister error:', err);
      const errorMsg = err.response?.data?.message || err.message || 'Failed to unregister from event';
      setError(errorMsg);
      alert('‚ùå ' + errorMsg);
    } finally {
      setLoading(false);
    }
  };
  


  const handleChangePassword = async (e) => {
    e.preventDefault();
    setPasswordError("");
    setPasswordMsg("");

    if (
      !passwordData.oldPassword ||
      !passwordData.newPassword ||
      !passwordData.confirmPassword
    ) {
      setPasswordError("All fields are required");
      return;
    }

    if (passwordData.newPassword !== passwordData.confirmPassword) {
      setPasswordError("New passwords do not match");
      return;
    }

    if (passwordData.newPassword.length < 6) {
      setPasswordError("Password must be at least 6 characters");
      return;
    }

    try {
      setChangingPassword(true);
      await axios.post(
        `${API_BASE_URL}/users/change-password`,
        {
          oldPassword: passwordData.oldPassword,
          newPassword: passwordData.newPassword,
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );

      setPasswordMsg("Password changed successfully!");
      setPasswordData({
        oldPassword: "",
        newPassword: "",
        confirmPassword: "",
        showPassword: false,
      });
      setShowPasswordForm(false);

      setTimeout(() => setPasswordMsg(""), 3000);
    } catch (err) {
      const msg = err.response?.data?.message || "Failed to change password";
      setPasswordError(msg);
    } finally {
      setChangingPassword(false);
    }
  };

  if (!token) {
    return (
      <div className="profile-page">
        <div className="empty-state">Please login to view your profile</div>
      </div>
    );
  }

  if (detailEventId) {
    return (
      <EventDetailPage
        eventId={detailEventId}
        onBack={() => setDetailEventId(null)}
        setCurrentPage={setCurrentPage}
      />
    );
  }

  if (loading || !profile) {
    return (
      <div className="profile-page">
        <div className="loader"></div>
      </div>
    );
  }

  return (
    <div className="profile-page">
      {/* HEADER WITH HERO */}
      <div className="profile-hero">
        <div className="hero-background"></div>
        <div className="hero-content">
          <div className="avatar-container">
            {formData.avatar ? (
              <img
                src={formData.avatar}
                alt="Avatar"
                className="avatar-image"
              />
            ) : (
              <div className="avatar-placeholder">
                {profile.username?.[0]?.toUpperCase()}
              </div>
            )}
          </div>
          <div className="hero-info">
            <h1>{profile.username}</h1>
            <p>{profile.email}</p>
            <span className={`badge badge-${profile.role}`}>
              {profile.role.toUpperCase()}
            </span>
          </div>
        </div>
      </div>

      {/* STATS CARDS */}
      {stats && (
        <div className="stats-grid">
          <div
            className="stat-card cursor-pointer hover:shadow-lg"
            onClick={() => setActiveTab("events")}
          >
            <div className="stat-icon">üìÖ</div>
            <div className="stat-content">
              <div className="stat-value">{stats.registeredCount}</div>
              <div className="stat-label">Events Registered</div>
            </div>
          </div>
          {profile.role === "organizer" && (
            <div
              className="stat-card cursor-pointer hover:shadow-lg"
              onClick={() => setActiveTab("events")}
            >
              <div className="stat-icon">üéØ</div>
              <div className="stat-content">
                <div className="stat-value">{stats.organizedCount}</div>
                <div className="stat-label">Events Organized</div>
              </div>
            </div>
          )}
          <div className="stat-card">
            <div className="stat-icon">üîú</div>
            <div className="stat-content">
              <div className="stat-value">{stats.upcomingRegistered}</div>
              <div className="stat-label">Upcoming Events</div>
            </div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üèÜ</div>
            <div className="stat-content">
              <div className="stat-value">{stats.certificatesCount}</div>
              <div className="stat-label">Certificates</div>
            </div>
          </div>
        </div>
      )}

      {/* ALERTS */}
      {error && <div className="alert alert-error">{error}</div>}
      {successMsg && <div className="alert alert-success">{successMsg}</div>}
      {passwordMsg && <div className="alert alert-success">{passwordMsg}</div>}
      {passwordError && (
        <div className="alert alert-error">{passwordError}</div>
      )}

      {/* TAB NAVIGATION */}
      <div className="tabs-container">
        <div className="tabs">
          <button
            className={`tab-btn ${activeTab === "overview" ? "active" : ""}`}
            onClick={() => setActiveTab("overview")}
          >
            üë§ Personal
          </button>
          <button
            className={`tab-btn ${activeTab === "events" ? "active" : ""}`}
            onClick={() => setActiveTab("events")}
          >
            üìã My Events
          </button>
          <button
            className={`tab-btn ${activeTab === "contact" ? "active" : ""}`}
            onClick={() => setActiveTab("contact")}
          >
            üìû Contact
          </button>
          <button
            className={`tab-btn ${
              activeTab === "notifications" ? "active" : ""
            }`}
            onClick={() => setActiveTab("notifications")}
          >
            üîî Notifications
          </button>
          <button
            className={`tab-btn ${activeTab === "security" ? "active" : ""}`}
            onClick={() => setActiveTab("security")}
          >
            üîê Security
          </button>
        </div>
      </div>

      {/* TAB CONTENT */}
      <div className="profile-content">
        {/* PERSONAL TAB */}
        {activeTab === "overview" && (
          <div className="tab-pane">
            <div className="section-header">
              <h2>Personal Information</h2>
              <button
                className={`btn-toggle ${editPersonal ? "active" : ""}`}
                onClick={() => setEditPersonal(!editPersonal)}
              >
                {editPersonal ? "‚úï Cancel" : "‚úèÔ∏è Edit"}
              </button>
            </div>

            {!editPersonal ? (
              <div className="info-grid">
                <div className="info-item">
                  <span className="label">Full Name</span>
                  <span className="value">{formData.fullName || "‚Äî"}</span>
                </div>
                <div className="info-item">
                  <span className="label">College ID</span>
                  <span className="value">{profile.collegeId || "‚Äî"}</span>
                </div>
                <div className="info-item">
                  <span className="label">Department</span>
                  <span className="value">{formData.department || "‚Äî"}</span>
                </div>
                <div className="info-item">
                  <span className="label">Year</span>
                  <span className="value">{formData.year || "‚Äî"}</span>
                </div>
                <div className="info-item">
                  <span className="label">Phone</span>
                  <span className="value">{formData.phone || "‚Äî"}</span>
                </div>
                <div className="info-item full">
                  <span className="label">Bio</span>
                  <span className="value">{formData.bio || "‚Äî"}</span>
                </div>
                <div className="info-item full">
                  <span className="label">Skills</span>
                  <span className="value">{formData.skills || "‚Äî"}</span>
                </div>
              </div>
            ) : (
              <form className="edit-form" onSubmit={handleSave}>
                <div className="form-row">
                  <div className="form-group">
                    <label>Full Name</label>
                    <input
                      type="text"
                      name="fullName"
                      value={formData.fullName}
                      onChange={handleFormChange}
                      placeholder="Your full name"
                    />
                  </div>
                  <div className="form-group">
                    <label>Department</label>
                    <input
                      type="text"
                      name="department"
                      value={formData.department}
                      onChange={handleFormChange}
                      placeholder="Computer Science"
                    />
                  </div>
                </div>

                <div className="form-row">
                  <div className="form-group">
                    <label>Year</label>
                    <select
                      name="year"
                      value={formData.year}
                      onChange={handleFormChange}
                    >
                      <option value="">Select year</option>
                      <option value="1">1st Year</option>
                      <option value="2">2nd Year</option>
                      <option value="3">3rd Year</option>
                      <option value="4">4th Year</option>
                    </select>
                  </div>
                  <div className="form-group">
                    <label>Phone</label>
                    <input
                      type="tel"
                      name="phone"
                      value={formData.phone}
                      onChange={handleFormChange}
                      placeholder="+91 xxxxx xxxxx"
                    />
                  </div>
                </div>

                <div className="form-group">
                  <label>Avatar URL</label>
                  <input
                    type="url"
                    name="avatar"
                    value={formData.avatar}
                    onChange={handleFormChange}
                    placeholder="https://example.com/avatar.jpg"
                  />
                </div>

                <div className="form-group">
                  <label>Bio</label>
                  <textarea
                    name="bio"
                    value={formData.bio}
                    onChange={handleFormChange}
                    placeholder="Tell us about yourself..."
                    rows="3"
                  />
                </div>

                <div className="form-group">
                  <label>Skills (comma-separated)</label>
                  <input
                    type="text"
                    name="skills"
                    value={formData.skills}
                    onChange={handleFormChange}
                    placeholder="React, Node.js, Design, ..."
                  />
                </div>

                <button type="submit" className="btn-primary" disabled={saving}>
                  {saving ? "Saving..." : "Save Changes"}
                </button>
              </form>
            )}
          </div>
        )}

        {/* EVENTS TAB */}
        {activeTab === "events" && (
          <div className="tab-pane">
            {dashboardLoading ? (
              <div className="loader"></div>
            ) : (
              <>
                {/* ORGANIZED EVENTS - only for organizers */}
                {profile.role === "organizer" && (
                  <>
                    <div className="section-header">
                      <h2>üéØ Events You Organized ({myEvents.length})</h2>
                    </div>

                    {myEvents.length > 0 ? (
                      <div className="events-list">
                        {myEvents.map((event) => {
                          const eventDate = new Date(
                            event.dates?.startDate || new Date()
                          );
                          const isExpanded = selectedEvent?._id === event._id;

                          return (
                            <div key={event._id} className="event-item">
                              <div className="event-header">
                                <h3>{event.title}</h3>
                                <span className="category-badge">
                                  {event.category}
                                </span>
                              </div>
                              <p className="event-desc">
                                {event.description?.substring(0, 100)}...
                              </p>
                              <div className="event-meta">
                                <span>
                                  üìÖ {eventDate.toLocaleDateString("en-IN")}
                                </span>
                                <span>
                                  üë• {event.participants?.length || 0}{" "}
                                  registered
                                </span>
                                <span>
                                  üìç{" "}
                                  {event.location?.venue ||
                                    event.venue?.name ||
                                    "TBD"}
                                </span>
                              </div>

                              {isExpanded && (
                                <div className="event-detail-expand">
                                  <div className="detail-content">
                                    <h4>Full Description</h4>
                                    <p>{event.description}</p>

                                    <h4>Event Details</h4>
                                    <div className="detail-grid">
                                      <div>
                                        <strong>Start Date:</strong>
                                        <p>
                                          {new Date(
                                            event.dates?.startDate
                                          ).toLocaleString("en-IN")}
                                        </p>
                                      </div>
                                      <div>
                                        <strong>End Date:</strong>
                                        <p>
                                          {new Date(
                                            event.dates?.endDate
                                          ).toLocaleString("en-IN")}
                                        </p>
                                      </div>
                                      <div>
                                        <strong>Venue:</strong>
                                        <p>{event.location?.venue || "TBD"}</p>
                                      </div>
                                      <div>
                                        <strong>Category:</strong>
                                        <p>{event.category}</p>
                                      </div>
                                    </div>

                                    <h4>Registration Info</h4>
                                    <p>
                                      <strong>Total Registered:</strong>{" "}
                                      {event.participants?.length || 0}
                                    </p>
                                    <p>
                                      <strong>Max Capacity:</strong>{" "}
                                      {event.maxParticipants || "Unlimited"}
                                    </p>
                                  </div>
                                </div>
                              )}

                              <div className="event-actions">
                                <button
                                  className="btn-secondary"
                                  onClick={() => setViewingParticipants(event)}
                                >
                                  üë• View Participants
                                </button>
                                <button
                                  className="btn-edit"
                                  onClick={() => handleEditClick(event)}
                                >
                                  ‚úèÔ∏è Edit
                                </button>
                                <button
                                  className="btn-delete"
                                  onClick={() => handleDeleteClick(event._id)}
                                >
                                  üóëÔ∏è Delete
                                </button>
                              </div>
                            </div>
                          );
                        })}
                      </div>
                    ) : (
                      <div className="empty-message">
                        <p>üì≠ No events organized yet</p>
                        <p
                          style={{
                            fontSize: "13px",
                            marginTop: "8px",
                          }}
                        >
                          Create your first event from the navbar
                        </p>
                      </div>
                    )}
                  </>
                )}

                {/* REGISTERED EVENTS */}
                <div
                  className="section-header"
                  style={{
                    marginTop:
                      profile.role === "organizer" && myEvents.length > 0
                        ? "40px"
                        : 0,
                  }}
                >
                  <h2>
                    üìÖ Events You Registered For ({registeredEvents.length})
                  </h2>
                </div>

                {registeredEvents.length > 0 ? (
                  <div className="events-list">
                    {registeredEvents.map((event) => {
                      const eventDate = new Date(
                        event.dates?.startDate || new Date()
                      );
                      const isExpanded = selectedEvent?._id === event._id;
                      const organizerId =
                        event.organizerId?._id || event.organizerId;
                      const isOrganizer =
                        organizerId?.toString() === profile._id?.toString();

                      return (
                        <div key={event._id} className="event-item">
                          <div className="event-header">
                            <h3>{event.title}</h3>
                            <span className="category-badge">
                              {event.category}
                            </span>
                          </div>
                          <p className="event-desc">
                            {event.description?.substring(0, 100)}...
                          </p>
                          <div className="event-meta">
                            <span>
                              üìÖ {eventDate.toLocaleDateString("en-IN")}
                            </span>
                            <span>
                              üë• {event.participants?.length || 0} total
                            </span>
                            <span>
                              üìç{" "}
                              {event.location?.venue ||
                                event.venue?.name ||
                                "TBD"}
                            </span>
                          </div>

                          {isExpanded && (
                            <div className="event-detail-expand">
                              <div className="detail-content">
                                <h4>Full Description</h4>
                                <p>{event.description}</p>

                                <h4>Event Details</h4>
                                <div className="detail-grid">
                                  <div>
                                    <strong>Start Date:</strong>
                                    <p>
                                      {new Date(
                                        event.dates?.startDate
                                      ).toLocaleString("en-IN")}
                                    </p>
                                  </div>
                                  <div>
                                    <strong>End Date:</strong>
                                    <p>
                                      {new Date(
                                        event.dates?.endDate
                                      ).toLocaleString("en-IN")}
                                    </p>
                                  </div>
                                  <div>
                                    <strong>Venue:</strong>
                                    <p>{event.location?.venue || "TBD"}</p>
                                  </div>
                                  <div>
                                    <strong>Category:</strong>
                                    <p>{event.category}</p>
                                  </div>
                                </div>

                                <h4>Registration Info</h4>
                                <p>
                                  <strong>Organizer:</strong>{" "}
                                  {event.organizerId?.username || "Unknown"}
                                </p>
                                <p>
                                  <strong>Total Registered:</strong>{" "}
                                  {event.participants?.length || 0}
                                </p>
                              </div>
                            </div>
                          )}

                          <div className="event-actions">
                            <button
                              className="btn-secondary"
                              onClick={() => setDetailEventId(event._id)}
                            >
                              üëÅÔ∏è View Details
                            </button>

                            {!isOrganizer && (
                              <button
                                className="btn-danger"
                                onClick={() => handleUnregister(event._id)}
                                disabled={loading}
                                title={
                                  event.registrationType === "team"
                                    ? "Unregister entire team"
                                    : "Unregister yourself"
                                }
                              >
                                {loading
                                  ? "‚è≥ Unregistering..."
                                  : "‚ùå Unregister"}
                              </button>
                            )}
                          </div>
                        </div>
                      );
                    })}
                  </div>
                ) : (
                  <div className="empty-message">
                    <p>üì≠ No events registered yet</p>
                    <p
                      style={{
                        fontSize: "13px",
                        marginTop: "8px",
                      }}
                    >
                      Browse events and register to get started!
                    </p>
                  </div>
                )}
              </>
            )}
          </div>
        )}

        {/* CONTACT TAB */}
        {activeTab === "contact" && (
          <div className="tab-pane">
            <div className="section-header">
              <h2>Contact & Communication</h2>
              <button
                className={`btn-toggle ${editContact ? "active" : ""}`}
                onClick={() => setEditContact(!editContact)}
              >
                {editContact ? "‚úï Cancel" : "‚úèÔ∏è Edit"}
              </button>
            </div>

            {!editContact ? (
              <div className="info-grid">
                <div className="info-item">
                  <span className="label">Preferred Channel</span>
                  <span className="value capitalize">
                    {formData.preferredChannel}
                  </span>
                </div>
                <div className="info-item">
                  <span className="label">Alternate Email</span>
                  <span className="value">
                    {formData.alternateEmail || "‚Äî"}
                  </span>
                </div>
                <div className="info-item">
                  <span className="label">WhatsApp Number</span>
                  <span className="value">
                    {formData.whatsappNumber || "‚Äî"}
                  </span>
                </div>
              </div>
            ) : (
              <form className="edit-form" onSubmit={handleSave}>
                <div className="form-group">
                  <label>Preferred Communication Channel</label>
                  <div className="radio-group">
                    <label className="radio-label">
                      <input
                        type="radio"
                        name="preferredChannel"
                        value="email"
                        checked={formData.preferredChannel === "email"}
                        onChange={handleFormChange}
                      />
                      <span>Email</span>
                    </label>
                    <label className="radio-label">
                      <input
                        type="radio"
                        name="preferredChannel"
                        value="whatsapp"
                        checked={formData.preferredChannel === "whatsapp"}
                        onChange={handleFormChange}
                      />
                      <span>WhatsApp</span>
                    </label>
                    <label className="radio-label">
                      <input
                        type="radio"
                        name="preferredChannel"
                        value="in-app"
                        checked={formData.preferredChannel === "in-app"}
                        onChange={handleFormChange}
                      />
                      <span>In-app Only</span>
                    </label>
                  </div>
                </div>

                <div className="form-group">
                  <label>Alternate Email</label>
                  <input
                    type="email"
                    name="alternateEmail"
                    value={formData.alternateEmail}
                    onChange={handleFormChange}
                    placeholder="your.email@example.com"
                  />
                </div>

                <div className="form-group">
                  <label>WhatsApp Number</label>
                  <input
                    type="tel"
                    name="whatsappNumber"
                    value={formData.whatsappNumber}
                    onChange={handleFormChange}
                    placeholder="+91 xxxxx xxxxx"
                  />
                </div>

                <button type="submit" className="btn-primary" disabled={saving}>
                  {saving ? "Saving..." : "Save Changes"}
                </button>
              </form>
            )}
          </div>
        )}

        {/* NOTIFICATIONS TAB */}
        {activeTab === "notifications" && (
          <div className="tab-pane">
            <div className="section-header">
              <h2>Notification Preferences</h2>
              <button
                className={`btn-toggle ${editNotifications ? "active" : ""}`}
                onClick={() => setEditNotifications(!editNotifications)}
              >
                {editNotifications ? "‚úï Cancel" : "‚úèÔ∏è Edit"}
              </button>
            </div>

            <form className="edit-form" onSubmit={handleSave}>
              <div className="preferences-grid">
                <div className="pref-section">
                  <h3>üìß Email Notifications</h3>
                  <label className="checkbox-item">
                    <input
                      type="checkbox"
                      name="emailRegistration"
                      checked={formData.emailRegistration}
                      onChange={handleFormChange}
                      disabled={!editNotifications}
                    />
                    <span>Registration confirmations</span>
                  </label>
                  <label className="checkbox-item">
                    <input
                      type="checkbox"
                      name="emailReminders"
                      checked={formData.emailReminders}
                      onChange={handleFormChange}
                      disabled={!editNotifications}
                    />
                    <span>Event reminders (1 day & 1 hour before)</span>
                  </label>
                  <label className="checkbox-item">
                    <input
                      type="checkbox"
                      name="emailResults"
                      checked={formData.emailResults}
                      onChange={handleFormChange}
                      disabled={!editNotifications}
                    />
                    <span>Results & certificates released</span>
                  </label>
                  <label className="checkbox-item">
                    <input
                      type="checkbox"
                      name="emailAnnouncements"
                      checked={formData.emailAnnouncements}
                      onChange={handleFormChange}
                      disabled={!editNotifications}
                    />
                    <span>Organizer announcements</span>
                  </label>
                </div>

                <div className="pref-section">
                  <h3>üîî In-app Notifications</h3>
                  <label className="checkbox-item">
                    <input
                      type="checkbox"
                      name="inAppAnnouncements"
                      checked={formData.inAppAnnouncements}
                      onChange={handleFormChange}
                      disabled={!editNotifications}
                    />
                    <span>Announcements</span>
                  </label>
                  <label className="checkbox-item">
                    <input
                      type="checkbox"
                      name="inAppSystemAlerts"
                      checked={formData.inAppSystemAlerts}
                      onChange={handleFormChange}
                      disabled={!editNotifications}
                    />
                    <span>System alerts</span>
                  </label>
                  <label className="checkbox-item">
                    <input
                      type="checkbox"
                      name="inAppResults"
                      checked={formData.inAppResults}
                      onChange={handleFormChange}
                      disabled={!editNotifications}
                    />
                    <span>Results published</span>
                  </label>
                </div>
              </div>

              {editNotifications && (
                <button
                  type="submit"
                  className="btn-primary"
                  style={{ marginTop: "20px" }}
                  disabled={saving}
                >
                  {saving ? "Saving..." : "Save Preferences"}
                </button>
              )}
            </form>
          </div>
        )}

        {/* SECURITY TAB */}
        {activeTab === "security" && (
          <div className="tab-pane">
            <div className="section-header">
              <h2>Security & Account</h2>
            </div>

            <div className="security-content">
              <div className="account-dates">
                <p>
                  <strong>Account created:</strong>{" "}
                  {new Date(profile.createdAt).toLocaleDateString()}
                </p>
                <p>
                  <strong>Last updated:</strong>{" "}
                  {new Date(profile.updatedAt).toLocaleDateString()}
                </p>
              </div>

              <div className="password-section">
                <h3>Change Password</h3>
                {!showPasswordForm ? (
                  <button
                    className="btn-secondary"
                    onClick={() => setShowPasswordForm(true)}
                  >
                    üîë Change Password
                  </button>
                ) : (
                  <form
                    onSubmit={handleChangePassword}
                    className="password-form"
                  >
                    <div className="form-group">
                      <label>Current Password</label>
                      <input
                        type={passwordData.showPassword ? "text" : "password"}
                        value={passwordData.oldPassword}
                        onChange={(e) =>
                          setPasswordData({
                            ...passwordData,
                            oldPassword: e.target.value,
                          })
                        }
                        placeholder="Enter current password"
                      />
                    </div>

                    <div className="form-group">
                      <label>New Password</label>
                      <input
                        type={passwordData.showPassword ? "text" : "password"}
                        value={passwordData.newPassword}
                        onChange={(e) =>
                          setPasswordData({
                            ...passwordData,
                            newPassword: e.target.value,
                          })
                        }
                        placeholder="Enter new password"
                      />
                    </div>

                    <div className="form-group">
                      <label>Confirm Password</label>
                      <input
                        type={passwordData.showPassword ? "text" : "password"}
                        value={passwordData.confirmPassword}
                        onChange={(e) =>
                          setPasswordData({
                            ...passwordData,
                            confirmPassword: e.target.value,
                          })
                        }
                        placeholder="Confirm new password"
                      />
                    </div>

                    <label className="checkbox-item">
                      <input
                        type="checkbox"
                        checked={passwordData.showPassword}
                        onChange={(e) =>
                          setPasswordData({
                            ...passwordData,
                            showPassword: e.target.checked,
                          })
                        }
                      />
                      <span>Show passwords</span>
                    </label>

                    <div className="form-actions">
                      <button
                        type="submit"
                        className="btn-primary"
                        disabled={changingPassword}
                      >
                        {changingPassword ? "Updating..." : "Update Password"}
                      </button>
                      <button
                        type="button"
                        className="btn-secondary"
                        onClick={() => setShowPasswordForm(false)}
                      >
                        Cancel
                      </button>
                    </div>
                  </form>
                )}
              </div>
            </div>
          </div>
        )}
      </div>
      {/* EDIT EVENT MODAL */}
      {editingEvent && (
        <EditEventModal
          event={editingEvent}
          token={token}
          onClose={() => setEditingEvent(null)}
          onSuccess={fetchDashboardData}
        />
      )}

      {/* VIEW PARTICIPANTS MODAL */}
      {viewingParticipants && (
        <ViewParticipantsModal
          event={viewingParticipants}
          token={token}
          onClose={() => setViewingParticipants(null)}
        />
      )}
    </div>
  );
}
</file>

<file path="frontend/frontend/src/pages/RegisterPage.jsx">
import { useState } from "react";
import { useAuth } from "../context/AuthContext";
import "../styles/AuthPages.css";

export default function RegisterPage({ setCurrentPage }) {
  const [formData, setFormData] = useState({
    username: "",
    email: "",
    password: "",
    fullName: "",
    usn: "", // Changed from collegeId
    department: "",
    year: 1,
    phone: "",
    role: "student",
  });
  const [error, setError] = useState("");
  const [loading, setLoading] = useState(false);
  const { register } = useAuth();

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({ ...prev, [name]: value }));
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError("");
    setLoading(true);

    const result = await register(formData);

    if (result.success) {
      // ‚úÖ ADD THIS - Navigate to events page after successful registration
      setTimeout(() => {
        setCurrentPage("events");
      }, 500);
    } else {
      setError(result.error);
    }

    setLoading(false);
  };

  return (
    <div className="auth-container">
      <div className="auth-card">
        <h2>Register</h2>
        {error && <div className="error-message">{error}</div>}
        <form onSubmit={handleSubmit}>
          <div className="form-row">
            <div className="form-group">
              <label>Username:</label>
              <input
                type="text"
                name="username"
                value={formData.username}
                onChange={handleChange}
                required
              />
            </div>
            <div className="form-group">
              <label>Email:</label>
              <input
                type="email"
                name="email"
                value={formData.email}
                onChange={handleChange}
                required
              />
            </div>
          </div>
          <div className="form-row">
            <div className="form-group">
              <label>Password:</label>
              <input
                type="password"
                name="password"
                value={formData.password}
                onChange={handleChange}
                required
              />
            </div>
            <div className="form-group">
              <label>Full Name:</label>
              <input
                type="text"
                name="fullName"
                value={formData.fullName}
                onChange={handleChange}
                required
              />
            </div>
          </div>
          <div className="form-row">
            <div className="form-group">
              <label>USN (University Serial Number):</label>
              <input
                type="text"
                name="usn"
                value={formData.usn}
                onChange={handleChange}
                placeholder="e.g., 1SI21CS001"
                required
              />
            </div>
            <div className="form-group">
              <label>Phone:</label>
              <input
                type="tel"
                name="phone"
                value={formData.phone}
                onChange={handleChange}
              />
            </div>
          </div>
          <div className="form-row">
            <div className="form-group">
              <label>Department:</label>
              <input
                type="text"
                name="department"
                value={formData.department}
                onChange={handleChange}
              />
            </div>
            <div className="form-group">
              <label>Year:</label>
              <select name="year" value={formData.year} onChange={handleChange}>
                <option value={1}>1st Year</option>
                <option value={2}>2nd Year</option>
                <option value={3}>3rd Year</option>
                <option value={4}>4th Year</option>
              </select>
            </div>
            <div className="form-group">
              <label>Role:</label>
              <select name="role" value={formData.role} onChange={handleChange}>
                <option value="student">Student</option>
              </select>
            </div>
          </div>
          <button type="submit" disabled={loading} className="btn-primary">
            {loading ? "Registering..." : "Register"}
          </button>
        </form>
        <p className="auth-link">
          Already have account?{" "}
          <a
            onClick={() => setCurrentPage("login")}
            style={{
              cursor: "pointer",
              color: "#007bff",
              textDecoration: "underline",
            }}
          >
            {" "}
            Login
          </a>
        </p>

        <p className="auth-link">
          Are you a college principal?{" "}
          <a
            onClick={() => setCurrentPage("principal-register")}
            style={{
              cursor: "pointer",
              color: "#007bff",
              textDecoration: "underline",
            }}
          >
            Register as Principal
          </a>
        </p>
      </div>
    </div>
  );
}
</file>

<file path="frontend/frontend/src/services/api.js">
import axios from 'axios';

const API = axios.create({
  baseURL: 'http://localhost:5000/api',
  headers: { 'Content-Type': 'application/json' }
});

API.interceptors.request.use((config) => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

export const authAPI = {
  register: (userData) => API.post('/auth/register', userData),
  login: (email, password) => API.post('/auth/login', { email, password }),
  getMe: () => API.get('/auth/me'),
};

export const eventAPI = {
  getAllEvents: () => API.get('/events'),
  getEventById: (id) => API.get(`/events/${id}`),
  createEvent: (eventData) => API.post('/events', eventData),
  updateEvent: (id, eventData) => API.put(`/events/${id}`, eventData),
  deleteEvent: (id) => API.delete(`/events/${id}`),
  
  // NEW: Registration endpoints
  registerEvent: (eventId) => API.post(`/events/${eventId}/register`),
  unregisterEvent: (eventId) => API.post(`/events/${eventId}/unregister`),
  getMyRegistrations: () => API.get('/events/my-events/registered'),
  getEventParticipants: (eventId) => API.get(`/events/${eventId}/participants`),
};

export const principalAPI = {
  register: (data) => API.post("principals/register", data),
  getRequests: () => API.get("principals/requests"),
  approve: (id) => API.post(`principals/requests/${id}/approve`),
  reject: (id, notes) => API.post(`principals/requests/${id}/reject`, { notes }),
};



export default API;
</file>

<file path="frontend/frontend/src/styles/EventDetailPage.css">
/* ---------- Page Wrapper ---------- */
.detail-container {
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;
  padding: 30px 20px 40px;
  animation: fadeInDetail 0.35s ease;
}

/* ---------- Back Button ---------- */
.back-btn {
  border: none;
  background: transparent;
  font-size: 0.95rem;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  color: #4b5563;
  margin-bottom: 18px;
  padding: 6px 10px;
  border-radius: 999px;
  transition: 0.2s ease;
}

.back-btn:hover {
  background: #f3f4f6;
  color: #111827;
}

/* ---------- Loading & Error ---------- */
.loading {
  padding: 30px 0;
  text-align: center;
  color: #6b7280;
  font-size: 1rem;
}

.error {
  padding: 14px 18px;
  border-radius: 12px;
  background: #fee2e2;
  color: #b91c1c;
  font-size: 0.95rem;
}

/* ---------- Main Card ---------- */
.detail-content {
  background: rgba(255, 255, 255, 0.9);
  border-radius: 20px;
  padding: 26px 24px 28px;
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
  backdrop-filter: saturate(180%) blur(18px);
  border: 1px solid rgba(255, 255, 255, 0.7);
}

/* ---------- Header ---------- */
.detail-header {
  border-bottom: 1px solid #e5e7eb;
  padding-bottom: 18px;
  margin-bottom: 20px;
}

.detail-header h1 {
  margin: 0 0 10px;
  font-size: 1.7rem;
  letter-spacing: -0.02em;
}

.category-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  background: #eff6ff;
  color: #1d4ed8;
  font-size: 0.8rem;
  margin-right: 8px;
}

.type-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  background: #ecfdf3;
  color: #15803d;
  font-size: 0.8rem;
}

/* ---------- Info Section ---------- */
.detail-info {
  display: grid;
  grid-template-columns: 1.2fr 1.2fr;
  gap: 10px 24px;
  margin-bottom: 24px;
}

.info-row {
  display: flex;
  flex-direction: column;
  gap: 3px;
  font-size: 0.92rem;
}

.info-label {
  font-weight: 600;
  color: #4b5563;
}

.info-row span:last-child {
  color: #111827;
}

/* ---------- Description ---------- */
.detail-description {
  margin-top: 10px;
  padding: 16px 0 18px;
  border-top: 1px dashed #e5e7eb;
  border-bottom: 1px dashed #e5e7eb;
}

.detail-description h2 {
  margin: 0 0 8px;
  font-size: 1.1rem;
}

.detail-description p {
  margin: 0;
  font-size: 0.95rem;
  line-height: 1.6;
  color: #4b5563;
}

/* ---------- Actions ---------- */
.detail-actions {
  margin-top: 18px;
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Reuse / align with EventsPage button styles */
.btn {
  padding: 10px 16px;
  font-size: 0.92rem;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  transition: 0.2s ease;
  font-weight: 600;
}

.btn-register {
  background: #111827;
  color: white;
}

.btn-register:hover {
  background: #1f2937;
}

.btn-unregister {
  background: #ef4444;
  color: white;
}

.btn-unregister:hover {
  background: #dc2626;
}

/* ---------- Notices ---------- */
.organizer-notice,
.login-notice {
  font-size: 0.93rem;
  color: #6b7280;
}

/* ---------- Participants Section ---------- */
.participants-section {
  margin-top: 26px;
}

.participants-section h2 {
  margin: 0 0 12px;
  font-size: 1.1rem;
}

.participants-list {
  border-radius: 14px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  padding: 10px 0;
  max-height: 260px;
  overflow-y: auto;
}

.participant-item {
  padding: 10px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #e5e7eb;
}

.participant-item:last-child {
  border-bottom: none;
}

.participant-name {
  margin: 0;
  font-size: 0.95rem;
  font-weight: 500;
  color: #111827;
}

.participant-email {
  margin: 2px 0 0;
  font-size: 0.85rem;
  color: #6b7280;
}

/* ---------- Responsive ---------- */
@media (max-width: 768px) {
  .detail-content {
    padding: 20px 16px 22px;
  }

  .detail-info {
    grid-template-columns: 1fr;
  }

  .detail-header h1 {
    font-size: 1.4rem;
  }
}

/* ---------- Animation ---------- */
@keyframes fadeInDetail {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</file>

<file path="frontend/frontend/src/styles/EventsPage.css">
/* --- Variables & Reset --- */
:root {
  --primary-color: #6366f1; /* Indigo */
  --primary-hover: #4f46e5;
  --secondary-color: #ec4899; /* Pink/Rose for accents */
  --bg-color: #f3f4f6; /* Light Grey Background */
  --card-bg: #ffffff;
  --text-main: #1f2937;
  --text-muted: #6b7280;
  --border-color: #e5e7eb;
  --success-color: #10b981;
  --danger-color: #ef4444;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --radius: 12px;
}

/* --- Main Layout --- */
.events-container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  background-color: var(--bg-color);
  min-height: 100vh;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

/* --- Controls & Header --- */
.events-controls {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2.5rem;
  gap: 1.5rem;
  background: var(--card-bg);
  padding: 1rem 1.5rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
}

/* Tabs */
.tabs {
  display: flex;
  gap: 0.5rem;
  background: #f3f4f6;
  padding: 0.25rem;
  border-radius: 10px;
}

.tab {
  padding: 0.6rem 1.25rem;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-weight: 600;
  font-size: 0.95rem;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.tab.active {
  background: var(--card-bg);
  color: var(--primary-color);
  box-shadow: var(--shadow-sm);
}

.tab:hover:not(.active) {
  color: var(--text-main);
}

/* Filters */
.filters {
  display: flex;
  gap: 1rem;
}

.filter-input {
  padding: 0.6rem 1rem;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background-color: var(--card-bg);
  color: var(--text-main);
  font-size: 0.9rem;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.filter-input:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

/* --- Alerts --- */
.alert {
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 2rem;
  font-weight: 500;
}

.alert.error {
  background-color: #fee2e2;
  color: #b91c1c;
  border: 1px solid #fca5a5;
}

/* --- Grid Layout --- */
.events-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap: 2rem;
}

.empty {
  grid-column: 1 / -1;
  text-align: center;
  padding: 4rem;
  color: var(--text-muted);
  font-size: 1.2rem;
  background: white;
  border-radius: var(--radius);
  border: 2px dashed var(--border-color);
}

/* --- Event Card --- */
.event-card {
  background: var(--card-bg);
  border-radius: var(--radius);
  border: 1px solid var(--border-color);
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
  position: relative;
  height: 100%;
}

.event-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
  border-color: transparent;
}

/* Card Top */
.card-top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1rem;
}

.event-card h3 {
  margin: 0 0 0.25rem 0;
  font-size: 1.25rem;
  color: var(--text-main);
  line-height: 1.3;
}

.category {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--primary-color);
  font-weight: 700;
  margin: 0;
}

/* Badge */
.badge {
  font-size: 1.2rem;
  background: #f0fdf4;
  padding: 0.4rem;
  border-radius: 50%;
  border: 1px solid #dcfce7;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
}

.badge.team {
  background: #eef2ff;
  border-color: #e0e7ff;
}

/* Description & Meta */
.description {
  color: var(--text-muted);
  font-size: 0.95rem;
  line-height: 1.6;
  margin-bottom: 1.5rem;
  flex-grow: 1; /* Pushes footer down */
}

.card-meta {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid var(--border-color);
  font-size: 0.9rem;
  color: var(--text-main);
  font-weight: 500;
}

.card-meta span {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Card Footer */
.card-footer {
  margin-top: auto;
  position: relative; /* For dropdown positioning */
}

/* Buttons */
.btn {
  width: 100%;
  padding: 0.75rem;
  border-radius: 8px;
  font-weight: 600;
  font-size: 0.95rem;
  cursor: pointer;
  border: none;
  transition: background 0.2s;
  display: inline-flex;
  justify-content: center;
  align-items: center;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-register {
  background-color: var(--primary-color);
  color: white;
}

.btn-register:hover:not(:disabled) {
  background-color: var(--primary-hover);
}

.btn-unregister {
  background-color: #fff;
  border: 1px solid var(--danger-color);
  color: var(--danger-color);
}

.btn-unregister:hover:not(:disabled) {
  background-color: #fef2f2;
}

/* --- Dropdown Styling --- */
.dropdown {
  position: relative;
  width: 100%;
}

.dropdown-menu {
  position: absolute;
  bottom: 110%; /* Makes it pop UP instead of down */
  left: 0;
  width: 100%;
  background: white;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: var(--shadow-lg);
  z-index: 50;
  padding: 0.5rem;
  max-height: 200px;
  overflow-y: auto;
  animation: fadeIn 0.15s ease-out;
}

.dropdown-item {
  display: block;
  width: 100%;
  text-align: left;
  padding: 0.75rem 1rem;
  background: transparent;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-main);
  font-size: 0.9rem;
}

.dropdown-item:hover {
  background-color: #f3f4f6;
  color: var(--primary-color);
}

.dropdown-empty {
  padding: 0.75rem;
  text-align: center;
  color: var(--text-muted);
  font-size: 0.9rem;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* --- Responsive Design --- */
@media (max-width: 768px) {
  .events-controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .tabs {
    width: 100%;
    justify-content: center;
  }
  
  .tab {
    flex: 1;
    text-align: center;
  }

  .filters {
    flex-direction: column;
    width: 100%;
  }
}
</file>

<file path="backend/src/server.js">
const express = require('express');
const dotenv = require('dotenv');
const cors = require('cors');
const connectDB = require('./config/db');


// Load environment variables from .env file
dotenv.config();


// DEBUG: Check if env variables are loaded
console.log('üîç DEBUG: MONGO_URI =', process.env.MONGO_URI);
console.log('üîç DEBUG: PORT =', process.env.PORT);
console.log('üîç DEBUG: NODE_ENV =', process.env.NODE_ENV);
console.log('üîç DEBUG: All env keys:', Object.keys(process.env).filter(k => k.startsWith('MONGO') || k === 'PORT' || k === 'NODE_ENV'));
// Connect to database
connectDB();


// Initialize Express app
const app = express();


// Middleware
app.use(express.json()); // Parse JSON request bodies
app.use(express.urlencoded({ extended: true })); // Parse URL-encoded data
app.use(cors({ 
    origin: ['http://localhost:5173'],
    credentials: true
}));


// ============ ROUTES ============
// Auth routes
app.use('/api/auth', require('./routes/auth.routes'));



// User routes
const userRoutes = require('./routes/user.routes');
app.use('/api/users', userRoutes);


// Event routes
app.use('/api/events', require('./routes/event.routes'));


// Team routes
const teamRoutes = require('./routes/team.routes');
app.use('/api/teams', teamRoutes);


// Notification routes (MUST BE AFTER OTHERS)
const notificationRoutes = require('./routes/notification.routes');
app.use('/api/notifications', notificationRoutes);


const principalRoutes = require("./routes/principal.routes");
app.use("/api/principals", principalRoutes);

const collegeAdminRoutes = require('./routes/college-admin.routes');
app.use('/api/college-admin', collegeAdminRoutes);



// Health check route
app.get('/', (req, res) => {
  res.json({ 
    message: 'College Event Management API',
    status: 'Running',
    version: '1.0.0'
  });
});


// ============ ERROR HANDLING ============
// Error handling middleware (MUST BE LAST)
app.use((err, req, res, next) => {
  console.error('‚ùå Error:', err.stack);
  res.status(err.status || 500).json({
    success: false,
    message: err.message || 'Server Error'
  });
});


// ============ START SERVER ============
const PORT = process.env.PORT || 5000;
const server = app.listen(PORT, () => {
  console.log(`‚úÖ Server running in ${process.env.NODE_ENV} mode on port ${PORT}`);
});


// Handle unhandled promise rejections
process.on('unhandledRejection', (err) => {
  console.error(`‚ùå Unhandled Rejection: ${err.message}`);
  server.close(() => process.exit(1));
});
</file>

<file path="frontend/frontend/src/App.jsx">
import { useState, useEffect } from "react";
import { AuthProvider, useAuth } from "./context/AuthContext";
import LoginPage from "./pages/LoginPage";
import RegisterPage from "./pages/RegisterPage";
import EventsPage from "./pages/EventsPage";
import CreateEventPage from "./pages/CreateEventPage";
import EventDetailPage from "./pages/EventDetailPage";
import ProfilePage from "./pages/ProfilePage";
import TeamPage from "./pages/TeamPage";
import NotificationBell from "./components/NotificationBell";
import AdminDashboardPage from "./pages/AdminDashboardPage";
import PrincipalRegisterPage from "./pages/PrincipalRegisterPage";
import CollegeAdminDashboardPage from "./pages/CollegeAdminDashboardPage";
import CollegeAdminEventsPage from "./pages/CollegeAdminEventsPage";


import "./App.css";

function AppContent() {
  const { isAuthenticated, logout, loading, user } = useAuth();
  const [currentPage, setCurrentPage] = useState("login");
  const [selectedEventId, setSelectedEventId] = useState(null);

  // ‚úÖ UPDATED: Sync currentPage with auth status and handle all roles
  useEffect(() => {
    if (loading) return;

    if (
      isAuthenticated &&
      (currentPage === "login" || currentPage === "register")
    ) {
      // Route based on user role
      if (user?.role === "admin") {
        setCurrentPage("admin-dashboard");
      } else if (user?.role === "collegeAdmin") {
        setCurrentPage("college-admin-dashboard");
      } else if (user?.role === "principal") {
        setCurrentPage("principal-dashboard");
      } else {
        // student, organizer
        setCurrentPage("events");
      }
    } else if (
      !isAuthenticated &&
      currentPage !== "login" &&
      currentPage !== "register" &&
      currentPage !== "principal-register"
    ) {
      setCurrentPage("login");
    }
  }, [isAuthenticated, loading, user?.role]);

  if (loading) return <div className="loading">Loading...</div>;

  const handleNavClick = (page) => {
    if (
      !isAuthenticated &&
      page !== "login" &&
      page !== "register" &&
      page !== "principal-register"
    ) {
      setCurrentPage("login");
    } else {
      setCurrentPage(page);
    }
  };

  const handleViewEventDetail = (eventId) => {
    setSelectedEventId(eventId);
    setCurrentPage("event-detail");
  };

  const handleBackFromDetail = () => {
    setSelectedEventId(null);
    setCurrentPage("events");
  };

  return (
    <>
      <nav className="navbar">
        <div className="nav-container">
          <h1
            className="logo"
            style={{ cursor: "pointer" }}
            onClick={() => {
              if (user?.role === "collegeAdmin") {
                handleNavClick("college-admin-dashboard");
              } else if (user?.role === "admin") {
                handleNavClick("admin-dashboard");
              } else if (user?.role === "principal") {
                handleNavClick("principal-dashboard");
              } else {
                handleNavClick("events");
              }
            }}
          >
            üéì College Events
          </h1>
          <div className="nav-links">
            {isAuthenticated ? (
              <>
                {user?.role === "admin" ? (
                  // Admin Navigation
                  <>
                    <a
                      onClick={() => handleNavClick("admin-dashboard")}
                      style={{ cursor: "pointer" }}
                    >
                      üîê Admin Dashboard
                    </a>
                  </>
                ) : user?.role === "collegeAdmin" ? (
                  // College Admin Navigation ‚úÖ UPDATED
                  <>
                    <a
                      onClick={() => handleNavClick("college-admin-dashboard")}
                      style={{ cursor: "pointer" }}
                    >
                      Dashboard
                    </a>
                    <a
                      onClick={() => handleNavClick("college-admin-events")}
                      style={{ cursor: "pointer" }}
                    >
                      Events
                    </a>
                  </>
                ) : user?.role === "principal" ? (
                  // Principal Navigation ‚úÖ UPDATED
                  <>
                    <a
                      onClick={() => handleNavClick("principal-dashboard")}
                      style={{ cursor: "pointer" }}
                    >
                      üë®‚Äçüíº Principal
                    </a>
                  </>
                ) : (
                  // Regular User Navigation (Student/Organizer)
                  <>
                    <a
                      onClick={() => handleNavClick("events")}
                      style={{ cursor: "pointer" }}
                    >
                      Events
                    </a>
                    {user?.role === "organizer" && (
                      <a
                        onClick={() => handleNavClick("create-event")}
                        style={{ cursor: "pointer" }}
                      >
                        Create Event
                      </a>
                    )}
                    <a
                      onClick={() => handleNavClick("teams")}
                      style={{ cursor: "pointer" }}
                    >
                      üë• Teams
                    </a>
                    <a
                      onClick={() => handleNavClick("profile")}
                      style={{ cursor: "pointer" }}
                    >
                      Profile
                    </a>
                    <NotificationBell />
                  </>
                )}
                <a
                  onClick={() => {
                    logout();
                    setCurrentPage("login");
                  }}
                  style={{ cursor: "pointer" }}
                >
                  Logout
                </a>
              </>
            ) : (
              <>
                <a
                  onClick={() => handleNavClick("login")}
                  style={{ cursor: "pointer" }}
                >
                  Login
                </a>
                <a
                  onClick={() => handleNavClick("register")}
                  style={{ cursor: "pointer" }}
                >
                  Register
                </a>
              </>
            )}
          </div>
        </div>
      </nav>

      {/* Authentication Pages */}
      {!isAuthenticated && currentPage === "login" && (
        <LoginPage setCurrentPage={setCurrentPage} />
      )}
      {!isAuthenticated && currentPage === "register" && (
        <RegisterPage setCurrentPage={setCurrentPage} />
      )}
      {!isAuthenticated && currentPage === "principal-register" && (
        <PrincipalRegisterPage setCurrentPage={setCurrentPage} />
      )}

      {/* Main Pages */}
      {isAuthenticated && currentPage === "events" && (
        <EventsPage onSelectEvent={handleViewEventDetail} />
      )}
      {isAuthenticated &&
        currentPage === "create-event" &&
        user?.role === "organizer" && (
          <CreateEventPage setCurrentPage={setCurrentPage} />
        )}
      {isAuthenticated && currentPage === "event-detail" && selectedEventId && (
        <EventDetailPage
          eventId={selectedEventId}
          onBack={handleBackFromDetail}
          setCurrentPage={setCurrentPage}
        />
      )}
      {isAuthenticated && currentPage === "profile" && (
        <ProfilePage setCurrentPage={setCurrentPage} />
      )}
      {isAuthenticated && currentPage === "teams" && (
        <TeamPage setCurrentPage={setCurrentPage} />
      )}

      {/* Admin Dashboard */}
      {isAuthenticated &&
        currentPage === "admin-dashboard" &&
        user?.role === "admin" && (
          <AdminDashboardPage setCurrentPage={setCurrentPage} />
        )}

      {/* College Admin Dashboard ‚úÖ UPDATED */}
      {isAuthenticated &&
        currentPage === "college-admin-dashboard" &&
        user?.role === "collegeAdmin" && (
          <CollegeAdminDashboardPage setCurrentPage={setCurrentPage} />
        )}

      {/* College Admin Events Page ‚úÖ NEW */}
      {isAuthenticated &&
        currentPage === "college-admin-events" &&
        user?.role === "collegeAdmin" && (
          <CollegeAdminEventsPage setCurrentPage={setCurrentPage} />
        )}

      {/* Principal Dashboard ‚úÖ UPDATED */}
      {isAuthenticated &&
        currentPage === "principal-dashboard" &&
        user?.role === "principal" && (
          <PrincipalDashboard setCurrentPage={setCurrentPage} />
        )}
    </>
  );
}

function App() {
  return (
    <AuthProvider>
      <AppContent />
    </AuthProvider>
  );
}

export default App;
</file>

</files>
